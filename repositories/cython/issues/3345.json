{
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "body": "Given\r\n\r\n```\r\ncdef class Base(object):\r\n    cdef int foo(self):\r\n        ...\r\n\r\ncdef class Sub(Base):\r\n    cdef int foo(self):\r\n        ...\r\n```\r\n\r\nwe know that the `self` argument of `Sub.foo` is `Sub`. However, when inserting this in the vtable, we declare a C function of signature `int(struct Sub*)` rather than `int(struct Base*)` and simply cast it to the latter to put it in the base vtab. It is subsequently called via this base-class signature, which is technically undefined behavior. While this works fine in practice, it can trip up sanitizers such as ubsan (potentially masking further issues).\r\n\r\nWhat we should do instead is declare the self argument to be the base type in the function declaration and then cast it to the correct type in the function body. ",
    "closed_at": null,
    "comment_data": [],
    "comments": 0,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/3345/comments",
    "created_at": "2020-02-05T01:08:32Z",
    "event_data": [],
    "events_url": "https://api.github.com/repos/cython/cython/issues/3345/events",
    "html_url": "https://github.com/cython/cython/issues/3345",
    "id": 560080288,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/3345/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU1NjAwODAyODg=",
    "number": 3345,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "title": "Overridden methods populated with incompatible function pointer types.",
    "updated_at": "2020-02-05T01:08:32Z",
    "url": "https://api.github.com/repos/cython/cython/issues/3345",
    "user": {
        "avatar_url": "https://avatars3.githubusercontent.com/u/486017?v=4",
        "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
        "followers_url": "https://api.github.com/users/robertwb/followers",
        "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
        "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/robertwb",
        "id": 486017,
        "login": "robertwb",
        "node_id": "MDQ6VXNlcjQ4NjAxNw==",
        "organizations_url": "https://api.github.com/users/robertwb/orgs",
        "received_events_url": "https://api.github.com/users/robertwb/received_events",
        "repos_url": "https://api.github.com/users/robertwb/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/robertwb"
    }
}