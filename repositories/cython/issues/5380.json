{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Describe the bug\n\nimporting a cython module with pyximport can alter the logging level of the root logger.\r\nthis is caused by [this distutils commit](https://github.com/pypa/distutils/commit/d763948a0508fddcfb9cc723bc95e133e99f8279).\r\n\r\nI don't think distutils should be logging to the root logger at all but I think it probably isn't expected to be used as a library how pyximport is using it. Perhaps the logging level should just be saved and restored after this line\r\nhttps://github.com/cython/cython/blob/56b30f2e2cbf964eb5b1d1ea4448963d58301035/pyximport/pyxbuild.py#L91\r\nI can submit a PR if you would like.\n\n### Code to reproduce the behaviour:\n\n`example_cython.pyx`:\r\n```cython\r\n# empty\r\n```\r\n`example.py`:\r\n```python\r\nimport logging\r\nlogging.getLogger().setLevel(logging.INFO)\r\n\r\nimport pyximport\r\npyximport.install(language_level=3)\r\n\r\nprint(logging.getLogger().isEnabledFor(logging.INFO))\r\nimport example_cython\r\nprint(logging.getLogger().isEnabledFor(logging.INFO))\r\n```\r\n```\r\n$ pip list\r\nPackage    Version\r\n---------- -------\r\nCython     0.29.34\r\npip        23.0.1\r\nsetuptools 67.6.1\r\n\r\n$ python example.py \r\nTrue\r\nFalse\r\n```\n\n### Expected behaviour\n\nimporting a module that does nothing with logging should not affect the global state of the logging level of the root logger. This affects all logging throughout any application that happens to configure it's logging before importing cython.\n\n### OS\n\nLinux\n\n### Python version\n\n3.11.2\n\n### Cython version\n\n0.29.34\n\n### Additional context\n\n_No response_",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "To me this seems like a distutils issue. We could probably work around it in Cython but personally I don't really think we should.",
            "created_at": "2023-04-15T07:26:55Z",
            "html_url": "https://github.com/cython/cython/issues/5380#issuecomment-1509609031",
            "id": 1509609031,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/5380",
            "node_id": "IC_kwDOABDGAc5Z-s5H",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/1509609031/reactions"
            },
            "updated_at": "2023-04-15T07:26:55Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/1509609031",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        },
        {
            "author_association": "NONE",
            "body": "I had a feeling that was going to be the response, but my guess is that from distutils point of view `parse_command_line` is only intended to be used by setuptools and won't be changed just to support the cython use case, but I will try opening an issue against distutils as well.\r\n",
            "created_at": "2023-04-15T12:52:03Z",
            "html_url": "https://github.com/cython/cython/issues/5380#issuecomment-1509793613",
            "id": 1509793613,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/5380",
            "node_id": "IC_kwDOABDGAc5Z_Z9N",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/1509793613/reactions"
            },
            "updated_at": "2023-04-15T12:52:03Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/1509793613",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4923501?v=4",
                "events_url": "https://api.github.com/users/mbway/events{/privacy}",
                "followers_url": "https://api.github.com/users/mbway/followers",
                "following_url": "https://api.github.com/users/mbway/following{/other_user}",
                "gists_url": "https://api.github.com/users/mbway/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mbway",
                "id": 4923501,
                "login": "mbway",
                "node_id": "MDQ6VXNlcjQ5MjM1MDE=",
                "organizations_url": "https://api.github.com/users/mbway/orgs",
                "received_events_url": "https://api.github.com/users/mbway/received_events",
                "repos_url": "https://api.github.com/users/mbway/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mbway/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mbway/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mbway"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Note that distutils is deprecated and will be removed from the stdlib eventually. I doubt that you'd benefit from a fix on that side. It's really replaced by setuptools these days.\n",
            "created_at": "2023-04-16T05:11:02Z",
            "html_url": "https://github.com/cython/cython/issues/5380#issuecomment-1510070249",
            "id": 1510070249,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/5380",
            "node_id": "IC_kwDOABDGAc5aAdfp",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/1510070249/reactions"
            },
            "updated_at": "2023-04-16T05:11:02Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/1510070249",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I could reproduce this on the master branch too (where I think that pyximport uses setuptools, although I'm not completely sure of this).",
            "created_at": "2023-04-16T06:16:45Z",
            "html_url": "https://github.com/cython/cython/issues/5380#issuecomment-1510103429",
            "id": 1510103429,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/5380",
            "node_id": "IC_kwDOABDGAc5aAlmF",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/1510103429/reactions"
            },
            "updated_at": "2023-04-16T06:16:45Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/1510103429",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        },
        {
            "author_association": "NONE",
            "body": "I could be completely wrong but I think the situation is that while distutils as a stand-alone thing is deprecated, a vendored copy/fork is maintained as part of setuptools which is where I opened the bug report (https://github.com/pypa/distutils which is routinely merged into https://github.com/pypa/setuptools/tree/main/setuptools/_distutils)\r\n",
            "created_at": "2023-04-16T21:48:31Z",
            "html_url": "https://github.com/cython/cython/issues/5380#issuecomment-1510497281",
            "id": 1510497281,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/5380",
            "node_id": "IC_kwDOABDGAc5aCFwB",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/1510497281/reactions"
            },
            "updated_at": "2023-04-16T21:49:24Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/1510497281",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4923501?v=4",
                "events_url": "https://api.github.com/users/mbway/events{/privacy}",
                "followers_url": "https://api.github.com/users/mbway/followers",
                "following_url": "https://api.github.com/users/mbway/following{/other_user}",
                "gists_url": "https://api.github.com/users/mbway/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mbway",
                "id": 4923501,
                "login": "mbway",
                "node_id": "MDQ6VXNlcjQ5MjM1MDE=",
                "organizations_url": "https://api.github.com/users/mbway/orgs",
                "received_events_url": "https://api.github.com/users/mbway/received_events",
                "repos_url": "https://api.github.com/users/mbway/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mbway/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mbway/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mbway"
            }
        },
        {
            "author_association": "NONE",
            "body": "I heard back from my issue on the distutils repo (https://github.com/pypa/distutils/issues/208). It looks like they don't want anyone using the distutils API packaged with setuptools (because distutils is an implementation detail of setuptools).\r\nI see there is an issue tracking moving cython away from relying on distutils (https://github.com/cython/cython/issues/4405) but there hasn't been any activity there for a while.\r\n\r\nThe comment also said `ensure there's a bug tracking the deprecation of distutils as an API and explore ways to support pyximport without importing distutils or Setuptools` so it looks like ideally they don't want setuptools to be used as a library either.",
            "created_at": "2023-07-02T12:48:11Z",
            "html_url": "https://github.com/cython/cython/issues/5380#issuecomment-1616638745",
            "id": 1616638745,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/5380",
            "node_id": "IC_kwDOABDGAc5gW_MZ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/1616638745/reactions"
            },
            "updated_at": "2023-07-02T12:48:11Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/1616638745",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4923501?v=4",
                "events_url": "https://api.github.com/users/mbway/events{/privacy}",
                "followers_url": "https://api.github.com/users/mbway/followers",
                "following_url": "https://api.github.com/users/mbway/following{/other_user}",
                "gists_url": "https://api.github.com/users/mbway/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mbway",
                "id": 4923501,
                "login": "mbway",
                "node_id": "MDQ6VXNlcjQ5MjM1MDE=",
                "organizations_url": "https://api.github.com/users/mbway/orgs",
                "received_events_url": "https://api.github.com/users/mbway/received_events",
                "repos_url": "https://api.github.com/users/mbway/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mbway/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mbway/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mbway"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Both `pximport` and `cythonize` are tightly coupled to distutils. It seems like it would be a major effort to refactor those to use another build system like CMake or meson.",
            "created_at": "2023-07-02T12:58:25Z",
            "html_url": "https://github.com/cython/cython/issues/5380#issuecomment-1616652673",
            "id": 1616652673,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/5380",
            "node_id": "IC_kwDOABDGAc5gXCmB",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/1616652673/reactions"
            },
            "updated_at": "2023-07-02T12:58:25Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/1616652673",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/823911?v=4",
                "events_url": "https://api.github.com/users/mattip/events{/privacy}",
                "followers_url": "https://api.github.com/users/mattip/followers",
                "following_url": "https://api.github.com/users/mattip/following{/other_user}",
                "gists_url": "https://api.github.com/users/mattip/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mattip",
                "id": 823911,
                "login": "mattip",
                "node_id": "MDQ6VXNlcjgyMzkxMQ==",
                "organizations_url": "https://api.github.com/users/mattip/orgs",
                "received_events_url": "https://api.github.com/users/mattip/received_events",
                "repos_url": "https://api.github.com/users/mattip/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mattip/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mattip/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mattip"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I suspect if we *had* to make a major effort to refactor we'd make cythonize work and just deprecate pyximport.",
            "created_at": "2023-07-02T13:05:01Z",
            "html_url": "https://github.com/cython/cython/issues/5380#issuecomment-1616654298",
            "id": 1616654298,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/5380",
            "node_id": "IC_kwDOABDGAc5gXC_a",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/1616654298/reactions"
            },
            "updated_at": "2023-07-02T13:05:01Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/1616654298",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        }
    ],
    "comments": 8,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/5380/comments",
    "created_at": "2023-04-14T17:10:54Z",
    "event_data": [],
    "events_url": "https://api.github.com/repos/cython/cython/issues/5380/events",
    "html_url": "https://github.com/cython/cython/issues/5380",
    "id": 1668628630,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/5380/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOABDGAc5jdUCW",
    "number": 5380,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/cython/cython/issues/5380/reactions"
    },
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "state_reason": null,
    "timeline_url": "https://api.github.com/repos/cython/cython/issues/5380/timeline",
    "title": "[BUG] pyximport affects logging level",
    "updated_at": "2023-07-02T13:05:01Z",
    "url": "https://api.github.com/repos/cython/cython/issues/5380",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/4923501?v=4",
        "events_url": "https://api.github.com/users/mbway/events{/privacy}",
        "followers_url": "https://api.github.com/users/mbway/followers",
        "following_url": "https://api.github.com/users/mbway/following{/other_user}",
        "gists_url": "https://api.github.com/users/mbway/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/mbway",
        "id": 4923501,
        "login": "mbway",
        "node_id": "MDQ6VXNlcjQ5MjM1MDE=",
        "organizations_url": "https://api.github.com/users/mbway/orgs",
        "received_events_url": "https://api.github.com/users/mbway/received_events",
        "repos_url": "https://api.github.com/users/mbway/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/mbway/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/mbway/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/mbway"
    }
}