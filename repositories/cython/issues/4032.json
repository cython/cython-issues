{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "# Description\r\nDefining a [`cdef class`](https://cython.readthedocs.io/en/latest/src/userguide/extension_types.html) with a [`__delitem__`](https://cython.readthedocs.io/en/latest/src/userguide/special_methods.html#sequences-and-mappings) method triggers [`-Wunused-variable`](https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-Wunused-variable).\r\n\r\n# To Reproduce\r\n\r\n`delitem_test.pyx`:\r\n```cython\r\ncdef class K:\r\n\tcdef list a\r\n\tdef __cinit__(self, list a):                   self.a = list(a)\r\n\tdef __getitem__(self, Py_ssize_t i):           return self.a[i]\r\n\tdef __setitem__(self, Py_ssize_t i, object v): self.a[i] = v\r\n\tdef __delitem__(self, Py_ssize_t i):           self.a[i] = None\r\n```\r\n\r\nCompilation:\r\n```console\r\n$ cython -3 delitem_test.pyx     \r\n$ clang -c delitem_test.c -Wunused-variable -I$(python3.7 -c'import sysconfig;print(sysconfig.get_path(\"include\"))')\r\ndelitem_test.c:2287:18: warning: unused variable 'o_type_name' [-Wunused-variable]\r\n  __Pyx_TypeName o_type_name;\r\n                 ^\r\n1 warning generated.\r\n$ gcc-10 -c delitem_test.c -Wunused-variable -I$(python3.7 -c'import sysconfig;print(sysconfig.get_path(\"include\"))')\r\ndelitem_test.c: In function '__pyx_mp_ass_subscript_12delitem_test_K':\r\ndelitem_test.c:2287:18: warning: unused variable 'o_type_name' [-Wunused-variable]\r\n 2287 |   __Pyx_TypeName o_type_name;\r\n      |                  ^~~~~~~~~~~\r\n```\r\n\r\n# Expected behavior\r\n\r\nThe problematic code in the generated `delitem_test.c` is this, starting on line 2286:\r\n\r\n```c\r\nstatic int __pyx_mp_ass_subscript_12delitem_test_K(PyObject *o, PyObject *i, PyObject *v) {\r\n  __Pyx_TypeName o_type_name;\r\n  if (v) {\r\n    return __pyx_pw_12delitem_test_1K_5__setitem__(o, i, v);\r\n  }\r\n  else {\r\n    return __pyx_pw_12delitem_test_1K_7__delitem__(o, i);\r\n  }\r\n}\r\n```\r\n\r\nSimply not generating the function's first line declaring `o_type_name` would resolve the warning.\r\n\r\n# Environment\r\n- **OS**: macOS 10.15\r\n- **Python**: CPython 3.7.10\r\n- **Cython**: 3.0a6\r\n- **clang**: 12.0.0\r\n- **GCC**: 10.2.0\r\n",
    "closed_at": "2021-03-11T21:12:05Z",
    "comment_data": [
        {
            "author_association": "COLLABORATOR",
            "body": "It looks like this is fixed somewhere between 3.0a6 and the current master. But I'm not sure exactly where. Thanks for reporting it though",
            "created_at": "2021-03-11T21:12:05Z",
            "html_url": "https://github.com/cython/cython/issues/4032#issuecomment-797051966",
            "id": 797051966,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/4032",
            "node_id": "MDEyOklzc3VlQ29tbWVudDc5NzA1MTk2Ng==",
            "performed_via_github_app": null,
            "updated_at": "2021-03-11T21:12:31Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/797051966",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        },
        {
            "author_association": "COLLABORATOR",
            "body": "(For what it's worth it was https://github.com/cython/cython/commit/206adb437d78333f2876da6ffd0dca7258b5ab11#diff-1c3b7395c96b4ecec571dc9f3fb5f1689faa4be6006abe7c3f01145f1010cf9c that fixed it)",
            "created_at": "2021-03-13T19:52:51Z",
            "html_url": "https://github.com/cython/cython/issues/4032#issuecomment-798775687",
            "id": 798775687,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/4032",
            "node_id": "MDEyOklzc3VlQ29tbWVudDc5ODc3NTY4Nw==",
            "performed_via_github_app": null,
            "updated_at": "2021-03-13T19:52:51Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/798775687",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/4032/comments",
    "created_at": "2021-03-11T20:59:40Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2021-03-11T21:12:05Z",
            "event": "closed",
            "id": 4447491553,
            "node_id": "MDExOkNsb3NlZEV2ZW50NDQ0NzQ5MTU1Mw==",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/4447491553"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/4032/events",
    "html_url": "https://github.com/cython/cython/issues/4032",
    "id": 829518959,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/4032/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU4Mjk1MTg5NTk=",
    "number": 4032,
    "performed_via_github_app": null,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "closed",
    "title": "[BUG] __delitem__ triggers -Wunused-variable",
    "updated_at": "2021-03-13T19:52:51Z",
    "url": "https://api.github.com/repos/cython/cython/issues/4032",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/1417749?v=4",
        "events_url": "https://api.github.com/users/wkschwartz/events{/privacy}",
        "followers_url": "https://api.github.com/users/wkschwartz/followers",
        "following_url": "https://api.github.com/users/wkschwartz/following{/other_user}",
        "gists_url": "https://api.github.com/users/wkschwartz/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/wkschwartz",
        "id": 1417749,
        "login": "wkschwartz",
        "node_id": "MDQ6VXNlcjE0MTc3NDk=",
        "organizations_url": "https://api.github.com/users/wkschwartz/orgs",
        "received_events_url": "https://api.github.com/users/wkschwartz/received_events",
        "repos_url": "https://api.github.com/users/wkschwartz/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/wkschwartz/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/wkschwartz/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/wkschwartz"
    }
}