{
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "I was trying to convert my Python object to a Cython object when I realized that the way Cython pickles extension types, using a tuple instead of a dict is incompatible.\r\nThere are 2 problems. The first is that I can't load pickled Python objects as Cython extension types that have the same attributes without a lot of fiddling and extra code. Second, if I change the list of cdef attributes of an extension type, old pickled instances can't load anymore.\r\nWould it be possible for Cython to automatically define a __setstate__ method that returns a dict, then for Cython to also define a __getstate__ method that takes that dictionary, iterates through it, sets as many values as it can, and leaves the rest untouched?",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "This sounds dangerous to do in general (especially because uninitialized\nattributes won't be attribute errors). Seems better to write a custom\nreduce method where you can do whatever you want.\n\nOn Thu, Aug 15, 2019, 6:14 PM Keithcat1 <notifications@github.com> wrote:\n\n> I was trying to convert my Python object to a Cython object when I\n> realized that the way Cython pickles extension types, using a tuple instead\n> of a dict is incompatible.\n> There are 2 problems. The first is that I can't load pickled Python\n> objects as Cython extension types that have the same attributes without a\n> lot of fiddling and extra code. Second, if I change the list of cdef\n> attributes of an extension type, old pickled instances can't load anymore.\n> Would it be possible for Cython to automatically define a *setstate*\n> method that returns a dict, then for Cython to also define a *getstate*\n> method that takes that dictionary, iterates through it, sets as many values\n> as it can, and leaves the rest untouched?\n>\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/cython/cython/issues/3079?email_source=notifications&email_token=AADWVAK473HLGA7Z3SDGBBLQEX5PRA5CNFSM4IMDDQZ2YY3PNVWWK3TUL52HS4DFUVEXG43VMWVGG33NNVSW45C7NFSM4HFRSUEA>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AADWVAPNWEHMCVWIMZDPFHDQEX5PRANCNFSM4IMDDQZQ>\n> .\n>\n",
            "created_at": "2019-08-22T04:46:16Z",
            "html_url": "https://github.com/cython/cython/issues/3079#issuecomment-523745906",
            "id": 523745906,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3079",
            "node_id": "MDEyOklzc3VlQ29tbWVudDUyMzc0NTkwNg==",
            "updated_at": "2019-08-22T04:46:16Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/523745906",
            "user": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/486017?v=4",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "node_id": "MDQ6VXNlcjQ4NjAxNw==",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/3079/comments",
    "created_at": "2019-08-16T01:14:30Z",
    "event_data": [],
    "events_url": "https://api.github.com/repos/cython/cython/issues/3079/events",
    "html_url": "https://github.com/cython/cython/issues/3079",
    "id": 481400072,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/3079/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU0ODE0MDAwNzI=",
    "number": 3079,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "title": "Problems with pickling and unpickling extension types",
    "updated_at": "2019-08-22T04:46:16Z",
    "url": "https://api.github.com/repos/cython/cython/issues/3079",
    "user": {
        "avatar_url": "https://avatars0.githubusercontent.com/u/47483928?v=4",
        "events_url": "https://api.github.com/users/Keithcat1/events{/privacy}",
        "followers_url": "https://api.github.com/users/Keithcat1/followers",
        "following_url": "https://api.github.com/users/Keithcat1/following{/other_user}",
        "gists_url": "https://api.github.com/users/Keithcat1/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/Keithcat1",
        "id": 47483928,
        "login": "Keithcat1",
        "node_id": "MDQ6VXNlcjQ3NDgzOTI4",
        "organizations_url": "https://api.github.com/users/Keithcat1/orgs",
        "received_events_url": "https://api.github.com/users/Keithcat1/received_events",
        "repos_url": "https://api.github.com/users/Keithcat1/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/Keithcat1/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Keithcat1/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/Keithcat1"
    }
}