{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Describe the bug\n\nWindows, Cython 0.29.32, and the content in `distutils.cfg`.\r\n\r\n```\r\n[build_ext]           \r\ndefine=MS_WIN64      \r\ncompiler=mingw32     \r\n```\r\n\r\nbut the `%%cython` magic use MSVC to compile the code, after add following settings to  `distutils.cfg`\r\n\r\n```\r\n[build]\r\ncompiler=mingw32     \r\n```\r\n\r\nit uses mingw32, but it output following error:\r\n\r\n```\r\n error: enumerator value for '__pyx_check_sizeof_voidp' is not an integer constant\r\n     enum { __pyx_check_sizeof_voidp = 1 / (int)(SIZEOF_VOID_P == sizeof(void*)) };\r\n```\r\n\r\nafter add argument to %%cython as following, it works.\r\n\r\n```\r\n%%cython -c=-DMS_WIN64\r\n```\r\n\r\nit seems that %%cython doesn't load settings from [build_ext] section.\n\n### Code to reproduce the behaviour:\n\nrun following code in Jupyter notebook,\r\n\r\n```python\r\nfrom Cython.Build.IpythonMagic import CythonMagics\r\ncm = CythonMagics(get_ipython())\r\nbe = cm._get_build_extension()\r\nprint(be.compiler, be.define)\r\n```\r\n\r\nthe output is None, None\n\n### Expected behaviour\n\nIf I use following code, get the command object by `dist.get_command_obj()`\r\n\r\n```python\r\nfrom distutils.core import Distribution\r\ndist = Distribution()\r\nconfig_files = dist.find_config_files()\r\ndist.parse_config_files(config_files)\r\nbe = dist.get_command_obj('build_ext')\r\nprint(be.compiler, be.define)\r\n```\r\n\r\nthe output is\r\n\r\n```\r\nmingw32 MS_WIN64\r\n```\n\n### Environment\n\nWindows 10\r\nCython 0.29.32\r\nPython 3.9.13\n\n### Additional context\n\n_No response_",
    "closed_at": null,
    "comment_data": [],
    "comments": 0,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/5003/comments",
    "created_at": "2022-09-02T06:49:38Z",
    "event_data": [],
    "events_url": "https://api.github.com/repos/cython/cython/issues/5003/events",
    "html_url": "https://github.com/cython/cython/issues/5003",
    "id": 1359778149,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/5003/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOABDGAc5RDJFl",
    "number": 5003,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/cython/cython/issues/5003/reactions"
    },
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "state_reason": null,
    "timeline_url": "https://api.github.com/repos/cython/cython/issues/5003/timeline",
    "title": "[BUG] %%cython magic doesn't load settings in distutils.cfg correctlly",
    "updated_at": "2022-09-02T06:49:38Z",
    "url": "https://api.github.com/repos/cython/cython/issues/5003",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/826871?v=4",
        "events_url": "https://api.github.com/users/ruoyu0088/events{/privacy}",
        "followers_url": "https://api.github.com/users/ruoyu0088/followers",
        "following_url": "https://api.github.com/users/ruoyu0088/following{/other_user}",
        "gists_url": "https://api.github.com/users/ruoyu0088/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/ruoyu0088",
        "id": 826871,
        "login": "ruoyu0088",
        "node_id": "MDQ6VXNlcjgyNjg3MQ==",
        "organizations_url": "https://api.github.com/users/ruoyu0088/orgs",
        "received_events_url": "https://api.github.com/users/ruoyu0088/received_events",
        "repos_url": "https://api.github.com/users/ruoyu0088/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/ruoyu0088/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/ruoyu0088/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/ruoyu0088"
    }
}