{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Is your feature request related to a problem? Please describe.\n\nFrom my understanding of this code https://github.com/cython/cython/blob/master/Cython/Build/Dependencies.py#L1099-L1115 file modifications are based on timestamps of the file. However, I don't think this is optimal, since it is very possible that a file has been touched accidentally, or (in my use case) I switch branches that causes the file timestamps to change, even though the content has not.\n\n### Describe the solution you'd like.\n\nA better solution is to compare file hashes instead. I hope I am not too \"naive\", but I imagine that it is possible to put a comment that looks like\r\n```\r\n// a.pyx MD5 hash: 0123456789abcdef\r\n...\r\n```\r\nat the top of the auto-generated `a.c` file, and something similar embedded into the compiled share binary (I am sure someone will come up with a trick). Then instead of comparing timestamps, the file hash can be compared when available.\n\n### Describe alternatives you've considered.\n\n_No response_\n\n### Additional context\n\n_No response_",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "Any idea on where or how to embed this hash metadata into the built shared library? Or should it be put inside the build directory as e.g. just a text file?",
            "created_at": "2024-02-23T17:39:43Z",
            "html_url": "https://github.com/cython/cython/issues/6015#issuecomment-1961735134",
            "id": 1961735134,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/6015",
            "node_id": "IC_kwDOABDGAc507bPe",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/1961735134/reactions"
            },
            "updated_at": "2024-02-23T17:39:43Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/1961735134",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/83517584?v=4",
                "events_url": "https://api.github.com/users/grhkm21/events{/privacy}",
                "followers_url": "https://api.github.com/users/grhkm21/followers",
                "following_url": "https://api.github.com/users/grhkm21/following{/other_user}",
                "gists_url": "https://api.github.com/users/grhkm21/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/grhkm21",
                "id": 83517584,
                "login": "grhkm21",
                "node_id": "MDQ6VXNlcjgzNTE3NTg0",
                "organizations_url": "https://api.github.com/users/grhkm21/orgs",
                "received_events_url": "https://api.github.com/users/grhkm21/received_events",
                "repos_url": "https://api.github.com/users/grhkm21/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/grhkm21/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/grhkm21/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/grhkm21"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I don't think it needs to be part of the shared library. Both the .c file and the .so file are generated, so we can continue to compare their time stamps. It seems reasonable to add hashes of all source files to the metadata at the beginning of the generated .c file, though. Note that this would probably include all pyx, pxi and pxd files that contribute to the generation. That can be a whole bunch of files, so we might want to make this optional.\n",
            "created_at": "2024-02-24T06:55:14Z",
            "html_url": "https://github.com/cython/cython/issues/6015#issuecomment-1962279263",
            "id": 1962279263,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/6015",
            "node_id": "IC_kwDOABDGAc509gFf",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/1962279263/reactions"
            },
            "updated_at": "2024-02-24T06:55:14Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/1962279263",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "NONE",
            "body": "I will poke around and figure out how the dependencies are figured out, thanks :)",
            "created_at": "2024-02-24T13:19:04Z",
            "html_url": "https://github.com/cython/cython/issues/6015#issuecomment-1962362446",
            "id": 1962362446,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/6015",
            "node_id": "IC_kwDOABDGAc5090ZO",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/1962362446/reactions"
            },
            "updated_at": "2024-02-24T13:19:04Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/1962362446",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/83517584?v=4",
                "events_url": "https://api.github.com/users/grhkm21/events{/privacy}",
                "followers_url": "https://api.github.com/users/grhkm21/followers",
                "following_url": "https://api.github.com/users/grhkm21/following{/other_user}",
                "gists_url": "https://api.github.com/users/grhkm21/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/grhkm21",
                "id": 83517584,
                "login": "grhkm21",
                "node_id": "MDQ6VXNlcjgzNTE3NTg0",
                "organizations_url": "https://api.github.com/users/grhkm21/orgs",
                "received_events_url": "https://api.github.com/users/grhkm21/received_events",
                "repos_url": "https://api.github.com/users/grhkm21/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/grhkm21/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/grhkm21/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/grhkm21"
            }
        }
    ],
    "comments": 3,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/6015/comments",
    "created_at": "2024-02-21T16:44:27Z",
    "event_data": [],
    "events_url": "https://api.github.com/repos/cython/cython/issues/6015/events",
    "html_url": "https://github.com/cython/cython/issues/6015",
    "id": 2147221131,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/6015/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOABDGAc5_-_6L",
    "number": 6015,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 1,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 1,
        "url": "https://api.github.com/repos/cython/cython/issues/6015/reactions"
    },
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "state_reason": null,
    "timeline_url": "https://api.github.com/repos/cython/cython/issues/6015/timeline",
    "title": "[ENH] Recompile based on file hash, not timestamp",
    "updated_at": "2024-02-24T13:19:05Z",
    "url": "https://api.github.com/repos/cython/cython/issues/6015",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/83517584?v=4",
        "events_url": "https://api.github.com/users/grhkm21/events{/privacy}",
        "followers_url": "https://api.github.com/users/grhkm21/followers",
        "following_url": "https://api.github.com/users/grhkm21/following{/other_user}",
        "gists_url": "https://api.github.com/users/grhkm21/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/grhkm21",
        "id": 83517584,
        "login": "grhkm21",
        "node_id": "MDQ6VXNlcjgzNTE3NTg0",
        "organizations_url": "https://api.github.com/users/grhkm21/orgs",
        "received_events_url": "https://api.github.com/users/grhkm21/received_events",
        "repos_url": "https://api.github.com/users/grhkm21/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/grhkm21/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/grhkm21/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/grhkm21"
    }
}