{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "**Describe the bug**\r\nCalling the built-in `len` function on a compile-time defined (with `DEF`) string inside a `nogil` function is not allowed.\r\n\r\n**To Reproduce**\r\nCode to reproduce the behaviour:\r\n```cython\r\nDEF MYSTRING = b\"MY_STRING\"\r\ncdef int mystringlen() nogil:\r\n  return len(MYSTRING) # Calling gil-requiring function not allowed without gil\r\n```\r\n\r\n**Expected behavior**\r\nIt should resolve at compile-time to the length of the string, just like the way it does on functions with GIL, because it does not require the GIL to do so.\r\n\r\n**Environment**\r\n - OS: Linux\r\n - Python version 3.8.0\r\n - Cython version 0.29.22\r\n\r\n**Additional context**\r\nThere is a way to bypass this issue, by declaring another variable holding the string size, but it's too cumbersome. See the previous example solved by this method below:\r\n```cython\r\nDEF MYSTRING = b\"MY_STRING\"\r\nDEF MYSTRING_LEN = len(MYSTRING)\r\ncdef int mystringlen() nogil:\r\n  return MYSTRING_LEN\r\n```\r\n",
    "closed_at": null,
    "comment_data": [],
    "comments": 0,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/4093/comments",
    "created_at": "2021-04-05T12:23:19Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9125226?v=4",
                "events_url": "https://api.github.com/users/guidanoli/events{/privacy}",
                "followers_url": "https://api.github.com/users/guidanoli/followers",
                "following_url": "https://api.github.com/users/guidanoli/following{/other_user}",
                "gists_url": "https://api.github.com/users/guidanoli/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/guidanoli",
                "id": 9125226,
                "login": "guidanoli",
                "node_id": "MDQ6VXNlcjkxMjUyMjY=",
                "organizations_url": "https://api.github.com/users/guidanoli/orgs",
                "received_events_url": "https://api.github.com/users/guidanoli/received_events",
                "repos_url": "https://api.github.com/users/guidanoli/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/guidanoli/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/guidanoli/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/guidanoli"
            },
            "commit_id": "1f36c0f05f803a3eee06b316c599d84c7625f372",
            "commit_url": "https://api.github.com/repos/guidanoli/lupa/commits/1f36c0f05f803a3eee06b316c599d84c7625f372",
            "created_at": "2021-04-05T12:39:14Z",
            "event": "referenced",
            "id": 4551456105,
            "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ1NTE0NTYxMDU=",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/4551456105"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/4093/events",
    "html_url": "https://github.com/cython/cython/issues/4093",
    "id": 850331129,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/4093/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU4NTAzMzExMjk=",
    "number": 4093,
    "performed_via_github_app": null,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "title": "[BUG] len on compile-time defined string inside nogil function not allowed",
    "updated_at": "2021-04-05T12:25:12Z",
    "url": "https://api.github.com/repos/cython/cython/issues/4093",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/9125226?v=4",
        "events_url": "https://api.github.com/users/guidanoli/events{/privacy}",
        "followers_url": "https://api.github.com/users/guidanoli/followers",
        "following_url": "https://api.github.com/users/guidanoli/following{/other_user}",
        "gists_url": "https://api.github.com/users/guidanoli/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/guidanoli",
        "id": 9125226,
        "login": "guidanoli",
        "node_id": "MDQ6VXNlcjkxMjUyMjY=",
        "organizations_url": "https://api.github.com/users/guidanoli/orgs",
        "received_events_url": "https://api.github.com/users/guidanoli/received_events",
        "repos_url": "https://api.github.com/users/guidanoli/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/guidanoli/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/guidanoli/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/guidanoli"
    }
}