{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "cython is pretty good about avoiding unnecessary compilations, but that doesn't play nicely with git worktree or asv\r\n\r\nTwo ways this could work:\r\n\r\n1) An explicit cache that sits next to the \"real\" .git repo\r\n\r\n2) If in a worktree directory, scan other directories in the worktree to see if we can re-use already-cythonized results from there.\r\n\r\nI'm not sure how to make version 2 work with asv.",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "I'm not sure I understand your problem description. Could you update it with some details? Are you suggesting that there is a problem with checking out different branches or something like that? What does `asv` refer to here? A link would help.",
            "created_at": "2020-09-15T14:27:48Z",
            "html_url": "https://github.com/cython/cython/issues/3826#issuecomment-692752096",
            "id": 692752096,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3826",
            "node_id": "MDEyOklzc3VlQ29tbWVudDY5Mjc1MjA5Ng==",
            "performed_via_github_app": null,
            "updated_at": "2020-09-15T14:27:48Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/692752096",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> I'm not sure I understand your problem description. Could you update it with some details? Are you suggesting that there is a problem with checking out different branches or something like that?\r\n\r\nRefresher on git worktree:\r\n\r\n~/Desktop/pd/ is where I keep all my pandas branches\r\npd/pandas/ has master checked out\r\npd/pandas/.git is the _actual_ repo\r\n\r\n`git worktree add ../foo foo` creates a `foo` branch and checks it out in pd/foo/, and the pd/foo/.git file is a single-line file telling git where to find the actual repo directory.\r\n\r\nIf I were to just check out a new branch directly inside the pd/pandas/ directory, the cythonized .c files would still be there, so would not need to be re-cythonized.  But when a new branch is instantiated in a worktree directory, the .pyx files need to be cythonized from scratch, which is what I'd like to avoid.\r\n\r\n> What does asv refer to here? A link would help.\r\n\r\nhttps://github.com/airspeed-velocity/asv\r\n\r\nA benchmarking tool.  The relevant behavior is that it will also check out existing branches in fresh directories and build from scratch, which can be a real pain point.",
            "created_at": "2020-09-15T14:52:51Z",
            "html_url": "https://github.com/cython/cython/issues/3826#issuecomment-692768946",
            "id": 692768946,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3826",
            "node_id": "MDEyOklzc3VlQ29tbWVudDY5Mjc2ODk0Ng==",
            "performed_via_github_app": null,
            "updated_at": "2020-09-15T14:52:51Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/692768946",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/8078968?v=4",
                "events_url": "https://api.github.com/users/jbrockmendel/events{/privacy}",
                "followers_url": "https://api.github.com/users/jbrockmendel/followers",
                "following_url": "https://api.github.com/users/jbrockmendel/following{/other_user}",
                "gists_url": "https://api.github.com/users/jbrockmendel/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jbrockmendel",
                "id": 8078968,
                "login": "jbrockmendel",
                "node_id": "MDQ6VXNlcjgwNzg5Njg=",
                "organizations_url": "https://api.github.com/users/jbrockmendel/orgs",
                "received_events_url": "https://api.github.com/users/jbrockmendel/received_events",
                "repos_url": "https://api.github.com/users/jbrockmendel/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jbrockmendel/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jbrockmendel/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jbrockmendel"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/3826/comments",
    "created_at": "2020-09-14T00:02:46Z",
    "event_data": [],
    "events_url": "https://api.github.com/repos/cython/cython/issues/3826/events",
    "html_url": "https://github.com/cython/cython/issues/3826",
    "id": 700675149,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/3826/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU3MDA2NzUxNDk=",
    "number": 3826,
    "performed_via_github_app": null,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "title": "ENH: build cache that plays nicely with git worktree/asv",
    "updated_at": "2020-09-15T14:52:51Z",
    "url": "https://api.github.com/repos/cython/cython/issues/3826",
    "user": {
        "avatar_url": "https://avatars1.githubusercontent.com/u/8078968?v=4",
        "events_url": "https://api.github.com/users/jbrockmendel/events{/privacy}",
        "followers_url": "https://api.github.com/users/jbrockmendel/followers",
        "following_url": "https://api.github.com/users/jbrockmendel/following{/other_user}",
        "gists_url": "https://api.github.com/users/jbrockmendel/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/jbrockmendel",
        "id": 8078968,
        "login": "jbrockmendel",
        "node_id": "MDQ6VXNlcjgwNzg5Njg=",
        "organizations_url": "https://api.github.com/users/jbrockmendel/orgs",
        "received_events_url": "https://api.github.com/users/jbrockmendel/received_events",
        "repos_url": "https://api.github.com/users/jbrockmendel/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/jbrockmendel/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jbrockmendel/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/jbrockmendel"
    }
}