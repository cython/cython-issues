{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Describe the bug\n\nThe type value of attributes from `fields` in `dataclasses` shows the `type` as a string representation.\n\n### Code to reproduce the behaviour:\n\nFor the following piece of code of a simple dataclass:\r\n\r\n```\r\nfrom dataclasses import dataclass, field, fields\r\n\r\n@dataclass\r\nclass Test():\r\n\r\n    _id: ObjectId = field(init=False)\r\n\r\n    def __post_init__(self):\r\n        self._id = ObjectId()\r\n\r\ntt = Test()\r\nfields(tt)\r\n\r\n```\r\n\r\nRunning it on python directly would give the following object:\r\n\r\n> (Field(name='_id',type=<class 'bson.objectid.ObjectId'>,default=<dataclasses._MISSING_TYPE object at 0x7ff1d30f6760>,default_factory=<dataclasses._MISSING_TYPE object at 0x7ff1d30f6760>,init=False,repr=True,hash=None,compare=True,metadata=mappingproxy({}),_field_type=_FIELD),)\r\n\r\nHowever, if I ran the following code compiled with cython 3.0.0a11, I get:\r\n\r\n> (Field(name='_id',type='ObjectId',default=<dataclasses._MISSING_TYPE object at 0x7f80335335b0>,default_factory=<dataclasses._MISSING_TYPE object at 0x7f80335335b0>,init=False,repr=True,hash=None,compare=True,metadata=mappingproxy({}),_field_type=_FIELD),)\r\n\r\nWhere _id type is a string value, hence no type comparisions can be made.\n\n### Expected behaviour\n\nThe field type should contain the real type of the attribute\n\n### Environment\n\nOS: Linux\r\nPython version 3.9\r\nCython version 3.0.0a11\r\n\n\n### Additional context\n\n_No response_",
    "closed_at": "2022-09-07T16:59:51Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "This is by design: https://github.com/cython/cython/issues/2863 - Cython has chosen to follow the PEP-563 behaviour where annotations are converted to strings (you can get this behaviour in pure Python with `from __future__ import annotations`).\r\n\r\nThat may end up changing - at the time we implemented this it looked like this'd be the future behaviour of Python. Now it looks like it probably won't be, but it no decision has been taken on what will be. When something is decided we will likely follow.",
            "created_at": "2022-09-07T16:59:51Z",
            "html_url": "https://github.com/cython/cython/issues/5010#issuecomment-1239651878",
            "id": 1239651878,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/5010",
            "node_id": "IC_kwDOABDGAc5J45Ym",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 1,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/1239651878/reactions"
            },
            "updated_at": "2022-09-07T16:59:51Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/1239651878",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I do have a draft \"mostly working\" PR to revert to the old behaviour https://github.com/cython/cython/pull/4463. Currently I don't think we're planning to merge this, but I'm keeping the PR mostly up-to-date in case we do want to change it.\r\n\r\nYou're welcome to check out that PR and try to use it if it helps solve a particular problem, but obviously it's unsupported.",
            "created_at": "2022-09-07T17:02:22Z",
            "html_url": "https://github.com/cython/cython/issues/5010#issuecomment-1239654340",
            "id": 1239654340,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/5010",
            "node_id": "IC_kwDOABDGAc5J45_E",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/1239654340/reactions"
            },
            "updated_at": "2022-09-07T17:02:22Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/1239654340",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/5010/comments",
    "created_at": "2022-09-07T10:37:59Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2022-09-07T16:59:52Z",
            "event": "closed",
            "id": 7340727445,
            "node_id": "CE_lADOABDGAc5RU_TMzwAAAAG1ipyV",
            "performed_via_github_app": null,
            "state_reason": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/7340727445"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2022-09-07T17:00:16Z",
            "event": "labeled",
            "id": 7340730131,
            "label": {
                "color": "444444",
                "name": "R: worksforme"
            },
            "node_id": "LE_lADOABDGAc5RU_TMzwAAAAG1iqcT",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/7340730131"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/5010/events",
    "html_url": "https://github.com/cython/cython/issues/5010",
    "id": 1364456652,
    "labels": [
        {
            "color": "444444",
            "default": false,
            "description": null,
            "id": 425556354,
            "name": "R: worksforme",
            "node_id": "MDU6TGFiZWw0MjU1NTYzNTQ=",
            "url": "https://api.github.com/repos/cython/cython/labels/R:%20worksforme"
        }
    ],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/5010/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOABDGAc5RU_TM",
    "number": 5010,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 1,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 1,
        "url": "https://api.github.com/repos/cython/cython/issues/5010/reactions"
    },
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/cython/cython/issues/5010/timeline",
    "title": "[BUG] dataclass fields type shown as string",
    "updated_at": "2022-09-07T17:02:23Z",
    "url": "https://api.github.com/repos/cython/cython/issues/5010",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/5396803?v=4",
        "events_url": "https://api.github.com/users/nisalup/events{/privacy}",
        "followers_url": "https://api.github.com/users/nisalup/followers",
        "following_url": "https://api.github.com/users/nisalup/following{/other_user}",
        "gists_url": "https://api.github.com/users/nisalup/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/nisalup",
        "id": 5396803,
        "login": "nisalup",
        "node_id": "MDQ6VXNlcjUzOTY4MDM=",
        "organizations_url": "https://api.github.com/users/nisalup/orgs",
        "received_events_url": "https://api.github.com/users/nisalup/received_events",
        "repos_url": "https://api.github.com/users/nisalup/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/nisalup/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/nisalup/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/nisalup"
    }
}