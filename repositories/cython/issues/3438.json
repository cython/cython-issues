{
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "Hi,\r\n\r\nFor example, if I have a pure Python function like this in a python module:\r\n```python\r\ndef foo(bar: int) -> str: pass\r\n```\r\nthen both `help` and Sphinx autodoc got the signature correctly.\r\n\r\nHowever, if the same thing is compiled by Cython then autodoc fails to see any signature at all (the function is then documented as just `foo`), if `binding=True` (and `embedsignature=False`) is set.  `help` output is quite normal though (`foo(bar: 'int') -> 'str'`), although it would be nicer if the single quotes are not there.\r\n\r\nReversed compiler flags' behavior as documented in GH-3150 has consistent output for both.",
    "closed_at": "2020-03-22T15:13:02Z",
    "comment_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "I'm pretty sure the single quotes are from https://github.com/cython/cython/pull/3285 / https://www.python.org/dev/peps/pep-0563/. This is the future behaviour of Python so probably not going away. Try running your example in Python 3.7+ with from `__future__ import annotations` and you'll see the same quotes",
            "created_at": "2020-03-16T17:49:11Z",
            "html_url": "https://github.com/cython/cython/issues/3438#issuecomment-599675577",
            "id": 599675577,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3438",
            "node_id": "MDEyOklzc3VlQ29tbWVudDU5OTY3NTU3Nw==",
            "updated_at": "2020-03-16T17:50:06Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/599675577",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Thanks, I figured that earlier, but `foo(bar: int) -> str` would be much more readable.  That being said, the output of `help` is out of scope from Cython perspective.  I'll try to ask on Python IRC and report back about this just in case someone stumble upon this issue about the same thing.\r\n\r\nDo you have any idea about the real issue though?  Need I provide more material to reproduce?  Should I cross-post in Sphinx as well (to investigate what autodoc would look for but cannot find)?",
            "created_at": "2020-03-17T03:26:33Z",
            "html_url": "https://github.com/cython/cython/issues/3438#issuecomment-599858978",
            "id": 599858978,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3438",
            "node_id": "MDEyOklzc3VlQ29tbWVudDU5OTg1ODk3OA==",
            "updated_at": "2020-03-17T03:26:33Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/599858978",
            "user": {
                "avatar_url": "https://avatars2.githubusercontent.com/u/13689192?v=4",
                "events_url": "https://api.github.com/users/McSinyx/events{/privacy}",
                "followers_url": "https://api.github.com/users/McSinyx/followers",
                "following_url": "https://api.github.com/users/McSinyx/following{/other_user}",
                "gists_url": "https://api.github.com/users/McSinyx/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/McSinyx",
                "id": 13689192,
                "login": "McSinyx",
                "node_id": "MDQ6VXNlcjEzNjg5MTky",
                "organizations_url": "https://api.github.com/users/McSinyx/orgs",
                "received_events_url": "https://api.github.com/users/McSinyx/received_events",
                "repos_url": "https://api.github.com/users/McSinyx/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/McSinyx/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/McSinyx/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/McSinyx"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I don't know for sure but: the sphinx autodoc website implies that it bases its work off the docstring. `help` is generating the what it displays from `__annotations__` etc, not the docstring. If you check `foo.__doc__` you'll see the signature isn't in there.\r\n\r\nI think (but not certain) this is expected behaviour.",
            "created_at": "2020-03-17T07:54:55Z",
            "html_url": "https://github.com/cython/cython/issues/3438#issuecomment-599927696",
            "id": 599927696,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3438",
            "node_id": "MDEyOklzc3VlQ29tbWVudDU5OTkyNzY5Ng==",
            "updated_at": "2020-03-17T07:54:55Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/599927696",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I'm not sure about the inner implementation, at this point I guess he have to ask them, but it works for pure Python module (not compiled via Cython) so they also get the signature from elsewhere (inspect maybe?).",
            "created_at": "2020-03-17T08:27:28Z",
            "html_url": "https://github.com/cython/cython/issues/3438#issuecomment-599941265",
            "id": 599941265,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3438",
            "node_id": "MDEyOklzc3VlQ29tbWVudDU5OTk0MTI2NQ==",
            "updated_at": "2020-03-17T08:27:28Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/599941265",
            "user": {
                "avatar_url": "https://avatars2.githubusercontent.com/u/13689192?v=4",
                "events_url": "https://api.github.com/users/McSinyx/events{/privacy}",
                "followers_url": "https://api.github.com/users/McSinyx/followers",
                "following_url": "https://api.github.com/users/McSinyx/following{/other_user}",
                "gists_url": "https://api.github.com/users/McSinyx/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/McSinyx",
                "id": 13689192,
                "login": "McSinyx",
                "node_id": "MDQ6VXNlcjEzNjg5MTky",
                "organizations_url": "https://api.github.com/users/McSinyx/orgs",
                "received_events_url": "https://api.github.com/users/McSinyx/received_events",
                "repos_url": "https://api.github.com/users/McSinyx/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/McSinyx/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/McSinyx/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/McSinyx"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Ah - fair point. Don't know then.",
            "created_at": "2020-03-17T08:30:01Z",
            "html_url": "https://github.com/cython/cython/issues/3438#issuecomment-599942276",
            "id": 599942276,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3438",
            "node_id": "MDEyOklzc3VlQ29tbWVudDU5OTk0MjI3Ng==",
            "updated_at": "2020-03-17T08:30:01Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/599942276",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I'm closing this now as it is fixed by sphinx-doc/sphinx#7355.  BTW the quotes for signature in `help` is filed in [bpo-39990](https://bugs.python.org/issue39990).",
            "created_at": "2020-03-22T15:13:02Z",
            "html_url": "https://github.com/cython/cython/issues/3438#issuecomment-602223445",
            "id": 602223445,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3438",
            "node_id": "MDEyOklzc3VlQ29tbWVudDYwMjIyMzQ0NQ==",
            "updated_at": "2020-03-22T15:13:02Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/602223445",
            "user": {
                "avatar_url": "https://avatars2.githubusercontent.com/u/13689192?v=4",
                "events_url": "https://api.github.com/users/McSinyx/events{/privacy}",
                "followers_url": "https://api.github.com/users/McSinyx/followers",
                "following_url": "https://api.github.com/users/McSinyx/following{/other_user}",
                "gists_url": "https://api.github.com/users/McSinyx/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/McSinyx",
                "id": 13689192,
                "login": "McSinyx",
                "node_id": "MDQ6VXNlcjEzNjg5MTky",
                "organizations_url": "https://api.github.com/users/McSinyx/orgs",
                "received_events_url": "https://api.github.com/users/McSinyx/received_events",
                "repos_url": "https://api.github.com/users/McSinyx/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/McSinyx/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/McSinyx/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/McSinyx"
            }
        }
    ],
    "comments": 6,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/3438/comments",
    "created_at": "2020-03-16T15:09:35Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars2.githubusercontent.com/u/13689192?v=4",
                "events_url": "https://api.github.com/users/McSinyx/events{/privacy}",
                "followers_url": "https://api.github.com/users/McSinyx/followers",
                "following_url": "https://api.github.com/users/McSinyx/following{/other_user}",
                "gists_url": "https://api.github.com/users/McSinyx/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/McSinyx",
                "id": 13689192,
                "login": "McSinyx",
                "node_id": "MDQ6VXNlcjEzNjg5MTky",
                "organizations_url": "https://api.github.com/users/McSinyx/orgs",
                "received_events_url": "https://api.github.com/users/McSinyx/received_events",
                "repos_url": "https://api.github.com/users/McSinyx/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/McSinyx/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/McSinyx/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/McSinyx"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2020-03-22T15:13:02Z",
            "event": "closed",
            "id": 3152759071,
            "node_id": "MDExOkNsb3NlZEV2ZW50MzE1Mjc1OTA3MQ==",
            "url": "https://api.github.com/repos/cython/cython/issues/events/3152759071"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/3438/events",
    "html_url": "https://github.com/cython/cython/issues/3438",
    "id": 582373335,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/3438/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU1ODIzNzMzMzU=",
    "number": 3438,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "closed",
    "title": "Sphinx autodoc can't see signatures generated with binding=True",
    "updated_at": "2020-03-22T15:13:02Z",
    "url": "https://api.github.com/repos/cython/cython/issues/3438",
    "user": {
        "avatar_url": "https://avatars2.githubusercontent.com/u/13689192?v=4",
        "events_url": "https://api.github.com/users/McSinyx/events{/privacy}",
        "followers_url": "https://api.github.com/users/McSinyx/followers",
        "following_url": "https://api.github.com/users/McSinyx/following{/other_user}",
        "gists_url": "https://api.github.com/users/McSinyx/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/McSinyx",
        "id": 13689192,
        "login": "McSinyx",
        "node_id": "MDQ6VXNlcjEzNjg5MTky",
        "organizations_url": "https://api.github.com/users/McSinyx/orgs",
        "received_events_url": "https://api.github.com/users/McSinyx/received_events",
        "repos_url": "https://api.github.com/users/McSinyx/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/McSinyx/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/McSinyx/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/McSinyx"
    }
}