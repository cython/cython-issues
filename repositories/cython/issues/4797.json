{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "<!--\r\n**Note:**\r\n- DO NOT use the bug and feature tracker for general questions and support requests.\r\n  Use the `cython-users` mailing list instead.\r\n  It has a wider audience, so you get more and better answers.\r\n- Did you search for similar issues already?\r\n  Please do, it helps to save us precious time that we otherwise could not invest into development.\r\n- Did you try the latest master branch or pre-release?\r\n  It might already have what you want to report.\r\n  Also see the [Changelog](https://github.com/cython/cython/blob/master/CHANGES.rst) regarding recent changes.\r\n-->\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\n\r\nI am trying to build a pyarmor-protected file.\r\n\r\nIn my `setup.py`, I would like to  pass the arguments ` -3 --lenient --keep-going ` to the cythonize() call.\r\n\r\nSo far my file looks like this:\r\n\r\n```cython\r\n# setup.py\r\ntry:\r\n    from setuptools import setup\r\n    from setuptools.extension import Extension\r\nexcept ImportError:\r\n    from distutils.core import setup\r\n    from distutils.extension import Extension\r\n\r\nimport os\r\nfrom Cython.Build import cythonize\r\nfrom os.path import abspath\r\n\r\nlibImport = abspath(\"../some/libs\")\r\npyImport = abspath(\"../some/include\")\r\n\r\ncflags = '-3 --lenient --keep-going'\r\n\r\next_modules = [\r\n    Extension(\r\n        \"pytransform\",\r\n        sources=[ \"src/dist/obf/pytransform.py\" ],\r\n        extra_compile_args=cflags\r\n    ),\r\n    Extension(\r\n        \"Calculate\",\r\n        sources=[ \"src/dist/obf/calculate.py\" ],\r\n        extra_compile_args=cflags\r\n    )\r\n]\r\n\r\nsetup(\r\n    name=\"Calculate\",\r\n    description= 'Calculate',\r\n    author= 'Test',\r\n    author_email= 'admin@test-net,\r\n    install_requires= ['cython'],\r\n    packages= ['calculate'], \r\n    ext_modules= cythonize(ext_modules),\r\n    include_dirs= [libImport, pyImport],\r\n)\r\n```\r\n\r\nbut the \"cflags\" arguments **dont** get recognized?\r\n\r\nI end up with the error: \r\n```dist\\calculate.py:4:0: undeclared name not builtin: __pyarmor__```\r\n\r\n**Describe the solution you'd like**\r\n\r\nAdd documentation on how to properly pass in arguments from code.\r\n\r\nThe existing page does not say anything about it: http://docs.cython.org/en/latest/src/quickstart/build.html\r\n\r\n\r\n**Describe alternatives you've considered**\r\n\r\nThis works:\r\n```cythonize -3 -k --lenient .\\dist\\calculate.py```\r\n\r\nBut manually building from the command-line is annoying if you have a lot of files.\r\n\r\n\r\n",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "There's a bit more detail in the [user-guide section of the docs](https://cython.readthedocs.io/en/latest/src/userguide/source_files_and_compilation.html), although admittedly I don't think it covers this ~very well~ at all. Improvements are welcome.\r\n\r\n`--linient` enables `Options.error_on_unknown_names = False` and `Options.error_on_uninitialized = False` so you'd be best advised to set it that way.\r\n\r\n`-3` is equivalent to defaulting to the `language_level` compiler directive to 3. Personally I'd set it with `#cython: language_level = 3` in the source file, since the correct setting is defined by the source file.\r\n\r\nI'm not sure about `-k` - my personal view is that it's rarely useful but that shouldn't stop you from using it if you want",
            "created_at": "2022-05-19T18:12:08Z",
            "html_url": "https://github.com/cython/cython/issues/4797#issuecomment-1132029694",
            "id": 1132029694,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/4797",
            "node_id": "IC_kwDOABDGAc5DeWb-",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/1132029694/reactions"
            },
            "updated_at": "2022-05-19T18:12:27Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/1132029694",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "`-k` stems from the time when I tried to compile CPython's standard library with Cython, and it would fail to compile several of the modules (sometimes even because of bugs in those modules, funny enough). That has become less of an issue these days, so yes, `-k` probably isn't very useful any more.",
            "created_at": "2022-05-19T21:34:14Z",
            "html_url": "https://github.com/cython/cython/issues/4797#issuecomment-1132227416",
            "id": 1132227416,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/4797",
            "node_id": "IC_kwDOABDGAc5DfGtY",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/1132227416/reactions"
            },
            "updated_at": "2022-05-19T21:34:33Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/1132227416",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Note that `cflags` (i.e. `extra_compile_args`) are really C flags, i.e. options for the C compiler and not for Cython.\r\n\r\nYou can look at [Cython's command line parser](https://github.com/cython/cython/blob/master/Cython/Compiler/CmdLine.py) to see what each of the Cython options does and how to mimic it programmatically.",
            "created_at": "2022-05-19T21:37:31Z",
            "html_url": "https://github.com/cython/cython/issues/4797#issuecomment-1132230907",
            "id": 1132230907,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/4797",
            "node_id": "IC_kwDOABDGAc5DfHj7",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/1132230907/reactions"
            },
            "updated_at": "2022-05-19T21:38:26Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/1132230907",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Actually, linking to the command line parser from the docs is probably a fair way to document the programmatic options in relation to the command line arguments.",
            "created_at": "2022-05-19T21:39:55Z",
            "html_url": "https://github.com/cython/cython/issues/4797#issuecomment-1132232690",
            "id": 1132232690,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/4797",
            "node_id": "IC_kwDOABDGAc5DfH_y",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/1132232690/reactions"
            },
            "updated_at": "2022-05-19T21:39:55Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/1132232690",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "NONE",
            "body": "\r\n> `--linient` enables `Options.error_on_unknown_names = False` and `Options.error_on_uninitialized = False` so you'd be best advised to set it that way.\r\n\r\n\r\n> Note that `cflags` (i.e. `extra_compile_args`) are really C flags, i.e. options for the C compiler and not for Cython.\r\n> \r\n> You can look at [Cython's command line parser](https://github.com/cython/cython/blob/master/Cython/Compiler/CmdLine.py) to see what each of the Cython options does and how to mimic it programmatically.\r\n\r\n\r\nOh well, thank you two for the hints!\r\n\r\nI probably scrolled by the \"Options\" section at some point, but just didn't realise, the `error_on_` -options are related to the `--lenient` argument.\r\n\r\n> `-3` is equivalent to defaulting to the `language_level` compiler directive to 3. Personally I'd set it with `#cython: language_level = 3` in the source file, since the correct setting is defined by the source file.\r\n\r\nThis usually seems like a good advice aswell, but since I obfuscate the scripts with pyarmor before compiling, I don't have much control over the source in this case :(. \r\n\r\n> \r\n> I'm not sure about `-k` - my personal view is that it's rarely useful but that shouldn't stop you from using it if you want\r\n\r\nAnd you're right, the option was recommended by the \"pyarmor\" devs but it seems to work without it aswell.\r\n\r\n",
            "created_at": "2022-05-20T08:59:32Z",
            "html_url": "https://github.com/cython/cython/issues/4797#issuecomment-1132655989",
            "id": 1132655989,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/4797",
            "node_id": "IC_kwDOABDGAc5DgvV1",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/1132655989/reactions"
            },
            "updated_at": "2022-05-20T08:59:32Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/1132655989",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/5312542?v=4",
                "events_url": "https://api.github.com/users/hexxone/events{/privacy}",
                "followers_url": "https://api.github.com/users/hexxone/followers",
                "following_url": "https://api.github.com/users/hexxone/following{/other_user}",
                "gists_url": "https://api.github.com/users/hexxone/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/hexxone",
                "id": 5312542,
                "login": "hexxone",
                "node_id": "MDQ6VXNlcjUzMTI1NDI=",
                "organizations_url": "https://api.github.com/users/hexxone/orgs",
                "received_events_url": "https://api.github.com/users/hexxone/received_events",
                "repos_url": "https://api.github.com/users/hexxone/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/hexxone/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/hexxone/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/hexxone"
            }
        },
        {
            "author_association": "NONE",
            "body": "\r\nFor anyone interested, now my `setup.py` looks like this:\r\n```\r\ntry:\r\n    from setuptools import setup\r\n    from setuptools.extension import Extension\r\nexcept ImportError:\r\n    from distutils.core import setup\r\n    from distutils.extension import Extension\r\n\r\nfrom os.path import abspath\r\n\r\nfrom Cython.Build import cythonize\r\nfrom Cython.Compiler import Options\r\n\r\nlibImport = abspath(\"../some/libs\")\r\npyImport = abspath(\"../some/include\")\r\n\r\nOptions.error_on_unknown_names = False\r\nOptions.error_on_uninitialized = False\r\nOptions.language_level = 3\r\n\r\nex_mod = [\r\n\tExtension(\r\n\t\t\"pytransform\",\r\n\t\tsources=[ \"dist/pytransform.py\" ],\r\n\t),\r\n\tExtension(\r\n\t\t\"calculate\",\r\n\t\tsources=[ \"dist/calculate.py\" ],\r\n\t)\r\n]\r\n\r\nsetup(\r\n    name=\"Calculate\",\r\n    description= 'Calculate',\r\n    author= 'Test',\r\n    author_email= 'admin@test-net,\r\n    install_requires= ['cython'],\r\n    packages= ['calculate'], \r\n    ext_modules= cythonize(ext_mod),\r\n    include_dirs= [libImport, pyImport],\r\n)\r\n```",
            "created_at": "2022-05-20T09:00:29Z",
            "html_url": "https://github.com/cython/cython/issues/4797#issuecomment-1132656864",
            "id": 1132656864,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/4797",
            "node_id": "IC_kwDOABDGAc5Dgvjg",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/1132656864/reactions"
            },
            "updated_at": "2022-05-20T09:00:29Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/1132656864",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/5312542?v=4",
                "events_url": "https://api.github.com/users/hexxone/events{/privacy}",
                "followers_url": "https://api.github.com/users/hexxone/followers",
                "following_url": "https://api.github.com/users/hexxone/following{/other_user}",
                "gists_url": "https://api.github.com/users/hexxone/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/hexxone",
                "id": 5312542,
                "login": "hexxone",
                "node_id": "MDQ6VXNlcjUzMTI1NDI=",
                "organizations_url": "https://api.github.com/users/hexxone/orgs",
                "received_events_url": "https://api.github.com/users/hexxone/received_events",
                "repos_url": "https://api.github.com/users/hexxone/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/hexxone/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/hexxone/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/hexxone"
            }
        }
    ],
    "comments": 6,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/4797/comments",
    "created_at": "2022-05-18T11:15:52Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2022-05-19T21:38:50Z",
            "event": "labeled",
            "id": 6646068865,
            "label": {
                "color": "444444",
                "name": "Documentation"
            },
            "node_id": "LE_lADOABDGAc5J5eghzwAAAAGMIvaB",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/6646068865"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/4797/events",
    "html_url": "https://github.com/cython/cython/issues/4797",
    "id": 1239803937,
    "labels": [
        {
            "color": "444444",
            "default": false,
            "description": null,
            "id": 425561345,
            "name": "Documentation",
            "node_id": "MDU6TGFiZWw0MjU1NjEzNDU=",
            "url": "https://api.github.com/repos/cython/cython/labels/Documentation"
        }
    ],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/4797/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOABDGAc5J5egh",
    "number": 4797,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/cython/cython/issues/4797/reactions"
    },
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "state_reason": null,
    "timeline_url": "https://api.github.com/repos/cython/cython/issues/4797/timeline",
    "title": "[ENH] Documentation to pass arguments in setup.py ?",
    "updated_at": "2022-05-20T09:00:29Z",
    "url": "https://api.github.com/repos/cython/cython/issues/4797",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/5312542?v=4",
        "events_url": "https://api.github.com/users/hexxone/events{/privacy}",
        "followers_url": "https://api.github.com/users/hexxone/followers",
        "following_url": "https://api.github.com/users/hexxone/following{/other_user}",
        "gists_url": "https://api.github.com/users/hexxone/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/hexxone",
        "id": 5312542,
        "login": "hexxone",
        "node_id": "MDQ6VXNlcjUzMTI1NDI=",
        "organizations_url": "https://api.github.com/users/hexxone/orgs",
        "received_events_url": "https://api.github.com/users/hexxone/received_events",
        "repos_url": "https://api.github.com/users/hexxone/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/hexxone/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/hexxone/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/hexxone"
    }
}