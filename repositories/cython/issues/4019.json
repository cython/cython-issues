{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "Please feel free to tell me that this is an abuse of cython or that there's no point in having `foo` and `bar` be `cdef`s because once they get wrapped in `partial` they are just normal `def`s.\r\n\r\nThe redefinition error just caught me by surprise since I thought it was because I had two functions with the same name but in reality the function names and argument names were very different and so it was hard to eventually figure out first) what was going on and then second) which two functions had the same signature.\r\n\r\n**Describe the bug**\r\nredefinition error when partial wraps different functions with the same signature\r\n\r\n**To Reproduce**\r\nCode to reproduce the behaviour:\r\n```cython\r\nfrom functools import partial\r\n\r\ncdef foo(a):\r\n    print(a + 1)\r\n\r\ncdef bar(b):\r\n    print(b + \" string\")\r\n\r\npartial(foo)\r\npartial(bar)\r\n```\r\n\r\n**Expected behavior**\r\nNo error since `foo` and `bar` have different names\r\n\r\n**Environment (please complete the following information):**\r\n - OS: macOS\r\n - Python version: 3.9\r\n - Cython version: 0.29.22\r\n\r\n**Additional context**\r\nIf I specify the argument types for the functions, the error goes away. For example, all three of these work:\r\n\r\n```cython\r\nfrom functools import partial\r\n\r\ncdef foo(int a):\r\n    print(a + 1)\r\n\r\ncdef bar(b):\r\n    print(b + \" string\")\r\n\r\npartial(foo)\r\npartial(bar)\r\n```\r\n\r\n```cython\r\nfrom functools import partial\r\n\r\ncdef foo(a):\r\n    print(a + 1)\r\n\r\ncdef bar(str b):\r\n    print(b + \" string\")\r\n\r\npartial(foo)\r\npartial(bar)\r\n```\r\n\r\n```cython\r\nfrom functools import partial\r\n\r\ncdef foo(int a):\r\n    print(a + 1)\r\n\r\ncdef bar(str b):\r\n    print(b + \" string\")\r\n\r\npartial(foo)\r\npartial(bar)\r\n```",
    "closed_at": "2021-02-27T08:11:34Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Thanks for the report. Might be a problem with the internal C name generation for the Python function wrappers. Your examples seem ok to me.\n\nCould you please also try Cython 3.0? I think I remember similar issues already being fixed at some point.\n",
            "created_at": "2021-02-27T06:33:49Z",
            "html_url": "https://github.com/cython/cython/issues/4019#issuecomment-787015312",
            "id": 787015312,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/4019",
            "node_id": "MDEyOklzc3VlQ29tbWVudDc4NzAxNTMxMg==",
            "performed_via_github_app": null,
            "updated_at": "2021-02-27T06:33:49Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/787015312",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "COLLABORATOR",
            "body": "I think this is a duplicate of https://github.com/cython/cython/issues/3716. I don't think the fix is merged yet (so trying Cython 3 probably won't help)",
            "created_at": "2021-02-27T08:11:33Z",
            "html_url": "https://github.com/cython/cython/issues/4019#issuecomment-787034178",
            "id": 787034178,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/4019",
            "node_id": "MDEyOklzc3VlQ29tbWVudDc4NzAzNDE3OA==",
            "performed_via_github_app": null,
            "updated_at": "2021-02-27T08:11:33Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/787034178",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        },
        {
            "author_association": "COLLABORATOR",
            "body": "FWIW, there probably isn't much point in using cdef functions if you're just going to wrap them in partial (they do become pretty similar to a def function then). But none the less, it should work without bugs",
            "created_at": "2021-02-27T08:14:36Z",
            "html_url": "https://github.com/cython/cython/issues/4019#issuecomment-787034516",
            "id": 787034516,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/4019",
            "node_id": "MDEyOklzc3VlQ29tbWVudDc4NzAzNDUxNg==",
            "performed_via_github_app": null,
            "updated_at": "2021-02-27T08:14:36Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/787034516",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        }
    ],
    "comments": 3,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/4019/comments",
    "created_at": "2021-02-27T00:00:09Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2021-02-27T08:11:34Z",
            "event": "closed",
            "id": 4384735196,
            "node_id": "MDExOkNsb3NlZEV2ZW50NDM4NDczNTE5Ng==",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/4384735196"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2021-02-27T08:12:32Z",
            "event": "labeled",
            "id": 4384735859,
            "label": {
                "color": "444444",
                "name": "R: duplicate"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDQzODQ3MzU4NTk=",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/4384735859"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/4019/events",
    "html_url": "https://github.com/cython/cython/issues/4019",
    "id": 817759539,
    "labels": [
        {
            "color": "444444",
            "default": false,
            "description": null,
            "id": 425556894,
            "name": "R: duplicate",
            "node_id": "MDU6TGFiZWw0MjU1NTY4OTQ=",
            "url": "https://api.github.com/repos/cython/cython/labels/R:%20duplicate"
        }
    ],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/4019/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU4MTc3NTk1Mzk=",
    "number": 4019,
    "performed_via_github_app": null,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "closed",
    "title": "[BUG] redefinition error when partial wraps different functions with the same signature",
    "updated_at": "2021-02-27T08:14:36Z",
    "url": "https://api.github.com/repos/cython/cython/issues/4019",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/6951699?v=4",
        "events_url": "https://api.github.com/users/scottbelden/events{/privacy}",
        "followers_url": "https://api.github.com/users/scottbelden/followers",
        "following_url": "https://api.github.com/users/scottbelden/following{/other_user}",
        "gists_url": "https://api.github.com/users/scottbelden/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/scottbelden",
        "id": 6951699,
        "login": "scottbelden",
        "node_id": "MDQ6VXNlcjY5NTE2OTk=",
        "organizations_url": "https://api.github.com/users/scottbelden/orgs",
        "received_events_url": "https://api.github.com/users/scottbelden/received_events",
        "repos_url": "https://api.github.com/users/scottbelden/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/scottbelden/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/scottbelden/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/scottbelden"
    }
}