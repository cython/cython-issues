{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "<!--\r\n**PLEASE READ THIS FIRST:**\r\n- Do not use the bug and feature tracker for support requests. Use the `cython-users` mailing list instead.\r\n- Did you search for similar issues already? Please do, it helps to save us precious time that we otherwise could not invest into development.\r\n- Did you try the latest master branch or pre-release? It might already have what you want to report. Also see the [Changelog](https://github.com/cython/cython/blob/master/CHANGES.rst) regarding recent changes.\r\n-->\r\n\r\n**Describe the bug**\r\n_Cython/Utility/Profile.c_ uses `tstate->use_tracing` but a recent change in the upcoming Python 3.10 has moved this field down to a new `tstate->cframe->use_tracing` location, leading to _Profile.c_ failing to compile. See python/cpython#25276 and [bpo-43760](https://bugs.python.org/issue43760).\r\n\r\n\r\n**To Reproduce**\r\nCode to reproduce the behaviour:\r\nN.A. (essentially any, if `# cython: profile=True` or `linetrace=True` is activated)\r\n\r\n**Expected behavior**\r\nCython-using code compiles successfully.\r\n\r\n**Environment (please complete the following information):**\r\n - OS: observed on Linux\r\n - Python version: 3.10\r\n - Cython version: problem present in **master**\r\n\r\n**Additional context**\r\nReported on a Cython-using project as pysam-developers/pysam#1015.\r\n",
    "closed_at": "2021-05-19T10:25:39Z",
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "[bpo-43760](https://bugs.python.org/issue43760) is freshly active and has suggested the possibility of introducing accessor functions, but is mostly at the stage of finding out what the reasons are for code outwith CPython wanting to directly access `use_tracing`.",
            "created_at": "2021-05-11T14:42:07Z",
            "html_url": "https://github.com/cython/cython/issues/4153#issuecomment-838598634",
            "id": 838598634,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/4153",
            "node_id": "MDEyOklzc3VlQ29tbWVudDgzODU5ODYzNA==",
            "performed_via_github_app": null,
            "updated_at": "2021-05-11T14:42:07Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/838598634",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/70921?v=4",
                "events_url": "https://api.github.com/users/jmarshall/events{/privacy}",
                "followers_url": "https://api.github.com/users/jmarshall/followers",
                "following_url": "https://api.github.com/users/jmarshall/following{/other_user}",
                "gists_url": "https://api.github.com/users/jmarshall/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jmarshall",
                "id": 70921,
                "login": "jmarshall",
                "node_id": "MDQ6VXNlcjcwOTIx",
                "organizations_url": "https://api.github.com/users/jmarshall/orgs",
                "received_events_url": "https://api.github.com/users/jmarshall/received_events",
                "repos_url": "https://api.github.com/users/jmarshall/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jmarshall/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jmarshall/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jmarshall"
            }
        },
        {
            "author_association": "NONE",
            "body": "I'm attempting to get a working solution (even if temporary) in https://github.com/cython/cython/pull/4173",
            "created_at": "2021-05-19T10:08:10Z",
            "html_url": "https://github.com/cython/cython/issues/4153#issuecomment-843953439",
            "id": 843953439,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/4153",
            "node_id": "MDEyOklzc3VlQ29tbWVudDg0Mzk1MzQzOQ==",
            "performed_via_github_app": null,
            "updated_at": "2021-05-19T10:08:10Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/843953439",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2401856?v=4",
                "events_url": "https://api.github.com/users/hroncok/events{/privacy}",
                "followers_url": "https://api.github.com/users/hroncok/followers",
                "following_url": "https://api.github.com/users/hroncok/following{/other_user}",
                "gists_url": "https://api.github.com/users/hroncok/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/hroncok",
                "id": 2401856,
                "login": "hroncok",
                "node_id": "MDQ6VXNlcjI0MDE4NTY=",
                "organizations_url": "https://api.github.com/users/hroncok/orgs",
                "received_events_url": "https://api.github.com/users/hroncok/received_events",
                "repos_url": "https://api.github.com/users/hroncok/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/hroncok/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/hroncok/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/hroncok"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "This is already resolved for master in\r\nhttps://github.com/cython/cython/commit/c9cccfeaf3f0e20c2bb14fc234e86f4fc8e4fe81\r\nhttps://github.com/cython/cython/commit/78f1ca8ed3c6c7757fcc19907400618ed3d7817d",
            "created_at": "2021-05-19T10:16:58Z",
            "html_url": "https://github.com/cython/cython/issues/4153#issuecomment-843960023",
            "id": 843960023,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/4153",
            "node_id": "MDEyOklzc3VlQ29tbWVudDg0Mzk2MDAyMw==",
            "performed_via_github_app": null,
            "updated_at": "2021-05-19T10:16:58Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/843960023",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "NONE",
            "body": "Should I attempt a backport instead then?",
            "created_at": "2021-05-19T10:19:58Z",
            "html_url": "https://github.com/cython/cython/issues/4153#issuecomment-843962234",
            "id": 843962234,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/4153",
            "node_id": "MDEyOklzc3VlQ29tbWVudDg0Mzk2MjIzNA==",
            "performed_via_github_app": null,
            "updated_at": "2021-05-19T10:19:58Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/843962234",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2401856?v=4",
                "events_url": "https://api.github.com/users/hroncok/events{/privacy}",
                "followers_url": "https://api.github.com/users/hroncok/followers",
                "following_url": "https://api.github.com/users/hroncok/following{/other_user}",
                "gists_url": "https://api.github.com/users/hroncok/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/hroncok",
                "id": 2401856,
                "login": "hroncok",
                "node_id": "MDQ6VXNlcjI0MDE4NTY=",
                "organizations_url": "https://api.github.com/users/hroncok/orgs",
                "received_events_url": "https://api.github.com/users/hroncok/received_events",
                "repos_url": "https://api.github.com/users/hroncok/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/hroncok/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/hroncok/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/hroncok"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "The change applies cleanly to 0.29.x as well. I'll push it there. Sorry for the duplicate effort.",
            "created_at": "2021-05-19T10:20:26Z",
            "html_url": "https://github.com/cython/cython/issues/4153#issuecomment-843962535",
            "id": 843962535,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/4153",
            "node_id": "MDEyOklzc3VlQ29tbWVudDg0Mzk2MjUzNQ==",
            "performed_via_github_app": null,
            "updated_at": "2021-05-19T10:20:26Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/843962535",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "This may be dangerous for two reasons:\r\n\r\n1. `tstate->use_tracing` had global effect before, while `tstate->cframe->use_tracing` only affects the last executing frame. Modifiying this value only affects that particular frame. The semantics are different.\r\n2. `tstate->cframe` points to a stack allocated variable in ceval. Accessing this from heap objects may be dangerous.",
            "created_at": "2021-09-23T10:29:58Z",
            "html_url": "https://github.com/cython/cython/issues/4153#issuecomment-925689636",
            "id": 925689636,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/4153",
            "node_id": "IC_kwDOABDGAc43LOck",
            "performed_via_github_app": null,
            "updated_at": "2021-09-23T10:29:58Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/925689636",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11718525?v=4",
                "events_url": "https://api.github.com/users/pablogsal/events{/privacy}",
                "followers_url": "https://api.github.com/users/pablogsal/followers",
                "following_url": "https://api.github.com/users/pablogsal/following{/other_user}",
                "gists_url": "https://api.github.com/users/pablogsal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/pablogsal",
                "id": 11718525,
                "login": "pablogsal",
                "node_id": "MDQ6VXNlcjExNzE4NTI1",
                "organizations_url": "https://api.github.com/users/pablogsal/orgs",
                "received_events_url": "https://api.github.com/users/pablogsal/received_events",
                "repos_url": "https://api.github.com/users/pablogsal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/pablogsal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/pablogsal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/pablogsal"
            }
        }
    ],
    "comments": 6,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/4153/comments",
    "created_at": "2021-05-11T12:53:35Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2401856?v=4",
                "events_url": "https://api.github.com/users/hroncok/events{/privacy}",
                "followers_url": "https://api.github.com/users/hroncok/followers",
                "following_url": "https://api.github.com/users/hroncok/following{/other_user}",
                "gists_url": "https://api.github.com/users/hroncok/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/hroncok",
                "id": 2401856,
                "login": "hroncok",
                "node_id": "MDQ6VXNlcjI0MDE4NTY=",
                "organizations_url": "https://api.github.com/users/hroncok/orgs",
                "received_events_url": "https://api.github.com/users/hroncok/received_events",
                "repos_url": "https://api.github.com/users/hroncok/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/hroncok/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/hroncok/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/hroncok"
            },
            "commit_id": "22292f9e02df42f23391fbb2aedba45bb26a869b",
            "commit_url": "https://api.github.com/repos/hroncok/cython/commits/22292f9e02df42f23391fbb2aedba45bb26a869b",
            "created_at": "2021-05-19T10:02:39Z",
            "event": "referenced",
            "id": 4765627450,
            "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ3NjU2Mjc0NTA=",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/4765627450"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2021-05-19T10:20:37Z",
            "event": "milestoned",
            "id": 4765725262,
            "milestone": {
                "title": "0.29.24"
            },
            "node_id": "MDE1Ok1pbGVzdG9uZWRFdmVudDQ3NjU3MjUyNjI=",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/4765725262"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2021-05-19T10:20:46Z",
            "event": "labeled",
            "id": 4765726053,
            "label": {
                "color": "444444",
                "name": "Code Generation"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDQ3NjU3MjYwNTM=",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/4765726053"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2021-05-19T10:20:46Z",
            "event": "labeled",
            "id": 4765726057,
            "label": {
                "color": "444444",
                "name": "defect"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDQ3NjU3MjYwNTc=",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/4765726057"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2021-05-19T10:25:39Z",
            "event": "closed",
            "id": 4765751614,
            "node_id": "MDExOkNsb3NlZEV2ZW50NDc2NTc1MTYxNA==",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/4765751614"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/4153/events",
    "html_url": "https://github.com/cython/cython/issues/4153",
    "id": 887190325,
    "labels": [
        {
            "color": "444444",
            "default": false,
            "description": null,
            "id": 425553654,
            "name": "defect",
            "node_id": "MDU6TGFiZWw0MjU1NTM2NTQ=",
            "url": "https://api.github.com/repos/cython/cython/labels/defect"
        },
        {
            "color": "444444",
            "default": false,
            "description": null,
            "id": 425556330,
            "name": "Code Generation",
            "node_id": "MDU6TGFiZWw0MjU1NTYzMzA=",
            "url": "https://api.github.com/repos/cython/cython/labels/Code%20Generation"
        }
    ],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/4153/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": "2021-07-22T07:28:28Z",
        "closed_issues": 18,
        "created_at": "2021-04-25T05:19:34Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
            "events_url": "https://api.github.com/users/scoder/events{/privacy}",
            "followers_url": "https://api.github.com/users/scoder/followers",
            "following_url": "https://api.github.com/users/scoder/following{/other_user}",
            "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/scoder",
            "id": 491659,
            "login": "scoder",
            "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
            "organizations_url": "https://api.github.com/users/scoder/orgs",
            "received_events_url": "https://api.github.com/users/scoder/received_events",
            "repos_url": "https://api.github.com/users/scoder/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/scoder"
        },
        "description": "",
        "due_on": null,
        "html_url": "https://github.com/cython/cython/milestone/84",
        "id": 6694973,
        "labels_url": "https://api.github.com/repos/cython/cython/milestones/84/labels",
        "node_id": "MDk6TWlsZXN0b25lNjY5NDk3Mw==",
        "number": 84,
        "open_issues": 1,
        "state": "closed",
        "title": "0.29.24",
        "updated_at": "2021-09-01T06:40:49Z",
        "url": "https://api.github.com/repos/cython/cython/milestones/84"
    },
    "node_id": "MDU6SXNzdWU4ODcxOTAzMjU=",
    "number": 4153,
    "performed_via_github_app": null,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "closed",
    "timeline_url": "https://api.github.com/repos/cython/cython/issues/4153/timeline",
    "title": "[BUG] Cython/Utility/Profile.c use of use_tracing broken by recent Python 3.10 change",
    "updated_at": "2021-09-23T10:29:58Z",
    "url": "https://api.github.com/repos/cython/cython/issues/4153",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/70921?v=4",
        "events_url": "https://api.github.com/users/jmarshall/events{/privacy}",
        "followers_url": "https://api.github.com/users/jmarshall/followers",
        "following_url": "https://api.github.com/users/jmarshall/following{/other_user}",
        "gists_url": "https://api.github.com/users/jmarshall/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/jmarshall",
        "id": 70921,
        "login": "jmarshall",
        "node_id": "MDQ6VXNlcjcwOTIx",
        "organizations_url": "https://api.github.com/users/jmarshall/orgs",
        "received_events_url": "https://api.github.com/users/jmarshall/received_events",
        "repos_url": "https://api.github.com/users/jmarshall/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/jmarshall/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jmarshall/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/jmarshall"
    }
}