{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "<!--\r\n**PLEASE READ THIS FIRST:**\r\n- Do not use the bug and feature tracker for support requests. Use the `cython-users` mailing list instead.\r\n- Did you search for similar issues already? Please do, it helps to save us precious time that we otherwise could not invest into development.\r\n- Did you try the latest master branch or pre-release? It might already have what you want to report. Also see the [Changelog](https://github.com/cython/cython/blob/master/CHANGES.rst) regarding recent changes.\r\n-->\r\n\r\n**Describe the bug**\r\n_Cython/Utility/Profile.c_ uses `tstate->use_tracing` but a recent change in the upcoming Python 3.10 has moved this field down to a new `tstate->cframe->use_tracing` location, leading to _Profile.c_ failing to compile. See python/cpython#25276 and [bpo-43760](https://bugs.python.org/issue43760).\r\n\r\n\r\n**To Reproduce**\r\nCode to reproduce the behaviour:\r\nN.A. (essentially any, if `# cython: profile=True` or `linetrace=True` is activated)\r\n\r\n**Expected behavior**\r\nCython-using code compiles successfully.\r\n\r\n**Environment (please complete the following information):**\r\n - OS: observed on Linux\r\n - Python version: 3.10\r\n - Cython version: problem present in **master**\r\n\r\n**Additional context**\r\nReported on a Cython-using project as pysam-developers/pysam#1015.\r\n",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "[bpo-43760](https://bugs.python.org/issue43760) is freshly active and has suggested the possibility of introducing accessor functions, but is mostly at the stage of finding out what the reasons are for code outwith CPython wanting to directly access `use_tracing`.",
            "created_at": "2021-05-11T14:42:07Z",
            "html_url": "https://github.com/cython/cython/issues/4153#issuecomment-838598634",
            "id": 838598634,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/4153",
            "node_id": "MDEyOklzc3VlQ29tbWVudDgzODU5ODYzNA==",
            "performed_via_github_app": null,
            "updated_at": "2021-05-11T14:42:07Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/838598634",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/70921?v=4",
                "events_url": "https://api.github.com/users/jmarshall/events{/privacy}",
                "followers_url": "https://api.github.com/users/jmarshall/followers",
                "following_url": "https://api.github.com/users/jmarshall/following{/other_user}",
                "gists_url": "https://api.github.com/users/jmarshall/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jmarshall",
                "id": 70921,
                "login": "jmarshall",
                "node_id": "MDQ6VXNlcjcwOTIx",
                "organizations_url": "https://api.github.com/users/jmarshall/orgs",
                "received_events_url": "https://api.github.com/users/jmarshall/received_events",
                "repos_url": "https://api.github.com/users/jmarshall/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jmarshall/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jmarshall/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jmarshall"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/4153/comments",
    "created_at": "2021-05-11T12:53:35Z",
    "event_data": [],
    "events_url": "https://api.github.com/repos/cython/cython/issues/4153/events",
    "html_url": "https://github.com/cython/cython/issues/4153",
    "id": 887190325,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/4153/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU4ODcxOTAzMjU=",
    "number": 4153,
    "performed_via_github_app": null,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "title": "[BUG] Cython/Utility/Profile.c use of use_tracing broken by recent Python 3.10 change",
    "updated_at": "2021-05-11T15:10:28Z",
    "url": "https://api.github.com/repos/cython/cython/issues/4153",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/70921?v=4",
        "events_url": "https://api.github.com/users/jmarshall/events{/privacy}",
        "followers_url": "https://api.github.com/users/jmarshall/followers",
        "following_url": "https://api.github.com/users/jmarshall/following{/other_user}",
        "gists_url": "https://api.github.com/users/jmarshall/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/jmarshall",
        "id": 70921,
        "login": "jmarshall",
        "node_id": "MDQ6VXNlcjcwOTIx",
        "organizations_url": "https://api.github.com/users/jmarshall/orgs",
        "received_events_url": "https://api.github.com/users/jmarshall/received_events",
        "repos_url": "https://api.github.com/users/jmarshall/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/jmarshall/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jmarshall/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/jmarshall"
    }
}