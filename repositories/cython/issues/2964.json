{
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "If I run `cython -a` on my cython files, lines like `np.zeros` are highlighted as involving a lot of python calls but the docs don't really mention another way to create numpy arrays.\r\n\r\nIs there a more efficient way, to create a new numpy array in a cython function than calling (python) functions like `np.zeros`?",
    "closed_at": "2019-05-22T10:50:16Z",
    "comment_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "It looks like you could [`cimport numpy`](https://github.com/cython/cython/blob/master/Cython/Includes/numpy/__init__.pxd), then use the [`PyArray_SimpleNew()`](https://www.numpy.org/devdocs/reference/c-api.array.html#c.PyArray_SimpleNew) C-API function to construct an array. I don't imagine it'd have a significant speed up though. Constructing things are  expensive anyway since you have to allocate all the memory, and construct the Python object. This would mostly just hide it from the annotated file. You'd need to measure to find out.",
            "created_at": "2019-05-22T01:39:33Z",
            "html_url": "https://github.com/cython/cython/issues/2964#issuecomment-494619067",
            "id": 494619067,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2964",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NDYxOTA2Nw==",
            "updated_at": "2019-05-22T01:39:33Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/494619067",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/8453732?v=4",
                "events_url": "https://api.github.com/users/TeamSpen210/events{/privacy}",
                "followers_url": "https://api.github.com/users/TeamSpen210/followers",
                "following_url": "https://api.github.com/users/TeamSpen210/following{/other_user}",
                "gists_url": "https://api.github.com/users/TeamSpen210/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/TeamSpen210",
                "id": 8453732,
                "login": "TeamSpen210",
                "node_id": "MDQ6VXNlcjg0NTM3MzI=",
                "organizations_url": "https://api.github.com/users/TeamSpen210/orgs",
                "received_events_url": "https://api.github.com/users/TeamSpen210/received_events",
                "repos_url": "https://api.github.com/users/TeamSpen210/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/TeamSpen210/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/TeamSpen210/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/TeamSpen210"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Agree, this is probably the fastest way, though there's non-trivial overhead that can't be avoided when creating new array objects (and isn't reflected in the annotation; you have to profile to be sure). If you find this is a bottleneck, consider (if possible) creating a single larger array of a higher dimension. \r\n\r\nClosing as this isn't really an issue (and probably more appropriate for cython-users@googlegroups.com).",
            "created_at": "2019-05-22T10:50:16Z",
            "html_url": "https://github.com/cython/cython/issues/2964#issuecomment-494752475",
            "id": 494752475,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2964",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NDc1MjQ3NQ==",
            "updated_at": "2019-05-22T10:50:16Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/494752475",
            "user": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/486017?v=4",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "node_id": "MDQ6VXNlcjQ4NjAxNw==",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/2964/comments",
    "created_at": "2019-05-21T15:39:37Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/486017?v=4",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "node_id": "MDQ6VXNlcjQ4NjAxNw==",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2019-05-22T10:50:16Z",
            "event": "closed",
            "id": 2358891357,
            "node_id": "MDExOkNsb3NlZEV2ZW50MjM1ODg5MTM1Nw==",
            "url": "https://api.github.com/repos/cython/cython/issues/events/2358891357"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/2964/events",
    "html_url": "https://github.com/cython/cython/issues/2964",
    "id": 446691343,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/2964/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU0NDY2OTEzNDM=",
    "number": 2964,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "closed",
    "title": "What is the fastest way to create new numpy arrays in a cython function?",
    "updated_at": "2019-05-22T10:50:16Z",
    "url": "https://api.github.com/repos/cython/cython/issues/2964",
    "user": {
        "avatar_url": "https://avatars3.githubusercontent.com/u/5488440?v=4",
        "events_url": "https://api.github.com/users/MaxNoe/events{/privacy}",
        "followers_url": "https://api.github.com/users/MaxNoe/followers",
        "following_url": "https://api.github.com/users/MaxNoe/following{/other_user}",
        "gists_url": "https://api.github.com/users/MaxNoe/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/MaxNoe",
        "id": 5488440,
        "login": "MaxNoe",
        "node_id": "MDQ6VXNlcjU0ODg0NDA=",
        "organizations_url": "https://api.github.com/users/MaxNoe/orgs",
        "received_events_url": "https://api.github.com/users/MaxNoe/received_events",
        "repos_url": "https://api.github.com/users/MaxNoe/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/MaxNoe/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/MaxNoe/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/MaxNoe"
    }
}