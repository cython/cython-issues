{
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "I observed the following non-deterministic test failure:\r\n\r\n```\r\nERROR: runTest (__main__.CythonRunTestCase)\r\ncompiling (c) and running longlongindex\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"runtests.py\", line 1117, in run\r\n    self.run_tests(result, ext_so_path)\r\n  File \"runtests.py\", line 1132, in run_tests\r\n    self.run_doctests(self.module, result, ext_so_path)\r\n  File \"runtests.py\", line 1142, in run_doctests\r\n    run_forked_test(result, run_test, self.shortDescription(), self.fork)\r\n  File \"runtests.py\", line 1195, in run_forked_test\r\n    cid, result_code = os.waitpid(child_id, 0)\r\nOSError: [Errno 4] Interrupted system call\r\n```\r\n\r\nFound on Ubuntu 16.04 when building cython 0.28.3 against `musl` libc with `nix` using Python 2.7 (see this issue: https://github.com/nh2/static-haskell-nix/issues/6#issuecomment-420452838), but I don't know yet if any of that is relevant.\r\n\r\nThe `waitpid()` syscall can return `EINTR` (see man page). In normal code the correct action is to retry. For cython's tests, I am not sure. Does the test do anything that could result in a signal arriving at the thread that's `waitpid`ing?",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "The tests use forking to prevent the whole test runner from crashing if one test does. The above stack trace only shows the part on the side of the test runner and is therefore unhelpful (ok, it's the doctests that are failing and not the compilation, so it's not a C compiler/platform issue, at least). The actual reason might be given in the test logs at the place where the test ran. Could you dig those up?",
            "created_at": "2018-09-12T04:10:21Z",
            "html_url": "https://github.com/cython/cython/issues/2602#issuecomment-420505726",
            "id": 420505726,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2602",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQyMDUwNTcyNg==",
            "updated_at": "2018-09-12T04:10:21Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/420505726",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "NONE",
            "body": "How can I run a specific tests using `runtests.py`, such as `longlongindex`? I could spot only `--exclude` in `--help`.",
            "created_at": "2019-07-21T02:17:34Z",
            "html_url": "https://github.com/cython/cython/issues/2602#issuecomment-513513420",
            "id": 513513420,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2602",
            "node_id": "MDEyOklzc3VlQ29tbWVudDUxMzUxMzQyMA==",
            "updated_at": "2019-07-21T02:17:34Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/513513420",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/399535?v=4",
                "events_url": "https://api.github.com/users/nh2/events{/privacy}",
                "followers_url": "https://api.github.com/users/nh2/followers",
                "following_url": "https://api.github.com/users/nh2/following{/other_user}",
                "gists_url": "https://api.github.com/users/nh2/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/nh2",
                "id": 399535,
                "login": "nh2",
                "node_id": "MDQ6VXNlcjM5OTUzNQ==",
                "organizations_url": "https://api.github.com/users/nh2/orgs",
                "received_events_url": "https://api.github.com/users/nh2/received_events",
                "repos_url": "https://api.github.com/users/nh2/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/nh2/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/nh2/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/nh2"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Just pass that name as argument, it'll be used as a regex filter.\n",
            "created_at": "2019-07-21T05:32:00Z",
            "html_url": "https://github.com/cython/cython/issues/2602#issuecomment-513524438",
            "id": 513524438,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2602",
            "node_id": "MDEyOklzc3VlQ29tbWVudDUxMzUyNDQzOA==",
            "updated_at": "2019-07-21T05:32:00Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/513524438",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        }
    ],
    "comments": 3,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/2602/comments",
    "created_at": "2018-09-11T23:09:52Z",
    "event_data": [],
    "events_url": "https://api.github.com/repos/cython/cython/issues/2602/events",
    "html_url": "https://github.com/cython/cython/issues/2602",
    "id": 359256509,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/2602/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWUzNTkyNTY1MDk=",
    "number": 2602,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "title": "flaky test: Interrupted system call in longlongindex",
    "updated_at": "2019-07-21T05:32:00Z",
    "url": "https://api.github.com/repos/cython/cython/issues/2602",
    "user": {
        "avatar_url": "https://avatars1.githubusercontent.com/u/399535?v=4",
        "events_url": "https://api.github.com/users/nh2/events{/privacy}",
        "followers_url": "https://api.github.com/users/nh2/followers",
        "following_url": "https://api.github.com/users/nh2/following{/other_user}",
        "gists_url": "https://api.github.com/users/nh2/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/nh2",
        "id": 399535,
        "login": "nh2",
        "node_id": "MDQ6VXNlcjM5OTUzNQ==",
        "organizations_url": "https://api.github.com/users/nh2/orgs",
        "received_events_url": "https://api.github.com/users/nh2/received_events",
        "repos_url": "https://api.github.com/users/nh2/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/nh2/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/nh2/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/nh2"
    }
}