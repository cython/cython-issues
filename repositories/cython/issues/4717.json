{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "It seems that passing fused types by reference is not currently possible. Consider the following snippet\r\n\r\n```cython\r\n# distutils: language=c++\r\n\r\nctypedef fused element_t:\r\n        int\r\n    \r\ncdef funcr(element_t &a):\r\n    pass\r\n\r\ndef test():\r\n    cdef int a = 5\r\n    funcr(a)\r\n```\r\n\r\nwhich fails with the error message:\r\n\r\n```\r\n\r\nError compiling Cython file:\r\n------------------------------------------------------------\r\n...\r\ncdef funcr(element_t &a):\r\n    pass\r\n\r\ndef test():\r\n    cdef int a = 5\r\n    funcr(a)\r\n         ^\r\n------------------------------------------------------------\r\n\r\n...pyx:11:10: Cannot coerce to a type that is not specialized\r\n```\r\n\r\nI tried explicitly indexing to specialize the type by changing the call from `funcr(a)` to `funcr[int](a)` but got the following message.\r\n\r\n```\r\nError compiling Cython file:\r\n------------------------------------------------------------\r\n...\r\ncdef funcr(element_t &a):\r\n    pass\r\n\r\ndef test():\r\n    cdef int a = 5\r\n    funcr[int](a)\r\n        ^\r\n------------------------------------------------------------\r\n\r\n...pyx:11:9: Can only parameterize template functions.\r\n```\r\n\r\nThe code compiles fine after changing the type definition to `ctypedef int element_t`. Similarly, passing `a` by value or by pointer works as expected.\r\n\r\nMy environment is\r\n- OS: macOS Monterey 12.3 (M1 chip)\r\n- Python version: 3.9.9 (pyenv via brew)\r\n- Cython version: 0.29.28 (have also tried `master`)\r\n\r\nHappy to support if I can, but not quite sure where to get started.",
    "closed_at": null,
    "comment_data": [],
    "comments": 0,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/4717/comments",
    "created_at": "2022-04-06T03:43:52Z",
    "event_data": [],
    "events_url": "https://api.github.com/repos/cython/cython/issues/4717/events",
    "html_url": "https://github.com/cython/cython/issues/4717",
    "id": 1193968237,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/4717/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOABDGAc5HKoJt",
    "number": 4717,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/cython/cython/issues/4717/reactions"
    },
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "timeline_url": "https://api.github.com/repos/cython/cython/issues/4717/timeline",
    "title": "[BUG] Cannot pass fused type by reference",
    "updated_at": "2022-04-06T03:58:21Z",
    "url": "https://api.github.com/repos/cython/cython/issues/4717",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/966348?v=4",
        "events_url": "https://api.github.com/users/tillahoffmann/events{/privacy}",
        "followers_url": "https://api.github.com/users/tillahoffmann/followers",
        "following_url": "https://api.github.com/users/tillahoffmann/following{/other_user}",
        "gists_url": "https://api.github.com/users/tillahoffmann/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/tillahoffmann",
        "id": 966348,
        "login": "tillahoffmann",
        "node_id": "MDQ6VXNlcjk2NjM0OA==",
        "organizations_url": "https://api.github.com/users/tillahoffmann/orgs",
        "received_events_url": "https://api.github.com/users/tillahoffmann/received_events",
        "repos_url": "https://api.github.com/users/tillahoffmann/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/tillahoffmann/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/tillahoffmann/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/tillahoffmann"
    }
}