{
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "I would like to use the function `std::make_reverse_iterator`:\r\n```\r\ncdef extern from \"<iterator>\" namespace \"std\" nogil:\r\n    cdef cppclass iter_reference_t[T]:\r\n        pass\r\n    cdef cppclass iterator[C, T, D, P, R]:\r\n        pass\r\n    cdef cppclass reverse_iterator[T]:\r\n        T iterator_type\r\n        iter_reference_t[T]& operator*()\r\n        reverse_iterator& operator++()\r\n        bint operator!=(reverse_iterator)\r\n    cdef reverse_iterator[T] make_reverse_iterator[T](T)\r\n```\r\n\r\nGives errors such as:\r\n```\r\nwhile it != childs.rend(): ->\r\nCannot assign type 'reverse_iterator' to 'reverse_iterator[iterator]'\r\nderef(it) ->\r\nCannot assign type 'iter_reference_t[iterator]' to 'Node_ptr'\r\n```\r\n\r\n\r\nMy solution so far which fully compiles and runs successfully is extending `reverse_iterator` of the class I am using with 2 constructor definitions:\r\n```\r\n        cppclass reverse_iterator:\r\n            reverse_iterator()\r\n            reverse_iterator(iterator)\r\n```\r\n\r\nHowever, `make_reverse_iterator` can have some extra logic since the constructor version is not guaranteed to work and depends on implementation specific details in some cases.  I am using the `set` class where indeed it does work at least in a Windows environment which is compiling with MSVC 2019 and its associated STL libraries.\r\n\r\nIs there anyway to import this as the reverse_iterator must have a template class of an Iterator template class with its 5 template parameters.  But I have tried many things, and I always end up getting back to the same problem that I have no way to get the reference (among other things like specific reverse_iterator not being templated in the class I am using).\r\n\r\nOtherwise this might be a feature request as I realize especially supporting template constructs through C++20 is a pretty broad scope task.\r\n\r\n\r\nAlso separately, I see the definitions in libcpp for reverse_iterators seem to have a lot of iterators in them which could be fixed (for ++ and --).  Some of them seem correct, others do not - quite inconsistent.  A simple PR if this is in fact buggy which it strongly looks like e.g. for set:\r\n```\r\n        cppclass reverse_iterator:\r\n            T& operator*()\r\n            iterator operator++()\r\n            iterator operator--()\r\n            bint operator==(reverse_iterator)\r\n            bint operator!=(reverse_iterator)\r\n```",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "I got it to work by being quite clever with:\r\n```\r\ncdef extern from \"<iterator>\" namespace \"std\" nogil:\r\n    cdef cppclass reverse_iterator[T]:\r\n        pass\r\n    cdef reverse_iterator[T] make_reverse_iterator[T](T)\r\n```\r\n\r\nand in the set class:\r\n```\r\n        cppclass reverse_iterator:\r\n            reverse_iterator()\r\n            reverse_iterator(reverse_iterator)\r\n```\r\n\r\nSo I can simply pass the result of make_reverse_iterator to the constructor of reverse_iterator in the class.  This however requires a cast to `<set[…].reverse_iterator(<set[…].reverse_iterator>object)`.  Probably the best solution at the moment.  Compiles and works though.  Probably could just use a cast and not use the extra construction also.  And after testing, `<set[…].reverse_iterator>make_reverse_iterator(...)` works fine, and is the solution then.",
            "created_at": "2019-11-28T09:10:47Z",
            "html_url": "https://github.com/cython/cython/issues/3252#issuecomment-559405611",
            "id": 559405611,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3252",
            "node_id": "MDEyOklzc3VlQ29tbWVudDU1OTQwNTYxMQ==",
            "updated_at": "2019-11-28T09:32:29Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/559405611",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/5968641?v=4",
                "events_url": "https://api.github.com/users/GregoryMorse/events{/privacy}",
                "followers_url": "https://api.github.com/users/GregoryMorse/followers",
                "following_url": "https://api.github.com/users/GregoryMorse/following{/other_user}",
                "gists_url": "https://api.github.com/users/GregoryMorse/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/GregoryMorse",
                "id": 5968641,
                "login": "GregoryMorse",
                "node_id": "MDQ6VXNlcjU5Njg2NDE=",
                "organizations_url": "https://api.github.com/users/GregoryMorse/orgs",
                "received_events_url": "https://api.github.com/users/GregoryMorse/received_events",
                "repos_url": "https://api.github.com/users/GregoryMorse/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/GregoryMorse/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/GregoryMorse/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/GregoryMorse"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/3252/comments",
    "created_at": "2019-11-28T08:34:59Z",
    "event_data": [],
    "events_url": "https://api.github.com/repos/cython/cython/issues/3252/events",
    "html_url": "https://github.com/cython/cython/issues/3252",
    "id": 529765383,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/3252/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU1Mjk3NjUzODM=",
    "number": 3252,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "title": "No way to use C++ template with template parameters",
    "updated_at": "2019-11-28T09:32:29Z",
    "url": "https://api.github.com/repos/cython/cython/issues/3252",
    "user": {
        "avatar_url": "https://avatars0.githubusercontent.com/u/5968641?v=4",
        "events_url": "https://api.github.com/users/GregoryMorse/events{/privacy}",
        "followers_url": "https://api.github.com/users/GregoryMorse/followers",
        "following_url": "https://api.github.com/users/GregoryMorse/following{/other_user}",
        "gists_url": "https://api.github.com/users/GregoryMorse/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/GregoryMorse",
        "id": 5968641,
        "login": "GregoryMorse",
        "node_id": "MDQ6VXNlcjU5Njg2NDE=",
        "organizations_url": "https://api.github.com/users/GregoryMorse/orgs",
        "received_events_url": "https://api.github.com/users/GregoryMorse/received_events",
        "repos_url": "https://api.github.com/users/GregoryMorse/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/GregoryMorse/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/GregoryMorse/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/GregoryMorse"
    }
}