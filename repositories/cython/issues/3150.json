{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "My `.pyx` file uses a PEP-484 style type signature:\r\n```\r\n#cython: embedsignature=True\r\ndef f(path: str, a: int = 0, b: bool = True) -> typing.List[str]:\r\n    return []\r\n```\r\nCython 0.29.13 turns this into the docstring:\r\n`f(unicode path: str, a: int = 0, bool b: bool = True) -> typing.List[str]`\r\n(see also #1370 for \"unicode\")\r\n\r\nWhen using mypy-stubgen, that docstring turns into:\r\n`def f(unicodepath: str, a: int = ..., boolb: bool = ...) -> typing.List[str]: ...`\r\n\r\nWhich causes mypy false positives for Python code calling `f` with a named argument for `b`.\r\n\r\nI think `embedsignature` should not output Cython-specific syntax, as that breaks tooling consuming these docstrings.\r\nIdeally it'd also convert Cython signatures into the corresponding Python signatures; but it would be good enough for me if it just left PEP484 signatures as-is.",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "Alternate ideas:\r\n * Cython could maybe generate `.pyi` stubs itself?\r\n * I could enable `binding=True` to expose the signature to Python tooling. However the current `mypy-stubgen` only emits function declarations for what it considers a \"C function\":\r\n```py\r\ndef is_c_function(obj: object) -> bool:\r\n    return inspect.isbuiltin(obj) or type(obj) is type(ord)\r\n```\r\nso all Cython functions with binding enabled get converted to a simple `f: typing.Any`. This should probably be fixed on the mypy side.",
            "created_at": "2019-09-20T18:36:41Z",
            "html_url": "https://github.com/cython/cython/issues/3150#issuecomment-533665514",
            "id": 533665514,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3150",
            "node_id": "MDEyOklzc3VlQ29tbWVudDUzMzY2NTUxNA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/533665514/reactions"
            },
            "updated_at": "2019-09-20T18:36:41Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/533665514",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/243140?v=4",
                "events_url": "https://api.github.com/users/dgrunwald/events{/privacy}",
                "followers_url": "https://api.github.com/users/dgrunwald/followers",
                "following_url": "https://api.github.com/users/dgrunwald/following{/other_user}",
                "gists_url": "https://api.github.com/users/dgrunwald/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/dgrunwald",
                "id": 243140,
                "login": "dgrunwald",
                "node_id": "MDQ6VXNlcjI0MzE0MA==",
                "organizations_url": "https://api.github.com/users/dgrunwald/orgs",
                "received_events_url": "https://api.github.com/users/dgrunwald/received_events",
                "repos_url": "https://api.github.com/users/dgrunwald/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/dgrunwald/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/dgrunwald/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/dgrunwald"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "If generating `.pyi` stubs is not too complex, Cython could do it automatically, yes, similar to how it now generates the embedded signatures in `AutoDocTransform`. PR welcome.\r\n\r\nI also agree that generating 'normal' Py3 annotations would be nicer than generating Cython syntax. PR welcome for that, too.",
            "created_at": "2019-09-21T13:59:29Z",
            "html_url": "https://github.com/cython/cython/issues/3150#issuecomment-533800128",
            "id": 533800128,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3150",
            "node_id": "MDEyOklzc3VlQ29tbWVudDUzMzgwMDEyOA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/533800128/reactions"
            },
            "updated_at": "2019-09-21T13:59:29Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/533800128",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "NONE",
            "body": "Looking forward to this functionality! I usually write all documentation in `.pyx` files, so it could be very nice to have automatic `.pyi` generation!",
            "created_at": "2020-07-30T18:29:43Z",
            "html_url": "https://github.com/cython/cython/issues/3150#issuecomment-666585102",
            "id": 666585102,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3150",
            "node_id": "MDEyOklzc3VlQ29tbWVudDY2NjU4NTEwMg==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/666585102/reactions"
            },
            "updated_at": "2020-07-30T18:29:43Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/666585102",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9154441?v=4",
                "events_url": "https://api.github.com/users/cmpute/events{/privacy}",
                "followers_url": "https://api.github.com/users/cmpute/followers",
                "following_url": "https://api.github.com/users/cmpute/following{/other_user}",
                "gists_url": "https://api.github.com/users/cmpute/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cmpute",
                "id": 9154441,
                "login": "cmpute",
                "node_id": "MDQ6VXNlcjkxNTQ0NDE=",
                "organizations_url": "https://api.github.com/users/cmpute/orgs",
                "received_events_url": "https://api.github.com/users/cmpute/received_events",
                "repos_url": "https://api.github.com/users/cmpute/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cmpute/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cmpute/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cmpute"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "@cmpute PR welcome, as I wrote. See the `AutoDocTransform`.",
            "created_at": "2020-07-30T18:39:14Z",
            "html_url": "https://github.com/cython/cython/issues/3150#issuecomment-666590043",
            "id": 666590043,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3150",
            "node_id": "MDEyOklzc3VlQ29tbWVudDY2NjU5MDA0Mw==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/666590043/reactions"
            },
            "updated_at": "2020-07-30T18:39:14Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/666590043",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Note that mypy has a tool called `stubgen` to generate stub files from runtime information.\r\n\r\nFor Cython, it suffers from the fact that a few special methods like `__init__` and `__call__` [cannot expose their signatures as runtime type information](https://github.com/cython/cython/issues/3873). Apart from that, it [should generally work with Cython](https://github.com/python/mypy/issues/7542).",
            "created_at": "2022-04-21T08:17:38Z",
            "html_url": "https://github.com/cython/cython/issues/3150#issuecomment-1104856079",
            "id": 1104856079,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3150",
            "node_id": "IC_kwDOABDGAc5B2sQP",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/1104856079/reactions"
            },
            "updated_at": "2022-04-21T08:17:38Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/1104856079",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        }
    ],
    "comments": 5,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/3150/comments",
    "created_at": "2019-09-20T18:29:31Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2019-09-21T13:59:46Z",
            "event": "labeled",
            "id": 2652134841,
            "label": {
                "color": "444444",
                "name": "Cython Language Feature"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDI2NTIxMzQ4NDE=",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/2652134841"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2019-09-21T13:59:46Z",
            "event": "labeled",
            "id": 2652134842,
            "label": {
                "color": "444444",
                "name": "enhancement"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDI2NTIxMzQ4NDI=",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/2652134842"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9154441?v=4",
                "events_url": "https://api.github.com/users/cmpute/events{/privacy}",
                "followers_url": "https://api.github.com/users/cmpute/followers",
                "following_url": "https://api.github.com/users/cmpute/following{/other_user}",
                "gists_url": "https://api.github.com/users/cmpute/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cmpute",
                "id": 9154441,
                "login": "cmpute",
                "node_id": "MDQ6VXNlcjkxNTQ0NDE=",
                "organizations_url": "https://api.github.com/users/cmpute/orgs",
                "received_events_url": "https://api.github.com/users/cmpute/received_events",
                "repos_url": "https://api.github.com/users/cmpute/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cmpute/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cmpute/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cmpute"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2020-07-30T18:39:14Z",
            "event": "mentioned",
            "id": 3605264784,
            "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MzYwNTI2NDc4NA==",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/3605264784"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9154441?v=4",
                "events_url": "https://api.github.com/users/cmpute/events{/privacy}",
                "followers_url": "https://api.github.com/users/cmpute/followers",
                "following_url": "https://api.github.com/users/cmpute/following{/other_user}",
                "gists_url": "https://api.github.com/users/cmpute/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cmpute",
                "id": 9154441,
                "login": "cmpute",
                "node_id": "MDQ6VXNlcjkxNTQ0NDE=",
                "organizations_url": "https://api.github.com/users/cmpute/orgs",
                "received_events_url": "https://api.github.com/users/cmpute/received_events",
                "repos_url": "https://api.github.com/users/cmpute/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cmpute/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cmpute/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cmpute"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2020-07-30T18:39:14Z",
            "event": "subscribed",
            "id": 3605264789,
            "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDM2MDUyNjQ3ODk=",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/3605264789"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2022-04-21T04:21:03Z",
            "event": "renamed",
            "id": 6467797119,
            "node_id": "RTE_lADOABDGAc4dl9U5zwAAAAGBgsB_",
            "performed_via_github_app": null,
            "rename": {
                "from": "Embedded signature uses Cython syntax even if source code does not",
                "to": "Generate Python typing compatible text signatures (and stubs)"
            },
            "url": "https://api.github.com/repos/cython/cython/issues/events/6467797119"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/3150/events",
    "html_url": "https://github.com/cython/cython/issues/3150",
    "id": 496489785,
    "labels": [
        {
            "color": "444444",
            "default": true,
            "description": null,
            "id": 425556243,
            "name": "enhancement",
            "node_id": "MDU6TGFiZWw0MjU1NTYyNDM=",
            "url": "https://api.github.com/repos/cython/cython/labels/enhancement"
        },
        {
            "color": "444444",
            "default": false,
            "description": null,
            "id": 425559948,
            "name": "Cython Language Feature",
            "node_id": "MDU6TGFiZWw0MjU1NTk5NDg=",
            "url": "https://api.github.com/repos/cython/cython/labels/Cython%20Language%20Feature"
        }
    ],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/3150/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU0OTY0ODk3ODU=",
    "number": 3150,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 1,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 1,
        "url": "https://api.github.com/repos/cython/cython/issues/3150/reactions"
    },
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "timeline_url": "https://api.github.com/repos/cython/cython/issues/3150/timeline",
    "title": "Generate Python typing compatible text signatures (and stubs)",
    "updated_at": "2022-04-21T08:17:38Z",
    "url": "https://api.github.com/repos/cython/cython/issues/3150",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/243140?v=4",
        "events_url": "https://api.github.com/users/dgrunwald/events{/privacy}",
        "followers_url": "https://api.github.com/users/dgrunwald/followers",
        "following_url": "https://api.github.com/users/dgrunwald/following{/other_user}",
        "gists_url": "https://api.github.com/users/dgrunwald/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/dgrunwald",
        "id": 243140,
        "login": "dgrunwald",
        "node_id": "MDQ6VXNlcjI0MzE0MA==",
        "organizations_url": "https://api.github.com/users/dgrunwald/orgs",
        "received_events_url": "https://api.github.com/users/dgrunwald/received_events",
        "repos_url": "https://api.github.com/users/dgrunwald/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/dgrunwald/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/dgrunwald/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/dgrunwald"
    }
}