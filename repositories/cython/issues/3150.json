{
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "My `.pyx` file uses a PEP-484 style type signature:\r\n```\r\n#cython: embedsignature=True\r\ndef f(path: str, a: int = 0, b: bool = True) -> typing.List[str]:\r\n    return []\r\n```\r\nCython 0.29.13 turns this into the docstring:\r\n`f(unicode path: str, a: int = 0, bool b: bool = True) -> typing.List[str]`\r\n(see also #1370 for \"unicode\")\r\n\r\nWhen using mypy-stubgen, that docstring turns into:\r\n`def f(unicodepath: str, a: int = ..., boolb: bool = ...) -> typing.List[str]: ...`\r\n\r\nWhich causes mypy false positives for Python code calling `f` with a named argument for `b`.\r\n\r\nI think `embedsignature` should not output Cython-specific syntax, as that breaks tooling consuming these docstrings.\r\nIdeally it'd also convert Cython signatures into the corresponding Python signatures; but it would be good enough for me if it just left PEP484 signatures as-is.",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "Alternate ideas:\r\n * Cython could maybe generate `.pyi` stubs itself?\r\n * I could enable `binding=True` to expose the signature to Python tooling. However the current `mypy-stubgen` only emits function declarations for what it considers a \"C function\":\r\n```py\r\ndef is_c_function(obj: object) -> bool:\r\n    return inspect.isbuiltin(obj) or type(obj) is type(ord)\r\n```\r\nso all Cython functions with binding enabled get converted to a simple `f: typing.Any`. This should probably be fixed on the mypy side.",
            "created_at": "2019-09-20T18:36:41Z",
            "html_url": "https://github.com/cython/cython/issues/3150#issuecomment-533665514",
            "id": 533665514,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3150",
            "node_id": "MDEyOklzc3VlQ29tbWVudDUzMzY2NTUxNA==",
            "updated_at": "2019-09-20T18:36:41Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/533665514",
            "user": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/243140?v=4",
                "events_url": "https://api.github.com/users/dgrunwald/events{/privacy}",
                "followers_url": "https://api.github.com/users/dgrunwald/followers",
                "following_url": "https://api.github.com/users/dgrunwald/following{/other_user}",
                "gists_url": "https://api.github.com/users/dgrunwald/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/dgrunwald",
                "id": 243140,
                "login": "dgrunwald",
                "node_id": "MDQ6VXNlcjI0MzE0MA==",
                "organizations_url": "https://api.github.com/users/dgrunwald/orgs",
                "received_events_url": "https://api.github.com/users/dgrunwald/received_events",
                "repos_url": "https://api.github.com/users/dgrunwald/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/dgrunwald/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/dgrunwald/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/dgrunwald"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "If generating `.pyi` stubs is not too complex, Cython could do it automatically, yes, similar to how it now generates the embedded signatures in `AutoDocTransform`. PR welcome.\r\n\r\nI also agree that generating 'normal' Py3 annotations would be nicer than generating Cython syntax. PR welcome for that, too.",
            "created_at": "2019-09-21T13:59:29Z",
            "html_url": "https://github.com/cython/cython/issues/3150#issuecomment-533800128",
            "id": 533800128,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3150",
            "node_id": "MDEyOklzc3VlQ29tbWVudDUzMzgwMDEyOA==",
            "updated_at": "2019-09-21T13:59:29Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/533800128",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/3150/comments",
    "created_at": "2019-09-20T18:29:31Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2019-09-21T13:59:46Z",
            "event": "labeled",
            "id": 2652134841,
            "label": {
                "color": "444444",
                "name": "Cython Language Feature"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDI2NTIxMzQ4NDE=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/2652134841"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2019-09-21T13:59:46Z",
            "event": "labeled",
            "id": 2652134842,
            "label": {
                "color": "444444",
                "name": "enhancement"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDI2NTIxMzQ4NDI=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/2652134842"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/3150/events",
    "html_url": "https://github.com/cython/cython/issues/3150",
    "id": 496489785,
    "labels": [
        {
            "color": "444444",
            "default": false,
            "id": 425559948,
            "name": "Cython Language Feature",
            "node_id": "MDU6TGFiZWw0MjU1NTk5NDg=",
            "url": "https://api.github.com/repos/cython/cython/labels/Cython%20Language%20Feature"
        },
        {
            "color": "444444",
            "default": true,
            "id": 425556243,
            "name": "enhancement",
            "node_id": "MDU6TGFiZWw0MjU1NTYyNDM=",
            "url": "https://api.github.com/repos/cython/cython/labels/enhancement"
        }
    ],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/3150/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU0OTY0ODk3ODU=",
    "number": 3150,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "title": "Embedded signature uses Cython syntax even if source code does not",
    "updated_at": "2019-09-21T13:59:46Z",
    "url": "https://api.github.com/repos/cython/cython/issues/3150",
    "user": {
        "avatar_url": "https://avatars3.githubusercontent.com/u/243140?v=4",
        "events_url": "https://api.github.com/users/dgrunwald/events{/privacy}",
        "followers_url": "https://api.github.com/users/dgrunwald/followers",
        "following_url": "https://api.github.com/users/dgrunwald/following{/other_user}",
        "gists_url": "https://api.github.com/users/dgrunwald/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/dgrunwald",
        "id": 243140,
        "login": "dgrunwald",
        "node_id": "MDQ6VXNlcjI0MzE0MA==",
        "organizations_url": "https://api.github.com/users/dgrunwald/orgs",
        "received_events_url": "https://api.github.com/users/dgrunwald/received_events",
        "repos_url": "https://api.github.com/users/dgrunwald/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/dgrunwald/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/dgrunwald/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/dgrunwald"
    }
}