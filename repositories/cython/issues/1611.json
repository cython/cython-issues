{
    "assignee": null,
    "assignees": [],
    "body": "[We](https://github.com/SFTtech/openage)'d like to see support for variadic template arguments, such as this:\r\n\r\ntest.h:\r\n``` cpp\r\ntemplate<typename RetT, typename ... VARARGS>\r\nRetT foo(VARARGS ...);\r\n```\r\n\r\ntest.pyx:\r\n``` cython\r\ncdef extern from \"test.h\":\r\n    cdef RetT foo[RetT, ... VARARGS](... VARARGS)\r\n\r\ndef test():\r\n    cdef int i = foo[int, float, int](1, 2.5, 3)\r\n```\r\n\r\nThis would allow Cython's `libcpp` to easily support many of C++11's new types, including `std::tuple` and `std::function`.\r\n\r\nSupport for the latter in particular would prove quite useful in passing around function pointers between Cython and C++.\r\n\r\n\r\nWe have tried to implement this feature myself, but we're entirely unfamiliar with Cython's codebase, and all my attempts ended in unsatisfactorily hacky, unstable code. We believe that any experienced Cython developer on this list would be able to properly implement this in a matter of a few hours, as it seems like a rather minor feature.\r\n\r\nThe current workaround for the non-existance of this feature involves typedefs for every possible number of arguments, like this:\r\n\r\n``` cpp\r\ntemplate<typename ... Ts>\r\nstruct S {};\r\n\r\nusing S0 = S<>;\r\n\r\ntemplate<typename T0>\r\nusing S1 = S<T0>;\r\n\r\ntemplate<typename T0, typename T1>\r\nusing S2 = S<T0, T1>;\r\n\r\ntemplate<typename T0, typename T1, typename T2>\r\nusing S3 = S<T0, T1, T2>;\r\n```\r\n\r\nthen exporting all of S0, S1, ... individually in the `.pxd` file.\r\n\r\n[This is inconvenient, but acceptable](https://github.com/SFTtech/openage/blob/0dd8667f6accdfbd9473f920a58c4f2d52db4cae/libopenage/pyinterface/functional.h).\r\n\r\nNow assume that `S` has a member function `f`:\r\n\r\n``` cpp\r\ntemplate<typename ... Us>\r\nvoid f(Ts..., Us ...);\r\n```\r\n\r\ndue to the nature of C++, the same trick as above does not work, and the user will be forced to clutter the C++ code with a function body for every possible `len(Us)`. Even worse, the `.pxd` file will now contain a quadratic number of wrappers (one for every possible combination of `len(Ts)`, `len(Us)`), all of them extremely prone to mistakes.",
    "closed_at": null,
    "comment_data": [
        {
            "body": "There is a workaround (hack) that may be of use in the short-term.  You may declare the Cython wrappers to the C++ functions as C-style variadics.  I have some examples in a project allowing C++11-style emplacement into containers:\r\n\r\nhttps://github.com/molpopgen/cython_mcpp\r\n\r\nThis method works due to a bug (?) in Cython allowing this.  I would expect this to break if Cython supports C++11 parameter packs.",
            "created_at": "2017-03-15T11:02:51Z",
            "html_url": "https://github.com/cython/cython/issues/1611#issuecomment-286709637",
            "id": 286709637,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/1611",
            "updated_at": "2017-03-15T11:02:51Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/286709637",
            "user": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/6416159?v=3",
                "events_url": "https://api.github.com/users/molpopgen/events{/privacy}",
                "followers_url": "https://api.github.com/users/molpopgen/followers",
                "following_url": "https://api.github.com/users/molpopgen/following{/other_user}",
                "gists_url": "https://api.github.com/users/molpopgen/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/molpopgen",
                "id": 6416159,
                "login": "molpopgen",
                "organizations_url": "https://api.github.com/users/molpopgen/orgs",
                "received_events_url": "https://api.github.com/users/molpopgen/received_events",
                "repos_url": "https://api.github.com/users/molpopgen/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/molpopgen/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/molpopgen/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/molpopgen"
            }
        },
        {
            "body": "I don't think it's a bug actually. It just takes advantage of the fact that C variadic calls accept pretty much anything. Given that technique, telling Cython about the template aspect of something is really only necessary if the return type can't be determined without the particular types of the arguments used.",
            "created_at": "2017-03-15T15:05:38Z",
            "html_url": "https://github.com/cython/cython/issues/1611#issuecomment-286770569",
            "id": 286770569,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/1611",
            "updated_at": "2017-03-15T15:05:38Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/286770569",
            "user": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/1847484?v=3",
                "events_url": "https://api.github.com/users/insertinterestingnamehere/events{/privacy}",
                "followers_url": "https://api.github.com/users/insertinterestingnamehere/followers",
                "following_url": "https://api.github.com/users/insertinterestingnamehere/following{/other_user}",
                "gists_url": "https://api.github.com/users/insertinterestingnamehere/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/insertinterestingnamehere",
                "id": 1847484,
                "login": "insertinterestingnamehere",
                "organizations_url": "https://api.github.com/users/insertinterestingnamehere/orgs",
                "received_events_url": "https://api.github.com/users/insertinterestingnamehere/received_events",
                "repos_url": "https://api.github.com/users/insertinterestingnamehere/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/insertinterestingnamehere/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/insertinterestingnamehere/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/insertinterestingnamehere"
            }
        },
        {
            "body": "Well, it is undocumented and probably unsupported, given that Cython's C++ support is limited to the C++98 grammar (variadics, lambdas, universal references, and the types depending on them are currently not supported in anything \"cdef\").  I know that there's a \"pseudo-auto\" that can be used, but it isn't actual auto, and the difference matters sometimes.\r\n\r\n@robertwb can say more, of course, but if this method were supported, then I'd have thought we'd have seen the emplace* set of functions in the libcpp exports.\r\n",
            "created_at": "2017-03-15T17:09:37Z",
            "html_url": "https://github.com/cython/cython/issues/1611#issuecomment-286812124",
            "id": 286812124,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/1611",
            "updated_at": "2017-03-15T17:09:37Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/286812124",
            "user": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/6416159?v=3",
                "events_url": "https://api.github.com/users/molpopgen/events{/privacy}",
                "followers_url": "https://api.github.com/users/molpopgen/followers",
                "following_url": "https://api.github.com/users/molpopgen/following{/other_user}",
                "gists_url": "https://api.github.com/users/molpopgen/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/molpopgen",
                "id": 6416159,
                "login": "molpopgen",
                "organizations_url": "https://api.github.com/users/molpopgen/orgs",
                "received_events_url": "https://api.github.com/users/molpopgen/received_events",
                "repos_url": "https://api.github.com/users/molpopgen/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/molpopgen/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/molpopgen/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/molpopgen"
            }
        }
    ],
    "comments": 3,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/1611/comments",
    "created_at": "2017-02-22T22:46:49Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/486017?v=3",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2017-03-15T17:09:38Z",
            "event": "mentioned",
            "id": 1001294192,
            "url": "https://api.github.com/repos/cython/cython/issues/events/1001294192"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/486017?v=3",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2017-03-15T17:09:38Z",
            "event": "subscribed",
            "id": 1001294193,
            "url": "https://api.github.com/repos/cython/cython/issues/events/1001294193"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/1611/events",
    "html_url": "https://github.com/cython/cython/issues/1611",
    "id": 209606398,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/1611/labels{/name}",
    "locked": false,
    "milestone": null,
    "number": 1611,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "title": "Variadic template support",
    "updated_at": "2017-03-15T17:09:38Z",
    "url": "https://api.github.com/repos/cython/cython/issues/1611",
    "user": {
        "avatar_url": "https://avatars0.githubusercontent.com/u/673543?v=3",
        "events_url": "https://api.github.com/users/TheJJ/events{/privacy}",
        "followers_url": "https://api.github.com/users/TheJJ/followers",
        "following_url": "https://api.github.com/users/TheJJ/following{/other_user}",
        "gists_url": "https://api.github.com/users/TheJJ/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/TheJJ",
        "id": 673543,
        "login": "TheJJ",
        "organizations_url": "https://api.github.com/users/TheJJ/orgs",
        "received_events_url": "https://api.github.com/users/TheJJ/received_events",
        "repos_url": "https://api.github.com/users/TheJJ/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/TheJJ/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/TheJJ/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/TheJJ"
    }
}