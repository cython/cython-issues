{
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "I have tried to compile a pxd file which uses math functions in libc and map structure in libcpp together. \r\nImport lines of my code is put below:\r\n```\r\n#cython: boundscheck=False\r\n#cython: wraparound=False\r\n#cython: cdivision=True\r\n#cython: nonecheck=False\r\n\r\n# distutils: language = c++\r\n\r\ncimport numpy as np\r\nimport numpy as np\r\nfrom libcpp.math cimport pow, round, floor, sqrt, isnan, fmax, fmin, fabs, ceil, exp, fmod, NAN\r\nfrom libcpp.map cimport map\r\n```\r\n\r\nAnd I tried to compile this file by using the following lines in the setup py:\r\n```\r\nfrom distutils.core import setup\r\nfrom distutils.extension import Extension\r\nfrom Cython.Distutils import build_ext\r\nfrom Cython.Build import cythonize\r\nimport os\r\nimport numpy as np\r\n\r\nsetup(ext_modules=(cythonize([Extension(\r\n                                        name=\"name\", \r\n                                        sources=[\"name.pyx\")],\r\n                                        include_dirs=[np.get_include()],\r\n                                        language=\"c++\",\r\n                                        extra_compile_args=[\"-std=c++14\"]\r\n                                    )\r\n                              ]\r\n                  )\r\n      )\r\n)\r\n```\r\nHow can I compile this file succesfully? Is there anyone who solved this problem before?\r\n\r\nThanks for your help.",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "What's the problem?",
            "created_at": "2020-02-06T14:39:16Z",
            "html_url": "https://github.com/cython/cython/issues/3347#issuecomment-582935455",
            "id": 582935455,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3347",
            "node_id": "MDEyOklzc3VlQ29tbWVudDU4MjkzNTQ1NQ==",
            "updated_at": "2020-02-06T14:39:16Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/582935455",
            "user": {
                "avatar_url": "https://avatars2.githubusercontent.com/u/13689192?v=4",
                "events_url": "https://api.github.com/users/McSinyx/events{/privacy}",
                "followers_url": "https://api.github.com/users/McSinyx/followers",
                "following_url": "https://api.github.com/users/McSinyx/following{/other_user}",
                "gists_url": "https://api.github.com/users/McSinyx/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/McSinyx",
                "id": 13689192,
                "login": "McSinyx",
                "node_id": "MDQ6VXNlcjEzNjg5MTky",
                "organizations_url": "https://api.github.com/users/McSinyx/orgs",
                "received_events_url": "https://api.github.com/users/McSinyx/received_events",
                "repos_url": "https://api.github.com/users/McSinyx/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/McSinyx/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/McSinyx/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/McSinyx"
            }
        },
        {
            "author_association": "NONE",
            "body": "The error message includes `name.cpp:3130:111: error: 'isnan' was not declared in this scope` . I think it cannot see the C functions due to using `# distutils: language = c++`. The reason is the std namespace of C++ is used and there is no isnan function in libcpp of cython. \r\n\r\nIs there any way to solve this issue?",
            "created_at": "2020-02-06T14:47:09Z",
            "html_url": "https://github.com/cython/cython/issues/3347#issuecomment-582939178",
            "id": 582939178,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3347",
            "node_id": "MDEyOklzc3VlQ29tbWVudDU4MjkzOTE3OA==",
            "updated_at": "2020-02-06T14:47:09Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/582939178",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/16309848?v=4",
                "events_url": "https://api.github.com/users/atifemreyuksel/events{/privacy}",
                "followers_url": "https://api.github.com/users/atifemreyuksel/followers",
                "following_url": "https://api.github.com/users/atifemreyuksel/following{/other_user}",
                "gists_url": "https://api.github.com/users/atifemreyuksel/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/atifemreyuksel",
                "id": 16309848,
                "login": "atifemreyuksel",
                "node_id": "MDQ6VXNlcjE2MzA5ODQ4",
                "organizations_url": "https://api.github.com/users/atifemreyuksel/orgs",
                "received_events_url": "https://api.github.com/users/atifemreyuksel/received_events",
                "repos_url": "https://api.github.com/users/atifemreyuksel/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/atifemreyuksel/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/atifemreyuksel/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/atifemreyuksel"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "It looks like you're running into something similar to https://stackoverflow.com/questions/18128899. Is an `#include <math.h>` not being included in your `name.cpp`? (I assume by `from libcpp.math` you meant `from libc.math`?",
            "created_at": "2020-02-06T19:02:56Z",
            "html_url": "https://github.com/cython/cython/issues/3347#issuecomment-583059450",
            "id": 583059450,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3347",
            "node_id": "MDEyOklzc3VlQ29tbWVudDU4MzA1OTQ1MA==",
            "updated_at": "2020-02-06T19:02:56Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/583059450",
            "user": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/486017?v=4",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "node_id": "MDQ6VXNlcjQ4NjAxNw==",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            }
        },
        {
            "author_association": "NONE",
            "body": "Sorry, when I tried some different cases, I wrote `libcpp.math` wrongly.\r\n\r\nI have a name.pxy file which has:\r\n```\r\nfrom libc.math cimport pow, round, floor, sqrt, isnan, fmax, fmin, fabs, ceil, exp, fmod, NAN\r\nfrom libcpp.map cimport map\r\n```\r\n\r\n@robertwb, what is the **best practice** when you want to use c libraries and cpp libraries together in cython? I can use them together in Jupyter notebook but I cannot handle it when creating a script. ",
            "created_at": "2020-02-06T19:18:45Z",
            "html_url": "https://github.com/cython/cython/issues/3347#issuecomment-583066015",
            "id": 583066015,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3347",
            "node_id": "MDEyOklzc3VlQ29tbWVudDU4MzA2NjAxNQ==",
            "updated_at": "2020-02-06T19:19:56Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/583066015",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/16309848?v=4",
                "events_url": "https://api.github.com/users/atifemreyuksel/events{/privacy}",
                "followers_url": "https://api.github.com/users/atifemreyuksel/followers",
                "following_url": "https://api.github.com/users/atifemreyuksel/following{/other_user}",
                "gists_url": "https://api.github.com/users/atifemreyuksel/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/atifemreyuksel",
                "id": 16309848,
                "login": "atifemreyuksel",
                "node_id": "MDQ6VXNlcjE2MzA5ODQ4",
                "organizations_url": "https://api.github.com/users/atifemreyuksel/orgs",
                "received_events_url": "https://api.github.com/users/atifemreyuksel/received_events",
                "repos_url": "https://api.github.com/users/atifemreyuksel/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/atifemreyuksel/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/atifemreyuksel/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/atifemreyuksel"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "If I understand that StackOverflow link correctly then including `<math.h>` should definitely including plain, unnamespaced `isnan`, but _may_ also include `std::isnan`. While including `<cmath>` should definitely include `std::isnan` but _may_ also include the unnamespaced `isnan`.\r\n\r\nTherefore your code should work, and works for me (with the `from libc.math import ...`). I think this should be reported as a bug to the makers of your compiler/standard library.\r\n\r\nYou could of course write your own wrappings for the math functions in the `std` namespace (just copy and modify https://github.com/cython/cython/blob/master/Cython/Includes/libc/math.pxd).\r\n\r\nIt's possible there may be something else going wrong though. Is this the first, or the last, error message you get? The first is often most useful.",
            "created_at": "2020-02-07T12:38:22Z",
            "html_url": "https://github.com/cython/cython/issues/3347#issuecomment-583372743",
            "id": 583372743,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3347",
            "node_id": "MDEyOklzc3VlQ29tbWVudDU4MzM3Mjc0Mw==",
            "updated_at": "2020-02-07T12:38:22Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/583372743",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "This should just work. I second da-woods that it looks like an error with your C++ compiler or build environment. Do you get the same error when trying to compile the a tiny cpp file with nothing but\r\n\r\n```\r\n#include <math.h>\r\nint main(int argc, int argv) {\r\n  double x = argc;\r\n  return isnan(x);\r\n}\r\n```\r\n\r\nWhat about if you include such a file for your sources instead of the pyx in setup.py? (Try also adding\r\n\r\n```\r\n#include \"numpy/arrayobject.h\"\r\n#include \"numpy/ufuncobject.h\"\r\n```\r\n\r\nand seeing if that gives you the error.)",
            "created_at": "2020-02-07T18:33:45Z",
            "html_url": "https://github.com/cython/cython/issues/3347#issuecomment-583544657",
            "id": 583544657,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3347",
            "node_id": "MDEyOklzc3VlQ29tbWVudDU4MzU0NDY1Nw==",
            "updated_at": "2020-02-07T18:33:45Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/583544657",
            "user": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/486017?v=4",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "node_id": "MDQ6VXNlcjQ4NjAxNw==",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            }
        }
    ],
    "comments": 6,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/3347/comments",
    "created_at": "2020-02-06T14:36:57Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/486017?v=4",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "node_id": "MDQ6VXNlcjQ4NjAxNw==",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2020-02-06T19:18:46Z",
            "event": "mentioned",
            "id": 3015153528,
            "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MzAxNTE1MzUyOA==",
            "url": "https://api.github.com/repos/cython/cython/issues/events/3015153528"
        },
        {
            "actor": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/486017?v=4",
                "events_url": "https://api.github.com/users/robertwb/events{/privacy}",
                "followers_url": "https://api.github.com/users/robertwb/followers",
                "following_url": "https://api.github.com/users/robertwb/following{/other_user}",
                "gists_url": "https://api.github.com/users/robertwb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robertwb",
                "id": 486017,
                "login": "robertwb",
                "node_id": "MDQ6VXNlcjQ4NjAxNw==",
                "organizations_url": "https://api.github.com/users/robertwb/orgs",
                "received_events_url": "https://api.github.com/users/robertwb/received_events",
                "repos_url": "https://api.github.com/users/robertwb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robertwb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robertwb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robertwb"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2020-02-06T19:18:46Z",
            "event": "subscribed",
            "id": 3015153531,
            "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDMwMTUxNTM1MzE=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/3015153531"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/3347/events",
    "html_url": "https://github.com/cython/cython/issues/3347",
    "id": 561053640,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/3347/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU1NjEwNTM2NDA=",
    "number": 3347,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "title": "Compiling a pxd file that uses libc and libcpp libraries together",
    "updated_at": "2020-02-07T18:33:45Z",
    "url": "https://api.github.com/repos/cython/cython/issues/3347",
    "user": {
        "avatar_url": "https://avatars0.githubusercontent.com/u/16309848?v=4",
        "events_url": "https://api.github.com/users/atifemreyuksel/events{/privacy}",
        "followers_url": "https://api.github.com/users/atifemreyuksel/followers",
        "following_url": "https://api.github.com/users/atifemreyuksel/following{/other_user}",
        "gists_url": "https://api.github.com/users/atifemreyuksel/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/atifemreyuksel",
        "id": 16309848,
        "login": "atifemreyuksel",
        "node_id": "MDQ6VXNlcjE2MzA5ODQ4",
        "organizations_url": "https://api.github.com/users/atifemreyuksel/orgs",
        "received_events_url": "https://api.github.com/users/atifemreyuksel/received_events",
        "repos_url": "https://api.github.com/users/atifemreyuksel/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/atifemreyuksel/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/atifemreyuksel/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/atifemreyuksel"
    }
}