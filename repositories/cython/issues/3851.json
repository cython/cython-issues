{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "**Describe the bug**\r\nNew version of the mingw-w64 fails to build cython code. This issue is closely related to the #3213. I use recommended linker options. The non static compilations is successful. \r\n\r\nWith the \"GCC 9.3.0 + LLVM/Clang/LLD/LLDB 10.0.0 + MinGW-w64 7.0.0 - release 4\" everything are OK.\r\n\r\nWith the \"GCC 10.2.0 + LLVM/Clang/LLD/LLDB 10.0.1 + MinGW-w64 8.0.0 - release 1\" I got the error:\r\n\r\n```\r\nrunning build_ext\r\nbuilding 'nuance.algs.linalg_ext' extension\r\nC:\\Dev\\MinGW\\x86_64-10.2.0\\mingw64\\bin\\gcc.exe -mdll -O -Wall -IC:\\Dev\\Python\\python-3.8.5\\lib\\site-packages\\numpy\\core\\include -IC:\\Dev\\Python\\python-3.8.5\\include -IC:\\Dev\\Python\\python-3.8.5\\include -c src-py/nuance/algs\\linalg_ext.c -o build\\temp.win-amd64-3.8\\Release\\src-py\\nuance\\algs\\linalg_ext.o -std=gnu++17 -O3 -fopenmp -fvisibility=hidden -flto -fno-fat-lto-objects -DMS_WIN64\r\nwriting build\\temp.win-amd64-3.8\\Release\\src-py\\nuance\\algs\\linalg_ext.cp38-win_amd64.def\r\nC:\\Dev\\MinGW\\x86_64-10.2.0\\mingw64\\bin\\gcc.exe -shared -fopenmp -s build\\temp.win-amd64-3.8\\Release\\src-py\\nuance\\algs\\linalg_ext.o build\\temp.win-amd64-3.8\\Release\\src-py\\nuance\\algs\\linalg_ext.cp38-win_amd64.def -LC:\\Dev\\Python\\python-3.8.5\\libs -LC:\\Dev\\Python\\python-3.8.5\\PCbuild\\amd64 -lpython38 -o c:\\WST\\projects\\nuance\\src-py\\nuance\\algs\\linalg_ext.cp38-win_amd64.pyd -static-libgcc -static-libstdc++ -Wl,-Bstatic,--whole-archive -lwinpthread -Wl,--no-whole-archive\r\n```\r\n\r\n```\r\nc:/dev/mingw/x86_64-10.2.0/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/10.2.0/../../../../x86_64-w64-mingw32/bin/ld.exe: c:/dev/mingw/x86_64-10.2.0/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/10.2.0/../../../../lib\\libgomp.a(oacc-profiling.o):(.text+0x7de): undefined reference to `dlopen'\r\nc:/dev/mingw/x86_64-10.2.0/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/10.2.0/../../../../x86_64-w64-mingw32/bin/ld.exe: c:/dev/mingw/x86_64-10.2.0/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/10.2.0/../../../../lib\\libgomp.a(oacc-profiling.o):(.text+0x7f9): undefined reference to `dlsym'\r\nc:/dev/mingw/x86_64-10.2.0/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/10.2.0/../../../../x86_64-w64-mingw32/bin/ld.exe: c:/dev/mingw/x86_64-10.2.0/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/10.2.0/../../../../lib\\libgomp.a(oacc-profiling.o):(.text+0x861): undefined reference to `dlerror'\r\nc:/dev/mingw/x86_64-10.2.0/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/10.2.0/../../../../x86_64-w64-mingw32/bin/ld.exe: c:/dev/mingw/x86_64-10.2.0/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/10.2.0/../../../../lib\\libgomp.a(oacc-profiling.o):(.text+0x877): undefined reference to `dlclose'\r\nc:/dev/mingw/x86_64-10.2.0/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/10.2.0/../../../../x86_64-w64-mingw32/bin/ld.exe: c:/dev/mingw/x86_64-10.2.0/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/10.2.0/../../../../lib\\libgomp.a(oacc-profiling.o):(.text+0x880): undefined reference to `dlerror'\r\ncollect2.exe: error: ld returned 1 exit status\r\nerror: command 'C:\\\\Dev\\\\MinGW\\\\x86_64-10.2.0\\\\mingw64\\\\bin\\\\gcc.exe' failed with exit status 1\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - Windows 10\r\n - Python 3.8.5\r\n - Cython 0.29.21\r\n- MinGW \"GCC 10.2.0 + LLVM/Clang 10.0.1 + MinGW-w64 8.0.0 (release 1)\" from the \"https://github.com/brechtsanders/winlibs_mingw/releases\"\r\n",
    "closed_at": "2020-09-30T11:21:35Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Thanks for the report. This may be, but is not necessarily, something related to the compiler version. It might also be an installation or configuration issue of the new compiler on your side (just saying). Could you try to investigate what changed between the two versions (or installations) that might cause this? We have no way to investigate this kind of issue on our side.",
            "created_at": "2020-09-30T05:14:11Z",
            "html_url": "https://github.com/cython/cython/issues/3851#issuecomment-701160388",
            "id": 701160388,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3851",
            "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTE2MDM4OA==",
            "performed_via_github_app": null,
            "updated_at": "2020-09-30T05:14:11Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/701160388",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@alkalinin Hello! I'm working around with OpenMP library too.\r\nIt seems that you did not link `libgomp.a` for the library.\r\n\r\nMy linker option is:\r\n\r\n```python\r\n# For g++ & clang++\r\nlink_args = ['-fopenmp']\r\n# For msvc\r\nlink_args_msvc = []\r\n# For mingw\r\nlink_args_static = [\r\n    '-static-libgcc',\r\n    '-static-libstdc++',\r\n    '-Wl,-Bstatic,--whole-archive',\r\n    '-lwinpthread',\r\n    '-lgomp',  # GOMP\r\n    '-Wl,--no-whole-archive',\r\n]\r\n```\r\n\r\nMy GCC version is 8.1.0.\r\nTry to see if this solves your problem.",
            "created_at": "2020-09-30T07:18:47Z",
            "html_url": "https://github.com/cython/cython/issues/3851#issuecomment-701208719",
            "id": 701208719,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3851",
            "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTIwODcxOQ==",
            "performed_via_github_app": null,
            "updated_at": "2020-09-30T07:22:15Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/701208719",
            "user": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/10264720?v=4",
                "events_url": "https://api.github.com/users/KmolYuan/events{/privacy}",
                "followers_url": "https://api.github.com/users/KmolYuan/followers",
                "following_url": "https://api.github.com/users/KmolYuan/following{/other_user}",
                "gists_url": "https://api.github.com/users/KmolYuan/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/KmolYuan",
                "id": 10264720,
                "login": "KmolYuan",
                "node_id": "MDQ6VXNlcjEwMjY0NzIw",
                "organizations_url": "https://api.github.com/users/KmolYuan/orgs",
                "received_events_url": "https://api.github.com/users/KmolYuan/received_events",
                "repos_url": "https://api.github.com/users/KmolYuan/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/KmolYuan/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/KmolYuan/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/KmolYuan"
            }
        },
        {
            "author_association": "NONE",
            "body": "Thanks all for the help. Probably I've identified the problem. In migration GCC 9.3.0 --> 10.2.0 we get new dependence. Probably we have to include this dependence into the static build. See detailed reports below. Now I am trying to find a way how to include 'libdl' dependence into the static build.\r\n\r\nSee https://github.com/alkalinin/numerical_notes/tree/master/test_cython for the source code.\r\n\r\n# DLL's dependencies while use dynamic linking\r\n\r\n|  GCC 9.3.0  | GCC 10.2.0 |\r\n| -- | -- |\r\n| libgcc_s_seh-1.dll | libgcc_s_seh-1.dll |\r\n| libgomp-1.dll | libgomp-1.dll | \r\n| libwinpthread-1.dll | libwinpthread-1.dll |  \r\n| | **libdl.dll** |\r\n\r\n# Cython build test report \r\n\r\n## GCC 9.3.0, dynamic linking\r\n\r\nCompiler specs\r\n\r\n```console\r\nCOLLECT_GCC=gcc\r\nCOLLECT_LTO_WRAPPER=c:/dev/mingw/x86_64-9.3.0/mingw64/bin/../libexec/gcc/x86_64-w64-mingw32/9.3.0/lto-wrapper.exe\r\nTarget: x86_64-w64-mingw32\r\nConfigured with: ../configure --prefix=/R/winlibs64_stage/_TMP_/inst_gcc-9.3.0/share/gcc --build=x86_64-w64-mingw32 --host=x86_64-w64-mingw32 --with-pkgversion='MinGW-W64 x86_64-posix-seh, built by Brecht Sanders' --with-tune=generic --enable-checking=release --enable-threads=posix --disable-sjlj-exceptions --disable-libunwind-exceptions --enable-serial-configure --disable-bootstrap --enable-host-shared --enable-plugin --enable-default-ssp --disable-rpath --disable-libstdcxx-pch --enable-libstdcxx-time=yes --disable-libstdcxx-debug --disable-version-specific-runtime-libs --with-stabs --disable-symvers --enable-languages=c,c++,fortran,lto,objc,obj-c++,d --disable-gold --disable-nls --disable-stage1-checking --disable-win32-registry --disable-multilib --enable-ld --enable-libquadmath --enable-libada --enable-libssp --enable-libstdcxx --enable-lto --enable-fully-dynamic-string --enable-libgomp --enable-graphite --enable-mingw-wildcard --with-mpc=/d/winlibs64_stage/custombuilt --with-mpfr=/d/winlibs64_stage/custombuilt --with-gmp=/d/winlibs64_stage/custombuilt --with-isl=/d/winlibs64_stage/custombuilt --enable-install-libiberty --enable-__cxa_atexit --without-included-gettext --with-diagnostics-color=auto --with-libiconv --with-system-zlib --with-build-sysroot=/R/winlibs64_stage/_TMP_/gcc-9.3.0/build_mingw/mingw-w64\r\nThread model: posix\r\ngcc version 9.3.0 (MinGW-W64 x86_64-posix-seh, built by Brecht Sanders)\r\n```\r\n\r\nCompiler flags\r\n\r\n```python\r\ngcc_cflags = [\r\n    '-O3', '-fopenmp',\r\n    '-fvisibility=hidden', '-flto', '-fno-fat-lto-objects',\r\n    '-DMS_WIN64'\r\n]\r\n\r\ngcc_lflags = [\r\n\r\n]\r\n```\r\n\r\nBuild log\r\n\r\n```console\r\n[1/1] Cythonizing distance_matrix_ext.pyx\r\nrunning build_ext\r\nbuilding 'distance_matrix_ext' extension\r\ncreating build\r\ncreating build\\temp.win-amd64-3.8\r\ncreating build\\temp.win-amd64-3.8\\Release\r\nC:\\Dev\\MinGW\\x86_64-9.3.0\\mingw64\\bin\\gcc.exe -mdll -O -Wall -IC:\\Dev\\Python\\python-3.8.5\\lib\\site-packages\\numpy\\core\\include -IC:\\Dev\\Python\\python-3.8.5\\include -IC:\\Dev\\Python\\python-3.8.5\\include -c distance_matrix_ext.c -o build\\temp.win-amd64-3.8\\Release\\distance_matrix_ext.o -O3 -fopenmp -fvisibility=hidden -flto -fno-fat-lto-objects -DMS_WIN64\r\nwriting build\\temp.win-amd64-3.8\\Release\\distance_matrix_ext.cp38-win_amd64.def\r\nC:\\Dev\\MinGW\\x86_64-9.3.0\\mingw64\\bin\\gcc.exe -shared -fopenmp -s build\\temp.win-amd64-3.8\\Release\\distance_matrix_ext.o build\\temp.win-amd64-3.8\\Release\\distance_matrix_ext.cp38-win_amd64.def -LC:\\Dev\\Python\\python-3.8.5\\libs -LC:\\Dev\\Python\\python-3.8.5\\PCbuild\\amd64 -lpython38 -o c:\\WST-Stage\\numerical_notes\\test_cython\\distance_matrix_ext.cp38-win_amd64.pyd\r\n```\r\n\r\nCopy dll to working folder\r\n\r\n```console\r\n2020-04-29  13:37  1,275,362 libgcc_s_seh-1.dll\r\n2020-04-29  13:37    188,942 libgomp-1.dll\r\n2020-04-29  13:37     57,870 libwinpthread-1.dll\r\n```\r\n\r\nResults\r\n\r\n```console\r\n>>> python.exe distance_matrix.py\r\n\r\nNumPy:\r\n  time: 0.971 s.\r\n\r\nCython:\r\n  valid: True\r\n  time: 0.138 s.\r\n\r\nCython Parallel:\r\n  valid: True\r\n  time: 0.086 s.\r\n```\r\n\r\n## GCC 9.3.0, static linking\r\n\r\nCompiler specs\r\n\r\n```console\r\nCOLLECT_GCC=gcc\r\nCOLLECT_LTO_WRAPPER=c:/dev/mingw/x86_64-9.3.0/mingw64/bin/../libexec/gcc/x86_64-w64-mingw32/9.3.0/lto-wrapper.exe\r\nTarget: x86_64-w64-mingw32\r\nConfigured with: ../configure --prefix=/R/winlibs64_stage/_TMP_/inst_gcc-9.3.0/share/gcc --build=x86_64-w64-mingw32 --host=x86_64-w64-mingw32 --with-pkgversion='MinGW-W64 x86_64-posix-seh, built by Brecht Sanders' --with-tune=generic --enable-checking=release --enable-threads=posix --disable-sjlj-exceptions --disable-libunwind-exceptions --enable-serial-configure --disable-bootstrap --enable-host-shared --enable-plugin --enable-default-ssp --disable-rpath --disable-libstdcxx-pch --enable-libstdcxx-time=yes --disable-libstdcxx-debug --disable-version-specific-runtime-libs --with-stabs --disable-symvers --enable-languages=c,c++,fortran,lto,objc,obj-c++,d --disable-gold --disable-nls --disable-stage1-checking --disable-win32-registry --disable-multilib --enable-ld --enable-libquadmath --enable-libada --enable-libssp --enable-libstdcxx --enable-lto --enable-fully-dynamic-string --enable-libgomp --enable-graphite --enable-mingw-wildcard --with-mpc=/d/winlibs64_stage/custombuilt --with-mpfr=/d/winlibs64_stage/custombuilt --with-gmp=/d/winlibs64_stage/custombuilt --with-isl=/d/winlibs64_stage/custombuilt --enable-install-libiberty --enable-__cxa_atexit --without-included-gettext --with-diagnostics-color=auto --with-libiconv --with-system-zlib --with-build-sysroot=/R/winlibs64_stage/_TMP_/gcc-9.3.0/build_mingw/mingw-w64\r\nThread model: posix\r\ngcc version 9.3.0 (MinGW-W64 x86_64-posix-seh, built by Brecht Sanders)\r\n```\r\n\r\nCompiler flags\r\n\r\n```python\r\ngcc_cflags = [\r\n    '-O3', '-fopenmp',\r\n    '-fvisibility=hidden', '-flto', '-fno-fat-lto-objects',\r\n    '-DMS_WIN64'\r\n]\r\n\r\ngcc_lflags_static = [\r\n    '-static-libgcc',\r\n    '-static-libstdc++',\r\n    '-Wl,-Bstatic,--whole-archive',\r\n    '-lwinpthread',\r\n    '-Wl,--no-whole-archive'\r\n]\r\n```\r\n\r\nBuild log\r\n\r\n```console\r\nCompiling distance_matrix_ext.pyx because it changed.\r\n[1/1] Cythonizing distance_matrix_ext.pyx\r\nrunning build_ext\r\nbuilding 'distance_matrix_ext' extension\r\ncreating build\r\ncreating build\\temp.win-amd64-3.8\r\ncreating build\\temp.win-amd64-3.8\\Release\r\nC:\\Dev\\MinGW\\x86_64-9.3.0\\mingw64\\bin\\gcc.exe -mdll -O -Wall -IC:\\Dev\\Python\\python-3.8.5\\lib\\site-packages\\numpy\\core\\include -IC:\\Dev\\Python\\python-3.8.5\\include -IC:\\Dev\\Python\\python-3.8.5\\include -c distance_matrix_ext.c -o build\\temp.win-amd64-3.8\\Release\\distance_matrix_ext.o -O3 -fopenmp -fvisibility=hidden -flto -fno-fat-lto-objects -DMS_WIN64\r\nwriting build\\temp.win-amd64-3.8\\Release\\distance_matrix_ext.cp38-win_amd64.def\r\nC:\\Dev\\MinGW\\x86_64-9.3.0\\mingw64\\bin\\gcc.exe -shared -fopenmp -s build\\temp.win-amd64-3.8\\Release\\distance_matrix_ext.o build\\temp.win-amd64-3.8\\Release\\distance_matrix_ext.cp38-win_amd64.def -LC:\\Dev\\Python\\python-3.8.5\\libs -LC:\\Dev\\Python\\python-3.8.5\\PCbuild\\amd64 -lpython38 -o c:\\WST-Stage\\numerical_notes\\test_cython\\distance_matrix_ext.cp38-win_amd64.pyd -static-libgcc -static-libstdc++ -Wl,-Bstatic,--whole-archive -lwinpthread -Wl,--no-whole-archive\r\n```\r\n\r\nCopy dll to working folder\r\n\r\n```console\r\n```\r\n\r\nResults\r\n\r\n```console\r\n>>> python.exe distance_matrix.py\r\n\r\nNumPy:\r\n  time: 0.990 s.\r\n\r\nCython:\r\n  valid: True\r\n  time: 0.129 s.\r\n\r\nCython Parallel:\r\n  valid: True\r\n  time: 0.077 s.\r\n```\r\n\r\n## GCC 10.2.0, dynamic linking\r\n\r\nCompiler specs\r\n\r\n```console\r\nUsing built-in specs.\r\nCOLLECT_GCC=gcc\r\nCOLLECT_LTO_WRAPPER=c:/dev/mingw/x86_64-10.2.0/mingw64/bin/../libexec/gcc/x86_64-w64-mingw32/10.2.0/lto-wrapper.exe\r\nTarget: x86_64-w64-mingw32\r\nConfigured with: ../configure --prefix=/R/winlibs64_stage/inst_gcc-10.2.0/share/gcc --build=x86_64-w64-mingw32 --host=x86_64-w64-mingw32 --with-pkgversion='MinGW-W64 x86_64-posix-seh, built by Brecht Sanders' --with-tune=generic --enable-checking=release --enable-threads=posix --disable-sjlj-exceptions --disable-libunwind-exceptions --enable-serial-configure --disable-bootstrap --enable-host-shared --enable-plugin --enable-default-ssp --disable-rpath --disable-libstdcxx-pch --enable-libstdcxx-time=yes --disable-libstdcxx-debug --disable-version-specific-runtime-libs --with-stabs --disable-symvers --enable-languages=c,c++,fortran,lto,objc,obj-c++,d --disable-gold --disable-nls --disable-stage1-checking --disable-win32-registry --disable-multilib --enable-ld --enable-libquadmath --enable-libada --enable-libssp --enable-libstdcxx --enable-lto --enable-fully-dynamic-string --enable-libgomp --enable-graphite --enable-mingw-wildcard --with-mpc=/d/Prog/winlibs64_stage/custombuilt --with-mpfr=/d/Prog/winlibs64_stage/custombuilt --with-gmp=/d/Prog/winlibs64_stage/custombuilt --with-isl=/d/Prog/winlibs64_stage/custombuilt --enable-install-libiberty --enable-__cxa_atexit --without-included-gettext --with-diagnostics-color=auto --with-libiconv --with-system-zlib --with-build-sysroot=/R/winlibs64_stage/gcc-10.2.0/build_mingw/mingw-w64\r\nThread model: posix\r\nSupported LTO compression algorithms: zlib zstd\r\ngcc version 10.2.0 (MinGW-W64 x86_64-posix-seh, built by Brecht Sanders)\r\n```\r\n\r\nCompiler flags\r\n\r\n```python\r\ngcc_cflags = [\r\n    '-O3', '-fopenmp',\r\n    '-fvisibility=hidden', '-flto', '-fno-fat-lto-objects',\r\n    '-DMS_WIN64'\r\n]\r\n\r\ngcc_lflags = [\r\n\r\n]\r\n```\r\n\r\nBuild log\r\n\r\n```console\r\nCompiling distance_matrix_ext.pyx because it changed.\r\n[1/1] Cythonizing distance_matrix_ext.pyx\r\nrunning build_ext\r\nbuilding 'distance_matrix_ext' extension\r\ncreating build\r\ncreating build\\temp.win-amd64-3.8\r\ncreating build\\temp.win-amd64-3.8\\Release\r\nC:\\Dev\\MinGW\\x86_64-10.2.0\\mingw64\\bin\\gcc.exe -mdll -O -Wall -IC:\\Dev\\Python\\python-3.8.5\\lib\\site-packages\\numpy\\core\\include -IC:\\Dev\\Python\\python-3.8.5\\include -IC:\\Dev\\Python\\python-3.8.5\\include -c distance_matrix_ext.c -o build\\temp.win-amd64-3.8\\Release\\distance_matrix_ext.o -O3 -fopenmp -fvisibility=hidden -flto -fno-fat-lto-objects -DMS_WIN64\r\nwriting build\\temp.win-amd64-3.8\\Release\\distance_matrix_ext.cp38-win_amd64.def\r\nC:\\Dev\\MinGW\\x86_64-10.2.0\\mingw64\\bin\\gcc.exe -shared -fopenmp -s build\\temp.win-amd64-3.8\\Release\\distance_matrix_ext.o build\\temp.win-amd64-3.8\\Release\\distance_matrix_ext.cp38-win_amd64.def -LC:\\Dev\\Python\\python-3.8.5\\libs -LC:\\Dev\\Python\\python-3.8.5\\PCbuild\\amd64 -lpython38 -o c:\\WST-Stage\\numerical_notes\\test_cython\\distance_matrix_ext.cp38-win_amd64.pyd\r\n```\r\n\r\nCopy dll to working folder\r\n\r\n```console\r\n2020-09-19  14:03   46,606 libdl.dll\r\n2020-09-20  09:39  558,603 libgcc_s_seh-1.dll\r\n2020-09-20  09:39  251,005 libgomp-1.dll\r\n2020-09-20  09:39   90,084 libwinpthread-1.dll\r\n```\r\n\r\nResults\r\n\r\n```console\r\n>>> python distance_matrix.py\r\nNumPy:\r\n  time: 0.966 s.\r\n\r\nCython:\r\n  valid: True\r\n  time: 0.156 s.\r\n\r\nCython Parallel:\r\n  valid: True\r\n  time: 0.077 s.\r\n```\r\n\r\n## GCC 10.2.0, static linking\r\n\r\nCompiler specs\r\n\r\n```console\r\nUsing built-in specs.\r\nCOLLECT_GCC=gcc\r\nCOLLECT_LTO_WRAPPER=c:/dev/mingw/x86_64-10.2.0/mingw64/bin/../libexec/gcc/x86_64-w64-mingw32/10.2.0/lto-wrapper.exe\r\nTarget: x86_64-w64-mingw32\r\nConfigured with: ../configure --prefix=/R/winlibs64_stage/inst_gcc-10.2.0/share/gcc --build=x86_64-w64-mingw32 --host=x86_64-w64-mingw32 --with-pkgversion='MinGW-W64 x86_64-posix-seh, built by Brecht Sanders' --with-tune=generic --enable-checking=release --enable-threads=posix --disable-sjlj-exceptions --disable-libunwind-exceptions --enable-serial-configure --disable-bootstrap --enable-host-shared --enable-plugin --enable-default-ssp --disable-rpath --disable-libstdcxx-pch --enable-libstdcxx-time=yes --disable-libstdcxx-debug --disable-version-specific-runtime-libs --with-stabs --disable-symvers --enable-languages=c,c++,fortran,lto,objc,obj-c++,d --disable-gold --disable-nls --disable-stage1-checking --disable-win32-registry --disable-multilib --enable-ld --enable-libquadmath --enable-libada --enable-libssp --enable-libstdcxx --enable-lto --enable-fully-dynamic-string --enable-libgomp --enable-graphite --enable-mingw-wildcard --with-mpc=/d/Prog/winlibs64_stage/custombuilt --with-mpfr=/d/Prog/winlibs64_stage/custombuilt --with-gmp=/d/Prog/winlibs64_stage/custombuilt --with-isl=/d/Prog/winlibs64_stage/custombuilt --enable-install-libiberty --enable-__cxa_atexit --without-included-gettext --with-diagnostics-color=auto --with-libiconv --with-system-zlib --with-build-sysroot=/R/winlibs64_stage/gcc-10.2.0/build_mingw/mingw-w64\r\nThread model: posix\r\nSupported LTO compression algorithms: zlib zstd\r\ngcc version 10.2.0 (MinGW-W64 x86_64-posix-seh, built by Brecht Sanders)\r\n```\r\n\r\nCompiler flags\r\n\r\n```python\r\ngcc_cflags = [\r\n    '-O3', '-fopenmp',\r\n    '-fvisibility=hidden', '-flto', '-fno-fat-lto-objects',\r\n    '-DMS_WIN64'\r\n]\r\n\r\ngcc_lflags_static = [\r\n    '-static-libgcc',\r\n    '-static-libstdc++',\r\n    '-Wl,-Bstatic,--whole-archive',\r\n    '-lwinpthread',\r\n    '-Wl,--no-whole-archive'\r\n]\r\n```\r\n\r\nBuild log\r\n\r\n```console\r\nCompiling distance_matrix_ext.pyx because it changed.\r\n[1/1] Cythonizing distance_matrix_ext.pyx\r\nrunning build_ext\r\nbuilding 'distance_matrix_ext' extension\r\ncreating build\r\ncreating build\\temp.win-amd64-3.8\r\ncreating build\\temp.win-amd64-3.8\\Release\r\nC:\\Dev\\MinGW\\x86_64-10.2.0\\mingw64\\bin\\gcc.exe -mdll -O -Wall -IC:\\Dev\\Python\\python-3.8.5\\lib\\site-packages\\numpy\\core\\include -IC:\\Dev\\Python\\python-3.8.5\\include -IC:\\Dev\\Python\\python-3.8.5\\include -c distance_matrix_ext.c -o build\\temp.win-amd64-3.8\\Release\\distance_matrix_ext.o -O3 -fopenmp -fvisibility=hidden -flto -fno-fat-lto-objects -DMS_WIN64\r\nwriting build\\temp.win-amd64-3.8\\Release\\distance_matrix_ext.cp38-win_amd64.def\r\nC:\\Dev\\MinGW\\x86_64-10.2.0\\mingw64\\bin\\gcc.exe -shared -fopenmp -s build\\temp.win-amd64-3.8\\Release\\distance_matrix_ext.o build\\temp.win-amd64-3.8\\Release\\distance_matrix_ext.cp38-win_amd64.def -LC:\\Dev\\Python\\python-3.8.5\\libs -LC:\\Dev\\Python\\python-3.8.5\\PCbuild\\amd64 -lpython38 -o c:\\WST-Stage\\numerical_notes\\test_cython\\distance_matrix_ext.cp38-win_amd64.pyd -static-libgcc -static-libstdc++ -Wl,-Bstatic,--whole-archive -lwinpthread -Wl,--no-whole-archive\r\n\r\nc:/dev/mingw/x86_64-10.2.0/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/10.2.0/../../../../x86_64-w64-mingw32/bin/ld.exe: c:/dev/mingw/x86_64-10.2.0/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/10.2.0/../../../../lib\\libgomp.a(oacc-profiling.o):(.text+0x7de): undefined reference to `dlopen'\r\nc:/dev/mingw/x86_64-10.2.0/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/10.2.0/../../../../x86_64-w64-mingw32/bin/ld.exe: c:/dev/mingw/x86_64-10.2.0/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/10.2.0/../../../../lib\\libgomp.a(oacc-profiling.o):(.text+0x7f9): undefined reference to `dlsym'\r\nc:/dev/mingw/x86_64-10.2.0/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/10.2.0/../../../../x86_64-w64-mingw32/bin/ld.exe: c:/dev/mingw/x86_64-10.2.0/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/10.2.0/../../../../lib\\libgomp.a(oacc-profiling.o):(.text+0x861): undefined reference to `dlerror'\r\nc:/dev/mingw/x86_64-10.2.0/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/10.2.0/../../../../x86_64-w64-mingw32/bin/ld.exe: c:/dev/mingw/x86_64-10.2.0/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/10.2.0/../../../../lib\\libgomp.a(oacc-profiling.o):(.text+0x877): undefined reference to `dlclose'\r\nc:/dev/mingw/x86_64-10.2.0/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/10.2.0/../../../../x86_64-w64-mingw32/bin/ld.exe: c:/dev/mingw/x86_64-10.2.0/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/10.2.0/../../../../lib\\libgomp.a(oacc-profiling.o):(.text+0x880): undefined reference to `dlerror'\r\ncollect2.exe: error: ld returned 1 exit status\r\nC:\\Dev\\Python\\python-3.8.5\\lib\\site-packages\\Cython\\Compiler\\Main.py:369: FutureWarning: Cython directive 'language_level' not set, using 2 for now (Py2). This will change in a later release! File: c:\\WST-Stage\\numerical_notes\\test_cython\\distance_matrix_ext.pyx\r\n  tree = Parsing.p_module(s, pxd, full_module_name)\r\nerror: command 'C:\\\\Dev\\\\MinGW\\\\x86_64-10.2.0\\\\mingw64\\\\bin\\\\gcc.exe' failed with exit status 1\r\n```",
            "created_at": "2020-09-30T10:25:26Z",
            "html_url": "https://github.com/cython/cython/issues/3851#issuecomment-701303640",
            "id": 701303640,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3851",
            "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTMwMzY0MA==",
            "performed_via_github_app": null,
            "updated_at": "2020-09-30T10:29:29Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/701303640",
            "user": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/1408589?v=4",
                "events_url": "https://api.github.com/users/alkalinin/events{/privacy}",
                "followers_url": "https://api.github.com/users/alkalinin/followers",
                "following_url": "https://api.github.com/users/alkalinin/following{/other_user}",
                "gists_url": "https://api.github.com/users/alkalinin/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/alkalinin",
                "id": 1408589,
                "login": "alkalinin",
                "node_id": "MDQ6VXNlcjE0MDg1ODk=",
                "organizations_url": "https://api.github.com/users/alkalinin/orgs",
                "received_events_url": "https://api.github.com/users/alkalinin/received_events",
                "repos_url": "https://api.github.com/users/alkalinin/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/alkalinin/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/alkalinin/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/alkalinin"
            }
        },
        {
            "author_association": "NONE",
            "body": "Problem is SOLVED.\r\n\r\nSolution steps:\r\n1. Install https://packages.msys2.org/package/mingw-w64-x86_64-dlfcn?repo=mingw64 \r\n2. Add compiling flags\r\n\r\n```python\r\ngcc_lflags = [\r\n    '-static-libgcc',\r\n    '-static-libstdc++',\r\n    '-Wl,-Bstatic,--whole-archive',\r\n    '-lwinpthread',\r\n    '-ldl',\r\n    '-Wl,--no-whole-archive'\r\n]\r\n```",
            "created_at": "2020-09-30T11:16:42Z",
            "html_url": "https://github.com/cython/cython/issues/3851#issuecomment-701326010",
            "id": 701326010,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3851",
            "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTMyNjAxMA==",
            "performed_via_github_app": null,
            "updated_at": "2020-09-30T11:16:42Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/701326010",
            "user": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/1408589?v=4",
                "events_url": "https://api.github.com/users/alkalinin/events{/privacy}",
                "followers_url": "https://api.github.com/users/alkalinin/followers",
                "following_url": "https://api.github.com/users/alkalinin/following{/other_user}",
                "gists_url": "https://api.github.com/users/alkalinin/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/alkalinin",
                "id": 1408589,
                "login": "alkalinin",
                "node_id": "MDQ6VXNlcjE0MDg1ODk=",
                "organizations_url": "https://api.github.com/users/alkalinin/orgs",
                "received_events_url": "https://api.github.com/users/alkalinin/received_events",
                "repos_url": "https://api.github.com/users/alkalinin/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/alkalinin/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/alkalinin/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/alkalinin"
            }
        }
    ],
    "comments": 4,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/3851/comments",
    "created_at": "2020-09-29T15:29:48Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/1408589?v=4",
                "events_url": "https://api.github.com/users/alkalinin/events{/privacy}",
                "followers_url": "https://api.github.com/users/alkalinin/followers",
                "following_url": "https://api.github.com/users/alkalinin/following{/other_user}",
                "gists_url": "https://api.github.com/users/alkalinin/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/alkalinin",
                "id": 1408589,
                "login": "alkalinin",
                "node_id": "MDQ6VXNlcjE0MDg1ODk=",
                "organizations_url": "https://api.github.com/users/alkalinin/orgs",
                "received_events_url": "https://api.github.com/users/alkalinin/received_events",
                "repos_url": "https://api.github.com/users/alkalinin/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/alkalinin/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/alkalinin/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/alkalinin"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2020-09-29T15:30:24Z",
            "event": "renamed",
            "id": 3820274012,
            "node_id": "MDE3OlJlbmFtZWRUaXRsZUV2ZW50MzgyMDI3NDAxMg==",
            "performed_via_github_app": null,
            "rename": {
                "from": "[BUG] ",
                "to": "[BUG] New version of the mingw-w64 failes to build code with static linking"
            },
            "url": "https://api.github.com/repos/cython/cython/issues/events/3820274012"
        },
        {
            "actor": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/1408589?v=4",
                "events_url": "https://api.github.com/users/alkalinin/events{/privacy}",
                "followers_url": "https://api.github.com/users/alkalinin/followers",
                "following_url": "https://api.github.com/users/alkalinin/following{/other_user}",
                "gists_url": "https://api.github.com/users/alkalinin/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/alkalinin",
                "id": 1408589,
                "login": "alkalinin",
                "node_id": "MDQ6VXNlcjE0MDg1ODk=",
                "organizations_url": "https://api.github.com/users/alkalinin/orgs",
                "received_events_url": "https://api.github.com/users/alkalinin/received_events",
                "repos_url": "https://api.github.com/users/alkalinin/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/alkalinin/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/alkalinin/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/alkalinin"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2020-09-30T07:18:47Z",
            "event": "mentioned",
            "id": 3823020911,
            "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MzgyMzAyMDkxMQ==",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/3823020911"
        },
        {
            "actor": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/1408589?v=4",
                "events_url": "https://api.github.com/users/alkalinin/events{/privacy}",
                "followers_url": "https://api.github.com/users/alkalinin/followers",
                "following_url": "https://api.github.com/users/alkalinin/following{/other_user}",
                "gists_url": "https://api.github.com/users/alkalinin/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/alkalinin",
                "id": 1408589,
                "login": "alkalinin",
                "node_id": "MDQ6VXNlcjE0MDg1ODk=",
                "organizations_url": "https://api.github.com/users/alkalinin/orgs",
                "received_events_url": "https://api.github.com/users/alkalinin/received_events",
                "repos_url": "https://api.github.com/users/alkalinin/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/alkalinin/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/alkalinin/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/alkalinin"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2020-09-30T07:18:47Z",
            "event": "subscribed",
            "id": 3823020914,
            "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDM4MjMwMjA5MTQ=",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/3823020914"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2020-09-30T11:21:32Z",
            "event": "labeled",
            "id": 3823991756,
            "label": {
                "color": "000000",
                "name": "R: third party"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDM4MjM5OTE3NTY=",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/3823991756"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2020-09-30T11:21:35Z",
            "event": "closed",
            "id": 3823991959,
            "node_id": "MDExOkNsb3NlZEV2ZW50MzgyMzk5MTk1OQ==",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/3823991959"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/3851/events",
    "html_url": "https://github.com/cython/cython/issues/3851",
    "id": 711228500,
    "labels": [
        {
            "color": "000000",
            "default": false,
            "description": "",
            "id": 1840758668,
            "name": "R: third party",
            "node_id": "MDU6TGFiZWwxODQwNzU4NjY4",
            "url": "https://api.github.com/repos/cython/cython/labels/R:%20third%20party"
        }
    ],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/3851/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU3MTEyMjg1MDA=",
    "number": 3851,
    "performed_via_github_app": null,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "closed",
    "title": "[BUG] New version of the mingw-w64 failes to build code with static linking",
    "updated_at": "2020-09-30T11:21:35Z",
    "url": "https://api.github.com/repos/cython/cython/issues/3851",
    "user": {
        "avatar_url": "https://avatars3.githubusercontent.com/u/1408589?v=4",
        "events_url": "https://api.github.com/users/alkalinin/events{/privacy}",
        "followers_url": "https://api.github.com/users/alkalinin/followers",
        "following_url": "https://api.github.com/users/alkalinin/following{/other_user}",
        "gists_url": "https://api.github.com/users/alkalinin/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/alkalinin",
        "id": 1408589,
        "login": "alkalinin",
        "node_id": "MDQ6VXNlcjE0MDg1ODk=",
        "organizations_url": "https://api.github.com/users/alkalinin/orgs",
        "received_events_url": "https://api.github.com/users/alkalinin/received_events",
        "repos_url": "https://api.github.com/users/alkalinin/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/alkalinin/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/alkalinin/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/alkalinin"
    }
}