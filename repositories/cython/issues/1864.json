{
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "Using the compiler directive [`binding`](http://cython.readthedocs.io/en/latest/src/reference/compilation.html#compiler-directives) and a `cdef class`, `inspect.signature` and `inspect.getfullargspec` both return an incorrect signature for methods: keyword arguments are presented as if they are positional.",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Could you show an example?",
            "created_at": "2017-09-09T09:05:56Z",
            "html_url": "https://github.com/cython/cython/issues/1864#issuecomment-328264875",
            "id": 328264875,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/1864",
            "node_id": "MDEyOklzc3VlQ29tbWVudDMyODI2NDg3NQ==",
            "updated_at": "2017-09-09T09:05:56Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/328264875",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Contents of the file `foo.pyx`:\r\n\r\n```cython\r\n# cython: binding=True\r\n\r\n\r\ncdef class Foo(object):\r\n\r\n    def wrong_kw_1(self, a, b=False):\r\n        pass\r\n\r\n    cpdef wrong_kw_2(self, a, b=False):\r\n        pass\r\n\r\n\r\ndef correct_kw(self, u, v=True):\r\n    pass\r\n\r\n\r\ncpdef wrong_kw_3(self, u, v=True):\r\n    pass\r\n```\r\n\r\nRun as follows:\r\n\r\n```python\r\nimport inspect\r\nimport pyximport\r\npyximport.install()\r\n\r\nimport foo\r\n\r\n\r\na = foo.Foo()\r\n\r\n# wrong signature for `def` method\r\n>>> inspect.signature(a.wrong_kw_1)\r\n<Signature (a, b)>\r\n\r\n# wrong signature for `cpdef` method too\r\n>>> inspect.signature(a.wrong_kw_2)\r\n<Signature (a, b)>\r\n\r\n# correct signature for `def` function in module's namespace\r\n>>> inspect.signature(foo.correct_kw)\r\n<Signature (self, u, v=True)>\r\n\r\n# wrong signature for `cpdef` function in module's namespace\r\n>>> inspect.signature(hehe.correct_kw_too)\r\n<Signature (self, u, v)>\r\n```\r\n\r\nThe situation is a little worse than the OP reports: introspection yields wrong signatures for `cpdef` functions too, besides for methods.\r\n\r\n```\r\npython == 3.5.2rc1+\r\ncython == 0.26.1\r\nipython == 6.1.0\r\n```",
            "created_at": "2017-09-09T12:24:40Z",
            "html_url": "https://github.com/cython/cython/issues/1864#issuecomment-328274068",
            "id": 328274068,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/1864",
            "node_id": "MDEyOklzc3VlQ29tbWVudDMyODI3NDA2OA==",
            "updated_at": "2017-09-09T12:24:55Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/328274068",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/3135273?v=4",
                "events_url": "https://api.github.com/users/johnyf/events{/privacy}",
                "followers_url": "https://api.github.com/users/johnyf/followers",
                "following_url": "https://api.github.com/users/johnyf/following{/other_user}",
                "gists_url": "https://api.github.com/users/johnyf/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/johnyf",
                "id": 3135273,
                "login": "johnyf",
                "node_id": "MDQ6VXNlcjMxMzUyNzM=",
                "organizations_url": "https://api.github.com/users/johnyf/orgs",
                "received_events_url": "https://api.github.com/users/johnyf/received_events",
                "repos_url": "https://api.github.com/users/johnyf/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/johnyf/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/johnyf/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/johnyf"
            }
        },
        {
            "author_association": "NONE",
            "body": "Looks like we're not correctly populating the defaults for these methods.\n\nOn Sat, Sep 9, 2017 at 5:24 AM, Ioannis Filippidis <notifications@github.com\n> wrote:\n\n> Contents of the file foo.pyx:\n>\n> # cython: binding=True\n>\n>\n> cdef class Foo(object):\n>\n>     def wrong_kw_1(self, a, b=False):\n>         pass\n>\n>     cpdef wrong_kw_2(self, a, b=False):\n>         pass\n>\n> def correct_kw(self, u, v=True):\n>     pass\n>\n> cpdef wrong_kw_3(self, u, v=True):\n>     pass\n>\n> Run as follows:\n>\n> import inspectimport pyximport\n> pyximport.install()\n> import foo\n>\n>\n> a = foo.Foo()\n> # wrong signature for `def` method>>> inspect.signature(a.wrong_kw_1)<Signature (a, b)>\n> # wrong signature for `cpdef` method too>>> inspect.signature(a.wrong_kw_2)<Signature (a, b)>\n> # correct signature for `def` function in module's namespace>>> inspect.signature(foo.correct_kw)<Signature (self, u, v=True)>\n> # wrong signature for `cpdef` function in module's namespace>>> inspect.signature(hehe.correct_kw_too)<Signature (self, u, v)>\n>\n> The situation is a little worse than the OP reports: introspection yields\n> wrong signatures for cpdef functions too, besides for methods.\n>\n> python == 3.5.2rc1+\n> cython == 0.26.1\n> ipython == 6.1.0\n>\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/cython/cython/issues/1864#issuecomment-328274068>, or mute\n> the thread\n> <https://github.com/notifications/unsubscribe-auth/ATqe4sKVJqxbR1qAjR7DN6YoK3wLbWTLks5sgoOOgaJpZM4PR7G6>\n> .\n>\n> --\n> You received this message because you are subscribed to the Google Groups\n> \"cython-github-notifications\" group.\n> To unsubscribe from this group and stop receiving emails from it, send an\n> email to cython-github-notifications+unsubscribe@googlegroups.com.\n> To post to this group, send email to cython-github-notifications@\n> googlegroups.com.\n> To view this discussion on the web visit https://groups.google.com/d/\n> msgid/cython-github-notifications/cython/cython/issues/1864/328274068%\n> 40github.com\n> <https://groups.google.com/d/msgid/cython-github-notifications/cython/cython/issues/1864/328274068%40github.com?utm_medium=email&utm_source=footer>\n> .\n>\n> For more options, visit https://groups.google.com/d/optout.\n>\n",
            "created_at": "2017-09-10T06:50:45Z",
            "html_url": "https://github.com/cython/cython/issues/1864#issuecomment-328323846",
            "id": 328323846,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/1864",
            "node_id": "MDEyOklzc3VlQ29tbWVudDMyODMyMzg0Ng==",
            "updated_at": "2017-09-10T06:50:45Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/328323846",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/20618978?v=4",
                "events_url": "https://api.github.com/users/cython-notifications/events{/privacy}",
                "followers_url": "https://api.github.com/users/cython-notifications/followers",
                "following_url": "https://api.github.com/users/cython-notifications/following{/other_user}",
                "gists_url": "https://api.github.com/users/cython-notifications/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cython-notifications",
                "id": 20618978,
                "login": "cython-notifications",
                "node_id": "MDQ6VXNlcjIwNjE4OTc4",
                "organizations_url": "https://api.github.com/users/cython-notifications/orgs",
                "received_events_url": "https://api.github.com/users/cython-notifications/received_events",
                "repos_url": "https://api.github.com/users/cython-notifications/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cython-notifications/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cython-notifications/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cython-notifications"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Yes, they must be missing from the `DefNodeWrapper`. Defaults of methods and `cpdef` functions are currently not tested, neither in `py34_signature.pyx` nor in `cyfunction_defaults.pyx`. Probably easy to fix. Pull request welcome.",
            "created_at": "2017-09-10T16:49:38Z",
            "html_url": "https://github.com/cython/cython/issues/1864#issuecomment-328355460",
            "id": 328355460,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/1864",
            "node_id": "MDEyOklzc3VlQ29tbWVudDMyODM1NTQ2MA==",
            "updated_at": "2017-09-10T16:49:38Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/328355460",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "NONE",
            "body": "Update:\r\nthis issue was not the cause of the described problem below. `binding` had to be set to `True` in order to enable the specific introspection of `websocket-client`.\r\n\r\nany news on this issue?\r\n\r\ni would like to use the [`websocket-client`](https://pypi.org/project/websocket_client/) package in a cython compiled module, but they are using `getfullargspec`.\r\n\r\nanythig i can do to help?",
            "created_at": "2019-04-29T17:12:16Z",
            "html_url": "https://github.com/cython/cython/issues/1864#issuecomment-487664445",
            "id": 487664445,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/1864",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NzY2NDQ0NQ==",
            "updated_at": "2019-04-29T17:32:25Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/487664445",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/16109193?v=4",
                "events_url": "https://api.github.com/users/GliderGeek/events{/privacy}",
                "followers_url": "https://api.github.com/users/GliderGeek/followers",
                "following_url": "https://api.github.com/users/GliderGeek/following{/other_user}",
                "gists_url": "https://api.github.com/users/GliderGeek/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/GliderGeek",
                "id": 16109193,
                "login": "GliderGeek",
                "node_id": "MDQ6VXNlcjE2MTA5MTkz",
                "organizations_url": "https://api.github.com/users/GliderGeek/orgs",
                "received_events_url": "https://api.github.com/users/GliderGeek/received_events",
                "repos_url": "https://api.github.com/users/GliderGeek/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/GliderGeek/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/GliderGeek/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/GliderGeek"
            }
        }
    ],
    "comments": 5,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/1864/comments",
    "created_at": "2017-09-09T08:11:00Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2017-09-10T16:45:44Z",
            "event": "labeled",
            "id": 1242258693,
            "label": {
                "color": "444444",
                "name": "Code Generation"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDEyNDIyNTg2OTM=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/1242258693"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2017-09-10T16:45:44Z",
            "event": "labeled",
            "id": 1242258694,
            "label": {
                "color": "444444",
                "name": "defect"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDEyNDIyNTg2OTQ=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/1242258694"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2017-09-10T16:45:44Z",
            "event": "labeled",
            "id": 1242258695,
            "label": {
                "color": "0e8a16",
                "name": "patch wanted"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDEyNDIyNTg2OTU=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/1242258695"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": "c999749167fb72fdc19ce8605eeb49175abb790a",
            "commit_url": "https://api.github.com/repos/cython/cython/commits/c999749167fb72fdc19ce8605eeb49175abb790a",
            "created_at": "2017-09-10T17:53:02Z",
            "event": "referenced",
            "id": 1242278363,
            "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDEyNDIyNzgzNjM=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/1242278363"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/1864/events",
    "html_url": "https://github.com/cython/cython/issues/1864",
    "id": 256423495,
    "labels": [
        {
            "color": "444444",
            "default": false,
            "id": 425556330,
            "name": "Code Generation",
            "node_id": "MDU6TGFiZWw0MjU1NTYzMzA=",
            "url": "https://api.github.com/repos/cython/cython/labels/Code%20Generation"
        },
        {
            "color": "444444",
            "default": false,
            "id": 425553654,
            "name": "defect",
            "node_id": "MDU6TGFiZWw0MjU1NTM2NTQ=",
            "url": "https://api.github.com/repos/cython/cython/labels/defect"
        },
        {
            "color": "0e8a16",
            "default": true,
            "id": 414800879,
            "name": "help wanted",
            "node_id": "MDU6TGFiZWw0MTQ4MDA4Nzk=",
            "url": "https://api.github.com/repos/cython/cython/labels/help%20wanted"
        }
    ],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/1864/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWUyNTY0MjM0OTU=",
    "number": 1864,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "title": "keyword args appear as positional in method signature for cdef class",
    "updated_at": "2019-04-29T17:32:25Z",
    "url": "https://api.github.com/repos/cython/cython/issues/1864",
    "user": {
        "avatar_url": "https://avatars0.githubusercontent.com/u/3135273?v=4",
        "events_url": "https://api.github.com/users/johnyf/events{/privacy}",
        "followers_url": "https://api.github.com/users/johnyf/followers",
        "following_url": "https://api.github.com/users/johnyf/following{/other_user}",
        "gists_url": "https://api.github.com/users/johnyf/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/johnyf",
        "id": 3135273,
        "login": "johnyf",
        "node_id": "MDQ6VXNlcjMxMzUyNzM=",
        "organizations_url": "https://api.github.com/users/johnyf/orgs",
        "received_events_url": "https://api.github.com/users/johnyf/received_events",
        "repos_url": "https://api.github.com/users/johnyf/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/johnyf/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/johnyf/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/johnyf"
    }
}