{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "I have a module with functions that I compile without any manual optimizations. The normal version of the code looks like:\r\n```py\r\ndef Main_Default(value_max: int, num_loops: int, rlock, runtime: str, compilation: str, call_type: str, subcall: str, case: str):\r\n```\r\n\r\nI then tried modifying the function to use C-type declarations like so:\r\n```py\r\ncdef void Main_Default(int value_max, int num_loops, rlock, str runtime, str compilation, str call_type, str subcall, str case):\r\n```\r\nThe function doesn't return anything, and all the variables are of the correct type.\r\n\r\nIn my main program, I'm dynamically importing different modules using `importlib` based on a JSON file's parameters - basically letting a user choose what modules to import rather than importing all the modules. I do this through a snippet like this:\r\n\r\n```py\r\nif info[\"library\"] in sys.modules:\r\n    print(\"{0} module has already been loaded.\".format(info[\"library\"]))\r\nelse:\r\n    lib = importlib.import_module(info[\"library\"], package=info[\"package\"])\r\n    print(\"Loaded module '{0}'.\".format(info[\"library\"]))\r\n...\r\nfuncs[group] = vars(lib)[\"Main_Default\"]\r\n```\r\n\r\nWhere `info[\"package\"]` is the top-level package of my module, and `info[\"library\"]` is the actual module's full name. The last line is where I assign the `Main_Default` function to a dictionary value where I'll call it later.\r\n\r\nAll works fine in the first scenario where I'm using Python function declaration, where I'm met with the success message and the module runs fine when it's called.\r\n\r\nThe issue is that when using C-type function declarations, Importing the module works fine (as I still get the success message), but when trying to assign the `Main_Default` function of the module I get the following error message:\r\n```py\r\n'Main_Default' is not a valid function inside 'my_package.my_module'\r\n```\r\n\r\nI printed out the `vars(lib)` for my module just to make sure the function was listed, and the `Main_Default` function is not listed.\r\nI believe this is due to `importlib` using the Python `import1 function, while in this case I'd want to use Cython's `cimport` function.\r\n\r\nAny way I can use `importlib` or some similar dynamic method for Cython extensions?",
    "closed_at": "2020-07-18T18:42:58Z",
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "I see now through some more research that I should be using `cpdef` instead of `cdef` for my function declaration, but now I'm running into this issue:\r\n```py\r\ncpdef void Main_Default(int value_max, int num_loops, rlock, str runtime, str compilation, str call_type, str subcall, str case):\r\n     ^\r\n------------------------------------------------------------\r\n\r\nmy_package.my_module.pyx:14:6: closures inside cpdef functions not yet supported\r\n```",
            "created_at": "2020-07-18T18:30:49Z",
            "html_url": "https://github.com/cython/cython/issues/3745#issuecomment-660522658",
            "id": 660522658,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3745",
            "node_id": "MDEyOklzc3VlQ29tbWVudDY2MDUyMjY1OA==",
            "performed_via_github_app": null,
            "updated_at": "2020-07-18T18:30:49Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/660522658",
            "user": {
                "avatar_url": "https://avatars2.githubusercontent.com/u/14364070?v=4",
                "events_url": "https://api.github.com/users/HunterAP23/events{/privacy}",
                "followers_url": "https://api.github.com/users/HunterAP23/followers",
                "following_url": "https://api.github.com/users/HunterAP23/following{/other_user}",
                "gists_url": "https://api.github.com/users/HunterAP23/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/HunterAP23",
                "id": 14364070,
                "login": "HunterAP23",
                "node_id": "MDQ6VXNlcjE0MzY0MDcw",
                "organizations_url": "https://api.github.com/users/HunterAP23/orgs",
                "received_events_url": "https://api.github.com/users/HunterAP23/received_events",
                "repos_url": "https://api.github.com/users/HunterAP23/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/HunterAP23/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/HunterAP23/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/HunterAP23"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "This is a usage question, not a bug. Thus, the bug tracker is the wrong place to discuss this. Use the cython-users mailing list instead.\r\n\r\nI would suggest to use a normal `def` function instead.",
            "created_at": "2020-07-18T18:42:58Z",
            "html_url": "https://github.com/cython/cython/issues/3745#issuecomment-660524163",
            "id": 660524163,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3745",
            "node_id": "MDEyOklzc3VlQ29tbWVudDY2MDUyNDE2Mw==",
            "performed_via_github_app": null,
            "updated_at": "2020-07-18T18:42:58Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/660524163",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/3745/comments",
    "created_at": "2020-07-18T18:21:24Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2020-07-18T18:42:02Z",
            "event": "labeled",
            "id": 3561473649,
            "label": {
                "color": "fef2c0",
                "name": "support question"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDM1NjE0NzM2NDk=",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/3561473649"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2020-07-18T18:42:58Z",
            "event": "closed",
            "id": 3561474693,
            "node_id": "MDExOkNsb3NlZEV2ZW50MzU2MTQ3NDY5Mw==",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/3561474693"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/3745/events",
    "html_url": "https://github.com/cython/cython/issues/3745",
    "id": 660298717,
    "labels": [
        {
            "color": "fef2c0",
            "default": false,
            "description": null,
            "id": 414800623,
            "name": "support question",
            "node_id": "MDU6TGFiZWw0MTQ4MDA2MjM=",
            "url": "https://api.github.com/repos/cython/cython/labels/support%20question"
        }
    ],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/3745/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU2NjAyOTg3MTc=",
    "number": 3745,
    "performed_via_github_app": null,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "closed",
    "title": "Cannot use importlib to import Cython extensions",
    "updated_at": "2020-07-18T18:42:58Z",
    "url": "https://api.github.com/repos/cython/cython/issues/3745",
    "user": {
        "avatar_url": "https://avatars2.githubusercontent.com/u/14364070?v=4",
        "events_url": "https://api.github.com/users/HunterAP23/events{/privacy}",
        "followers_url": "https://api.github.com/users/HunterAP23/followers",
        "following_url": "https://api.github.com/users/HunterAP23/following{/other_user}",
        "gists_url": "https://api.github.com/users/HunterAP23/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/HunterAP23",
        "id": 14364070,
        "login": "HunterAP23",
        "node_id": "MDQ6VXNlcjE0MzY0MDcw",
        "organizations_url": "https://api.github.com/users/HunterAP23/orgs",
        "received_events_url": "https://api.github.com/users/HunterAP23/received_events",
        "repos_url": "https://api.github.com/users/HunterAP23/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/HunterAP23/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/HunterAP23/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/HunterAP23"
    }
}