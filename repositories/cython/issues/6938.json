{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Describe the bug\n\nIf you have two equivalent cython files, one in cython and one in pure python, only the cython version will output correct dependency information when compiled with `cython -M`. This happens even when including pxd files outside the standard library.\n\n### Code to reproduce the behaviour:\n\n```python\n# File: test.py\nfrom cython.cimports.libc.stdint import uint32_t\n\ndef foo(x: uint32_t):\n    return x\n```\n```cython\n# File: test.pyx\nfrom libc.stdint cimport uint32_t\n\ndef foo(uint32_t x):\n    return x\n```\n\nThen compile with:\n```sh\n$ cython -3 test.py -M -o test.py.c\n$ cython -3 test.pyx -M -o test.pyx.c\n```\n\nInspecting the resulting depfiles gives:\n```sh\n$ cat test.pyx.c.dep\ntest.pyx.c: \\\n  test.pyx \\\n  ../../.local/lib/python3.10/site-packages/Cython/Includes/libc/stdint.pxd\n$ cat test.py.c.dep\ntest.py.c: \\\n  test.py\n```\n\n### Expected behaviour\n\nThe two dependency files should be the same.\n\n### OS\n\nUbuntu 22.04\n\n### Python version\n\n3.10.12\n\n### Cython version\n\n3.1.1\n\n### Additional context\n\n_No response_",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [],
    "comments": 0,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/6938/comments",
    "created_at": "2025-06-03T23:30:48Z",
    "event_data": [],
    "events_url": "https://api.github.com/repos/cython/cython/issues/6938/events",
    "html_url": "https://github.com/cython/cython/issues/6938",
    "id": 3115725023,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/6938/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOABDGAc65tjDf",
    "number": 6938,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/cython/cython/issues/6938/reactions"
    },
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/cython/cython/issues/6938/timeline",
    "title": "[BUG] PXD dependencies are not listed in the depfiles for pure python code.",
    "type": null,
    "updated_at": "2025-06-03T23:30:48Z",
    "url": "https://api.github.com/repos/cython/cython/issues/6938",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/33580060?v=4",
        "events_url": "https://api.github.com/users/TheDreadedAndy/events{/privacy}",
        "followers_url": "https://api.github.com/users/TheDreadedAndy/followers",
        "following_url": "https://api.github.com/users/TheDreadedAndy/following{/other_user}",
        "gists_url": "https://api.github.com/users/TheDreadedAndy/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/TheDreadedAndy",
        "id": 33580060,
        "login": "TheDreadedAndy",
        "node_id": "MDQ6VXNlcjMzNTgwMDYw",
        "organizations_url": "https://api.github.com/users/TheDreadedAndy/orgs",
        "received_events_url": "https://api.github.com/users/TheDreadedAndy/received_events",
        "repos_url": "https://api.github.com/users/TheDreadedAndy/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/TheDreadedAndy/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/TheDreadedAndy/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/TheDreadedAndy",
        "user_view_type": "public"
    }
}