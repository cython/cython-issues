{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "COLLABORATOR",
    "body": "**Is your feature request related to a problem? Please describe.**\r\n\r\nThe annotation_typing directive tries to be fairly safe and tries not to do anything that would change the behaviour of Python code (at least on the assumption that the type annotations are correct). A couple of commonly asked about examples:\r\n\r\n* annotations of module-level variables are ignored because they'd affect visibility\r\n* `int` (and I think `float`) are ignored because the Python type has a different range to the C type.\r\n\r\nMy impression is that many people would find these limitations acceptable\r\n\r\n**Describe the solution you'd like**\r\n\r\nI'd propose splitting the annotation_typing directive into `annotation_typing=safe` (the current behaviour) and `annotation_typing=full` (treat annotations as close as possible to a cdef declaration). We should keep `safe` as the default, and alias `True` to `safe` (so existing code works). The documentation should largely stick with `safe` too (I'd propose only using `full` to document `full`)\r\n\r\n**Describe alternatives you've considered**\r\n\r\n* Keep the status quo: we don't like compiler directives because they increase the number of combinations that need testing.\r\n* Subdirectives: `annotation_typing.unsafe_int=True`, `annotation_typing.module_globals=True`. I think this is worse but it's an option.\r\n\r\n**Additional context**\r\n\r\nPosted for feedback, rather than because I was planning to do anything imminent.\r\n",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "That seems to represent pretty much the use case of mypyc, and I think there definitely is such a use case. How important it is, I don't know, but it seems worth supporting. Especially since it seems easy to do.\n",
            "created_at": "2021-12-24T05:55:41Z",
            "html_url": "https://github.com/cython/cython/issues/4520#issuecomment-1000669295",
            "id": 1000669295,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/4520",
            "node_id": "IC_kwDOABDGAc47pQBv",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/1000669295/reactions"
            },
            "updated_at": "2021-12-24T05:55:41Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/1000669295",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/4520/comments",
    "created_at": "2021-12-23T17:53:11Z",
    "event_data": [],
    "events_url": "https://api.github.com/repos/cython/cython/issues/4520/events",
    "html_url": "https://github.com/cython/cython/issues/4520",
    "id": 1087901002,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/4520/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOABDGAc5A2A1K",
    "number": 4520,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/cython/cython/issues/4520/reactions"
    },
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "timeline_url": "https://api.github.com/repos/cython/cython/issues/4520/timeline",
    "title": "[ENH] \"full\" and \"safe\" annotation typing mode",
    "updated_at": "2021-12-24T05:55:41Z",
    "url": "https://api.github.com/repos/cython/cython/issues/4520",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
        "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
        "followers_url": "https://api.github.com/users/da-woods/followers",
        "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
        "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/da-woods",
        "id": 10536947,
        "login": "da-woods",
        "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
        "organizations_url": "https://api.github.com/users/da-woods/orgs",
        "received_events_url": "https://api.github.com/users/da-woods/received_events",
        "repos_url": "https://api.github.com/users/da-woods/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/da-woods"
    }
}