{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "This might be related to #3751 . \r\n\r\nExecuting\r\n\r\n```python\r\n%load_ext cython\r\n```\r\n\r\n``` python\r\n%%cython --verbose -f -c=-O3 -c=-march=native -c=-Rpass=loop-vectorize\r\n# cython: boundscheck = False, wraparound = False\r\n\r\ndef mydot(double[::1] a, double[::1] b):\r\n    cdef double s = 0.0\r\n    cdef int i, N = a.size\r\n    for i in range(N):\r\n        s += a[i]*b[i]\r\n    return s\r\n```\r\n\r\ninside a iPython shell prints a few compiler messages regarding successful loop-vectorization due to the `-Rpass=loop-vectorize` flag:\r\n\r\n<img width=\"829\" alt=\"Bildschirmfoto 2020-09-26 um 13 49 13\" src=\"https://user-images.githubusercontent.com/8471326/94340213-41456900-0000-11eb-9316-955aa1adfa6b.png\">\r\n\r\nWhen doing the same inside a jupyter notebook, the compiler messages are omitted. This is really annoying in case you'd like to know if the C compiler was able to SIMD-vectorize the C-code generated by Cython. The compiler messages are visible in the logs of the jupyter notebook but not inside the notebook itself:\r\n\r\n<img width=\"832\" alt=\"Bildschirmfoto 2020-09-26 um 13 41 17\" src=\"https://user-images.githubusercontent.com/8471326/94340215-46a2b380-0000-11eb-8730-721824fa4af9.png\">\r\n<img width=\"829\" alt=\"Bildschirmfoto 2020-09-26 um 13 41 03\" src=\"https://user-images.githubusercontent.com/8471326/94340216-499da400-0000-11eb-80f5-0ac8ae198575.png\">\r\n\r\nPS: I'm using clang, gcc's equivalent flag is `-fopt-info-vec-optimized` and `/Qvec-report:2` for MVSC. The behavior is the same on linux or windows.\r\n\r\n```\r\nCython           : 0.29.21\r\njupyter core     : 4.6.3\r\njupyter-notebook : 6.1.1\r\nqtconsole        : not installed\r\nipython          : 7.17.0\r\nipykernel        : 5.3.4\r\njupyter client   : 6.1.6\r\njupyter lab      : 2.2.2\r\nnbconvert        : 5.6.1\r\nipywidgets       : not installed\r\nnbformat         : 5.0.7\r\ntraitlets        : 4.3.3\r\n```",
    "closed_at": "2021-07-22T12:00:18Z",
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "I just noticed that this bug also occurs for this example:  \r\n\r\n``` python\r\n%%cython\r\n\r\nfrom libc.stdio cimport printf\r\ndef dummyfunc():\r\n    printf(\"Hi from C \\n\")\r\n```\r\n\r\nWithin a iPython shell I can see the output of a `dummyfunc()` call. Inside a jupyter notebook the output gets omitted and is only visible inside the logs.",
            "created_at": "2020-11-09T22:28:59Z",
            "html_url": "https://github.com/cython/cython/issues/3844#issuecomment-724316689",
            "id": 724316689,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3844",
            "node_id": "MDEyOklzc3VlQ29tbWVudDcyNDMxNjY4OQ==",
            "performed_via_github_app": null,
            "updated_at": "2020-11-09T22:28:59Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/724316689",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8471326?v=4",
                "events_url": "https://api.github.com/users/jhelgert/events{/privacy}",
                "followers_url": "https://api.github.com/users/jhelgert/followers",
                "following_url": "https://api.github.com/users/jhelgert/following{/other_user}",
                "gists_url": "https://api.github.com/users/jhelgert/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jhelgert",
                "id": 8471326,
                "login": "jhelgert",
                "node_id": "MDQ6VXNlcjg0NzEzMjY=",
                "organizations_url": "https://api.github.com/users/jhelgert/orgs",
                "received_events_url": "https://api.github.com/users/jhelgert/received_events",
                "repos_url": "https://api.github.com/users/jhelgert/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jhelgert/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jhelgert/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jhelgert"
            }
        },
        {
            "author_association": "COLLABORATOR",
            "body": "Should probably be fixed by https://github.com/cython/cython/pull/3872. Not sure about the case where you call `printf` yourself but that's probably less important than capturing the compiler output.",
            "created_at": "2020-11-10T17:57:15Z",
            "html_url": "https://github.com/cython/cython/issues/3844#issuecomment-724867293",
            "id": 724867293,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3844",
            "node_id": "MDEyOklzc3VlQ29tbWVudDcyNDg2NzI5Mw==",
            "performed_via_github_app": null,
            "updated_at": "2020-11-10T17:57:15Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/724867293",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        },
        {
            "author_association": "NONE",
            "body": "I can confirm that #3872 fixes the first example with the compiler output. :) For the second example with `printf` nothing changes. But I think this could be neglected. (The only use case I can think of may be for quick and simple debugging for code regions with deactivated GIL.)",
            "created_at": "2020-11-10T21:51:31Z",
            "html_url": "https://github.com/cython/cython/issues/3844#issuecomment-724988424",
            "id": 724988424,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3844",
            "node_id": "MDEyOklzc3VlQ29tbWVudDcyNDk4ODQyNA==",
            "performed_via_github_app": null,
            "updated_at": "2020-11-10T21:51:31Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/724988424",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8471326?v=4",
                "events_url": "https://api.github.com/users/jhelgert/events{/privacy}",
                "followers_url": "https://api.github.com/users/jhelgert/followers",
                "following_url": "https://api.github.com/users/jhelgert/following{/other_user}",
                "gists_url": "https://api.github.com/users/jhelgert/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jhelgert",
                "id": 8471326,
                "login": "jhelgert",
                "node_id": "MDQ6VXNlcjg0NzEzMjY=",
                "organizations_url": "https://api.github.com/users/jhelgert/orgs",
                "received_events_url": "https://api.github.com/users/jhelgert/received_events",
                "repos_url": "https://api.github.com/users/jhelgert/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jhelgert/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jhelgert/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jhelgert"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "#3872 fixes the capture of the C-level output while the %%cython-cell builds, not when functions from this cell are being executed.\r\n\r\nTo solve the second issue, on Linux (and probably MacOS) one can use wurlitzer, see https://stackoverflow.com/a/62898890/5769463. For windows an alternative could be my much less tested package https://github.com/realead/coutcatcher.",
            "created_at": "2020-11-13T21:28:47Z",
            "html_url": "https://github.com/cython/cython/issues/3844#issuecomment-727044231",
            "id": 727044231,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3844",
            "node_id": "MDEyOklzc3VlQ29tbWVudDcyNzA0NDIzMQ==",
            "performed_via_github_app": null,
            "updated_at": "2020-11-13T21:28:47Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/727044231",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/17513912?v=4",
                "events_url": "https://api.github.com/users/realead/events{/privacy}",
                "followers_url": "https://api.github.com/users/realead/followers",
                "following_url": "https://api.github.com/users/realead/following{/other_user}",
                "gists_url": "https://api.github.com/users/realead/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/realead",
                "id": 17513912,
                "login": "realead",
                "node_id": "MDQ6VXNlcjE3NTEzOTEy",
                "organizations_url": "https://api.github.com/users/realead/orgs",
                "received_events_url": "https://api.github.com/users/realead/received_events",
                "repos_url": "https://api.github.com/users/realead/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/realead/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/realead/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/realead"
            }
        }
    ],
    "comments": 4,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/3844/comments",
    "created_at": "2020-09-27T08:01:33Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8471326?v=4",
                "events_url": "https://api.github.com/users/jhelgert/events{/privacy}",
                "followers_url": "https://api.github.com/users/jhelgert/followers",
                "following_url": "https://api.github.com/users/jhelgert/following{/other_user}",
                "gists_url": "https://api.github.com/users/jhelgert/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jhelgert",
                "id": 8471326,
                "login": "jhelgert",
                "node_id": "MDQ6VXNlcjg0NzEzMjY=",
                "organizations_url": "https://api.github.com/users/jhelgert/orgs",
                "received_events_url": "https://api.github.com/users/jhelgert/received_events",
                "repos_url": "https://api.github.com/users/jhelgert/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jhelgert/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jhelgert/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jhelgert"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2020-11-09T22:31:38Z",
            "event": "renamed",
            "id": 3976090874,
            "node_id": "MDE3OlJlbmFtZWRUaXRsZUV2ZW50Mzk3NjA5MDg3NA==",
            "performed_via_github_app": null,
            "rename": {
                "from": "[BUG] Jupyter Notebook omits compiler messages when using cythonmagic",
                "to": "[BUG] Jupyter Notebook omits messages to stdout when using cythonmagic"
            },
            "url": "https://api.github.com/repos/cython/cython/issues/events/3976090874"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8471326?v=4",
                "events_url": "https://api.github.com/users/jhelgert/events{/privacy}",
                "followers_url": "https://api.github.com/users/jhelgert/followers",
                "following_url": "https://api.github.com/users/jhelgert/following{/other_user}",
                "gists_url": "https://api.github.com/users/jhelgert/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jhelgert",
                "id": 8471326,
                "login": "jhelgert",
                "node_id": "MDQ6VXNlcjg0NzEzMjY=",
                "organizations_url": "https://api.github.com/users/jhelgert/orgs",
                "received_events_url": "https://api.github.com/users/jhelgert/received_events",
                "repos_url": "https://api.github.com/users/jhelgert/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jhelgert/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jhelgert/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jhelgert"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2021-07-22T12:00:18Z",
            "event": "closed",
            "id": 5055237377,
            "node_id": "MDExOkNsb3NlZEV2ZW50NTA1NTIzNzM3Nw==",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/5055237377"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2021-07-22T12:39:10Z",
            "event": "labeled",
            "id": 5055420046,
            "label": {
                "color": "444444",
                "name": "enhancement"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDUwNTU0MjAwNDY=",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/5055420046"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2021-07-22T12:39:10Z",
            "event": "labeled",
            "id": 5055420050,
            "label": {
                "color": "444444",
                "name": "Error Reporting"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDUwNTU0MjAwNTA=",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/5055420050"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2021-07-22T12:39:13Z",
            "event": "milestoned",
            "id": 5055420261,
            "milestone": {
                "title": "3.0"
            },
            "node_id": "MDE1Ok1pbGVzdG9uZWRFdmVudDUwNTU0MjAyNjE=",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/5055420261"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/3844/events",
    "html_url": "https://github.com/cython/cython/issues/3844",
    "id": 709691406,
    "labels": [
        {
            "color": "444444",
            "default": false,
            "description": null,
            "id": 425557478,
            "name": "Error Reporting",
            "node_id": "MDU6TGFiZWw0MjU1NTc0Nzg=",
            "url": "https://api.github.com/repos/cython/cython/labels/Error%20Reporting"
        },
        {
            "color": "444444",
            "default": true,
            "description": null,
            "id": 425556243,
            "name": "enhancement",
            "node_id": "MDU6TGFiZWw0MjU1NTYyNDM=",
            "url": "https://api.github.com/repos/cython/cython/labels/enhancement"
        }
    ],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/3844/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 433,
        "created_at": "2018-08-18T06:33:08Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
            "events_url": "https://api.github.com/users/scoder/events{/privacy}",
            "followers_url": "https://api.github.com/users/scoder/followers",
            "following_url": "https://api.github.com/users/scoder/following{/other_user}",
            "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/scoder",
            "id": 491659,
            "login": "scoder",
            "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
            "organizations_url": "https://api.github.com/users/scoder/orgs",
            "received_events_url": "https://api.github.com/users/scoder/received_events",
            "repos_url": "https://api.github.com/users/scoder/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/scoder"
        },
        "description": "Goals:\r\n– New version scheme: 3.x instead of 0.x.\r\n– Change default `language_level` from `2` to `3`.\r\n– Change default for `binding` directive from `False` to `True`.\r\n– Fix some Python compatibility issues (if possible, allowing for breaking changes).\r\n",
        "due_on": null,
        "html_url": "https://github.com/cython/cython/milestone/58",
        "id": 3580387,
        "labels_url": "https://api.github.com/repos/cython/cython/milestones/58/labels",
        "node_id": "MDk6TWlsZXN0b25lMzU4MDM4Nw==",
        "number": 58,
        "open_issues": 28,
        "state": "open",
        "title": "3.0",
        "updated_at": "2021-07-22T21:01:56Z",
        "url": "https://api.github.com/repos/cython/cython/milestones/58"
    },
    "node_id": "MDU6SXNzdWU3MDk2OTE0MDY=",
    "number": 3844,
    "performed_via_github_app": null,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "closed",
    "title": "[BUG] Jupyter Notebook omits messages to stdout when using cythonmagic",
    "updated_at": "2021-07-22T12:39:13Z",
    "url": "https://api.github.com/repos/cython/cython/issues/3844",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/8471326?v=4",
        "events_url": "https://api.github.com/users/jhelgert/events{/privacy}",
        "followers_url": "https://api.github.com/users/jhelgert/followers",
        "following_url": "https://api.github.com/users/jhelgert/following{/other_user}",
        "gists_url": "https://api.github.com/users/jhelgert/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/jhelgert",
        "id": 8471326,
        "login": "jhelgert",
        "node_id": "MDQ6VXNlcjg0NzEzMjY=",
        "organizations_url": "https://api.github.com/users/jhelgert/orgs",
        "received_events_url": "https://api.github.com/users/jhelgert/received_events",
        "repos_url": "https://api.github.com/users/jhelgert/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/jhelgert/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jhelgert/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/jhelgert"
    }
}