{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Describe the bug\n\nThere is a Segmentation Fault in the attached example (simplified from actually failing production code).\r\nRequirement for failure:\r\n- Usage of Walrus Operator in an if statement.\r\n- First If Statement does not fully evaluate\r\n- Second If Statement uses same variable name in assignment operator.\r\n\r\nSegmentation fault occurs because Variable gets dereferenced in the second If-condition without having a value assigned. \r\nThe assignment doesn't happen because first If-condition doesn't get fully evaluated.\n\n### Code to reproduce the behaviour:\n\n```python\r\n\r\ndef problem_function():\r\n    d = False\r\n    a = []\r\n    if d and (q := a):\r\n        pass\r\n\r\n    if q := a:\r\n        pass\r\n```\r\n\n\n### Expected behaviour\n\nNo Segmentation Fault in Cythonized code\n\n### OS\n\nLinux\n\n### Python version\n\n3.11.8\n\n### Cython version\n\nlatest master\n\n### Additional context\n\n_No response_",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Thanks - in the short term I suspect the better solution is to treat assignment expressions as \"maybe assignments\" rather than \"definite assignments\". There's quite a few variations of cases like this where it isn't clear if they're actually run and which our flow control doesn't currently cover so working it out comprehensively is likely hard.\r\n\r\nThat'll de-optimize assignment expressions slightly but I think that's OK.",
            "created_at": "2024-03-18T06:59:24Z",
            "html_url": "https://github.com/cython/cython/issues/6094#issuecomment-2003057261",
            "id": 2003057261,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/6094",
            "node_id": "IC_kwDOABDGAc53ZDpt",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/2003057261/reactions"
            },
            "updated_at": "2024-03-18T06:59:24Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/2003057261",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/6094/comments",
    "created_at": "2024-03-17T21:21:24Z",
    "event_data": [],
    "events_url": "https://api.github.com/repos/cython/cython/issues/6094/events",
    "html_url": "https://github.com/cython/cython/issues/6094",
    "id": 2190871199,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/6094/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOABDGAc6Clgqf",
    "number": 6094,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/cython/cython/issues/6094/reactions"
    },
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "state_reason": null,
    "timeline_url": "https://api.github.com/repos/cython/cython/issues/6094/timeline",
    "title": "[BUG] Segmentation fault with Walrus-Operator and same named variables",
    "updated_at": "2024-03-18T06:59:26Z",
    "url": "https://api.github.com/repos/cython/cython/issues/6094",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/17784676?v=4",
        "events_url": "https://api.github.com/users/mspi92/events{/privacy}",
        "followers_url": "https://api.github.com/users/mspi92/followers",
        "following_url": "https://api.github.com/users/mspi92/following{/other_user}",
        "gists_url": "https://api.github.com/users/mspi92/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/mspi92",
        "id": 17784676,
        "login": "mspi92",
        "node_id": "MDQ6VXNlcjE3Nzg0Njc2",
        "organizations_url": "https://api.github.com/users/mspi92/orgs",
        "received_events_url": "https://api.github.com/users/mspi92/received_events",
        "repos_url": "https://api.github.com/users/mspi92/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/mspi92/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/mspi92/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/mspi92"
    }
}