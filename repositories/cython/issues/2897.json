{
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "I am getting an \"OverflowError: Python int too large to convert to C long\" when converting to ptrdiff_t in this particular source code line:\r\n\r\nhttps://github.com/wobblui/wobblui/blob/e5ec4e27b205ae92cf02488b4d9087131e2dd960/src/wobblui/texture.pyx#L77\r\n\r\nAs a special twist, I am seeing this error having compiled this as ARMv7 binary/32bit where `ptrdiff_t` ~~matches **unsigned long** in gcc or clang if I remember that right, but it runs on an AMD64 Android so this is actually a 64bit system. However, it would be expected to not fit inside **signed long** in some cases which the error message seems to hint at - is Cython doing something internally where it attempts to convert through that type internally? (that would be bad)~~ - from more reading, I think `ptrdiff_t`, while signed, should actually be 33bit+ so an `int64_t` in this case? Not sure. Is this a compiler bug? Read comments below for more info",
    "closed_at": "2019-03-19T10:29:44Z",
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "Edit: irrelevant, reducing some of the noise",
            "created_at": "2019-03-19T10:08:33Z",
            "html_url": "https://github.com/cython/cython/issues/2897#issuecomment-474281633",
            "id": 474281633,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2897",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NDI4MTYzMw==",
            "updated_at": "2019-03-19T10:27:33Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/474281633",
            "user": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/1573352?v=4",
                "events_url": "https://api.github.com/users/JonasT/events{/privacy}",
                "followers_url": "https://api.github.com/users/JonasT/followers",
                "following_url": "https://api.github.com/users/JonasT/following{/other_user}",
                "gists_url": "https://api.github.com/users/JonasT/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/JonasT",
                "id": 1573352,
                "login": "JonasT",
                "node_id": "MDQ6VXNlcjE1NzMzNTI=",
                "organizations_url": "https://api.github.com/users/JonasT/orgs",
                "received_events_url": "https://api.github.com/users/JonasT/received_events",
                "repos_url": "https://api.github.com/users/JonasT/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/JonasT/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/JonasT/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/JonasT"
            }
        },
        {
            "author_association": "NONE",
            "body": "Right, seems what I actually want is `uintptr_t`. (since `size_t` is often used but as far as I understand it, not necessarily the right choice to hold a pointer on more arcane platforms. Also see https://stackoverflow.com/questions/1845482/what-is-uintptr-t-data-type if anyone stumbles across this)",
            "created_at": "2019-03-19T10:11:41Z",
            "html_url": "https://github.com/cython/cython/issues/2897#issuecomment-474283414",
            "id": 474283414,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2897",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NDI4MzQxNA==",
            "updated_at": "2019-03-19T10:11:41Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/474283414",
            "user": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/1573352?v=4",
                "events_url": "https://api.github.com/users/JonasT/events{/privacy}",
                "followers_url": "https://api.github.com/users/JonasT/followers",
                "following_url": "https://api.github.com/users/JonasT/following{/other_user}",
                "gists_url": "https://api.github.com/users/JonasT/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/JonasT",
                "id": 1573352,
                "login": "JonasT",
                "node_id": "MDQ6VXNlcjE1NzMzNTI=",
                "organizations_url": "https://api.github.com/users/JonasT/orgs",
                "received_events_url": "https://api.github.com/users/JonasT/received_events",
                "repos_url": "https://api.github.com/users/JonasT/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/JonasT/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/JonasT/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/JonasT"
            }
        },
        {
            "author_association": "NONE",
            "body": "hmmmmmm...\r\n\r\nBut shouldn't `ptrdiff_t` on a 32bit system actually be 33+ bit, so actually a 64bit type? (so I can e.g. substract a 32bit highest-bit-set pointer from a nullpointer) Don't get me wrong my code is incorrect and I should have used `uintptr_t` purely from a semantic standpoint, but should this actually have been an issue in practice? I am very unsure now.\r\n\r\nI'll reopen for now just in case this is actually a bug with `ptrdiff_t` size for some reason...? But would that be a compiler bug in this case? Or am I just reading the `ptrdiff_t` descriptions wrong which seem to imply that *any* two pointer arithmetic differences should be possibly held, and it's more meant to be *almost, unless you pick the extreme of both ends of the range*? (which is the equivalent to what appears to have happened here)",
            "created_at": "2019-03-19T10:26:09Z",
            "html_url": "https://github.com/cython/cython/issues/2897#issuecomment-474291684",
            "id": 474291684,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2897",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NDI5MTY4NA==",
            "updated_at": "2019-03-19T10:26:09Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/474291684",
            "user": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/1573352?v=4",
                "events_url": "https://api.github.com/users/JonasT/events{/privacy}",
                "followers_url": "https://api.github.com/users/JonasT/followers",
                "following_url": "https://api.github.com/users/JonasT/following{/other_user}",
                "gists_url": "https://api.github.com/users/JonasT/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/JonasT",
                "id": 1573352,
                "login": "JonasT",
                "node_id": "MDQ6VXNlcjE1NzMzNTI=",
                "organizations_url": "https://api.github.com/users/JonasT/orgs",
                "received_events_url": "https://api.github.com/users/JonasT/received_events",
                "repos_url": "https://api.github.com/users/JonasT/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/JonasT/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/JonasT/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/JonasT"
            }
        },
        {
            "author_association": "NONE",
            "body": "Nevermind, seems like `ptrdiff_t` is intentionally defined to not hold this very extreme case of range difference: https://en.cppreference.com/w/c/types/limits\r\n\r\nThat seems a bit silly to me, but that's apparently how things are :woman_shrugging: SO SORRY for all the noise :joy: I hope these comments teach someone something if stumbling across this via google or such",
            "created_at": "2019-03-19T10:29:44Z",
            "html_url": "https://github.com/cython/cython/issues/2897#issuecomment-474293479",
            "id": 474293479,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/2897",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NDI5MzQ3OQ==",
            "updated_at": "2019-03-19T10:29:44Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/474293479",
            "user": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/1573352?v=4",
                "events_url": "https://api.github.com/users/JonasT/events{/privacy}",
                "followers_url": "https://api.github.com/users/JonasT/followers",
                "following_url": "https://api.github.com/users/JonasT/following{/other_user}",
                "gists_url": "https://api.github.com/users/JonasT/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/JonasT",
                "id": 1573352,
                "login": "JonasT",
                "node_id": "MDQ6VXNlcjE1NzMzNTI=",
                "organizations_url": "https://api.github.com/users/JonasT/orgs",
                "received_events_url": "https://api.github.com/users/JonasT/received_events",
                "repos_url": "https://api.github.com/users/JonasT/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/JonasT/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/JonasT/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/JonasT"
            }
        }
    ],
    "comments": 4,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/2897/comments",
    "created_at": "2019-03-19T09:47:10Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/1573352?v=4",
                "events_url": "https://api.github.com/users/JonasT/events{/privacy}",
                "followers_url": "https://api.github.com/users/JonasT/followers",
                "following_url": "https://api.github.com/users/JonasT/following{/other_user}",
                "gists_url": "https://api.github.com/users/JonasT/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/JonasT",
                "id": 1573352,
                "login": "JonasT",
                "node_id": "MDQ6VXNlcjE1NzMzNTI=",
                "organizations_url": "https://api.github.com/users/JonasT/orgs",
                "received_events_url": "https://api.github.com/users/JonasT/received_events",
                "repos_url": "https://api.github.com/users/JonasT/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/JonasT/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/JonasT/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/JonasT"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2019-03-19T10:08:34Z",
            "event": "closed",
            "id": 2213010511,
            "node_id": "MDExOkNsb3NlZEV2ZW50MjIxMzAxMDUxMQ==",
            "url": "https://api.github.com/repos/cython/cython/issues/events/2213010511"
        },
        {
            "actor": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/1573352?v=4",
                "events_url": "https://api.github.com/users/JonasT/events{/privacy}",
                "followers_url": "https://api.github.com/users/JonasT/followers",
                "following_url": "https://api.github.com/users/JonasT/following{/other_user}",
                "gists_url": "https://api.github.com/users/JonasT/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/JonasT",
                "id": 1573352,
                "login": "JonasT",
                "node_id": "MDQ6VXNlcjE1NzMzNTI=",
                "organizations_url": "https://api.github.com/users/JonasT/orgs",
                "received_events_url": "https://api.github.com/users/JonasT/received_events",
                "repos_url": "https://api.github.com/users/JonasT/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/JonasT/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/JonasT/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/JonasT"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2019-03-19T10:24:42Z",
            "event": "renamed",
            "id": 2213059773,
            "node_id": "MDE3OlJlbmFtZWRUaXRsZUV2ZW50MjIxMzA1OTc3Mw==",
            "rename": {
                "from": "\"OverflowError: Python int too large to convert to C long\" when converting to ptrdiff_t",
                "to": "\"OverflowError: Python int too large to convert to C long\" when converting to ptrdiff_t - issue with ptrdiff_t size?"
            },
            "url": "https://api.github.com/repos/cython/cython/issues/events/2213059773"
        },
        {
            "actor": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/1573352?v=4",
                "events_url": "https://api.github.com/users/JonasT/events{/privacy}",
                "followers_url": "https://api.github.com/users/JonasT/followers",
                "following_url": "https://api.github.com/users/JonasT/following{/other_user}",
                "gists_url": "https://api.github.com/users/JonasT/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/JonasT",
                "id": 1573352,
                "login": "JonasT",
                "node_id": "MDQ6VXNlcjE1NzMzNTI=",
                "organizations_url": "https://api.github.com/users/JonasT/orgs",
                "received_events_url": "https://api.github.com/users/JonasT/received_events",
                "repos_url": "https://api.github.com/users/JonasT/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/JonasT/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/JonasT/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/JonasT"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2019-03-19T10:26:09Z",
            "event": "reopened",
            "id": 2213064186,
            "node_id": "MDEzOlJlb3BlbmVkRXZlbnQyMjEzMDY0MTg2",
            "url": "https://api.github.com/repos/cython/cython/issues/events/2213064186"
        },
        {
            "actor": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/1573352?v=4",
                "events_url": "https://api.github.com/users/JonasT/events{/privacy}",
                "followers_url": "https://api.github.com/users/JonasT/followers",
                "following_url": "https://api.github.com/users/JonasT/following{/other_user}",
                "gists_url": "https://api.github.com/users/JonasT/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/JonasT",
                "id": 1573352,
                "login": "JonasT",
                "node_id": "MDQ6VXNlcjE1NzMzNTI=",
                "organizations_url": "https://api.github.com/users/JonasT/orgs",
                "received_events_url": "https://api.github.com/users/JonasT/received_events",
                "repos_url": "https://api.github.com/users/JonasT/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/JonasT/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/JonasT/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/JonasT"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2019-03-19T10:29:44Z",
            "event": "closed",
            "id": 2213075554,
            "node_id": "MDExOkNsb3NlZEV2ZW50MjIxMzA3NTU1NA==",
            "url": "https://api.github.com/repos/cython/cython/issues/events/2213075554"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/2897/events",
    "html_url": "https://github.com/cython/cython/issues/2897",
    "id": 422632482,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/2897/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU0MjI2MzI0ODI=",
    "number": 2897,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "closed",
    "title": "\"OverflowError: Python int too large to convert to C long\" when converting to ptrdiff_t - issue with ptrdiff_t size?",
    "updated_at": "2019-03-19T10:29:44Z",
    "url": "https://api.github.com/repos/cython/cython/issues/2897",
    "user": {
        "avatar_url": "https://avatars3.githubusercontent.com/u/1573352?v=4",
        "events_url": "https://api.github.com/users/JonasT/events{/privacy}",
        "followers_url": "https://api.github.com/users/JonasT/followers",
        "following_url": "https://api.github.com/users/JonasT/following{/other_user}",
        "gists_url": "https://api.github.com/users/JonasT/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/JonasT",
        "id": 1573352,
        "login": "JonasT",
        "node_id": "MDQ6VXNlcjE1NzMzNTI=",
        "organizations_url": "https://api.github.com/users/JonasT/orgs",
        "received_events_url": "https://api.github.com/users/JonasT/received_events",
        "repos_url": "https://api.github.com/users/JonasT/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/JonasT/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/JonasT/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/JonasT"
    }
}