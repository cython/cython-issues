{
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "```cython\r\ncdef extern from *:\r\n    \"\"\"class Foo {\r\n    public:\r\n        Foo() {}\r\n    };\r\n    \"\"\"\r\n    cdef cppclass Foo:\r\n        pass\r\n\r\ndef create_foo():\r\n    Foo()\r\n\r\n```\r\n\r\nThis gives\r\n\r\n```\r\nError compiling Cython file:\r\n------------------------------------------------------------\r\n...\r\n    \"\"\"\r\n    cdef cppclass Foo:\r\n        pass\r\n\r\ndef create_foo():\r\n    Foo()\r\n   ^\r\n------------------------------------------------------------\r\n\r\nfoo.pyx:11:4: no constructor found for C++  type 'Foo'\r\n\r\nError compiling Cython file:\r\n------------------------------------------------------------\r\n...\r\n    \"\"\"\r\n    cdef cppclass Foo:\r\n        pass\r\n\r\ndef create_foo():\r\n    Foo()\r\n      ^\r\n------------------------------------------------------------\r\n\r\nfoo.pyx:11:7: Compiler crash in OptimizeBuiltinCalls\r\n\r\nModuleNode.body = StatListNode(foo.pyx:1:0)\r\nStatListNode.stats[1] = DefNode(foo.pyx:10:0,\r\n    modifiers = [...]/0,\r\n    name = 'create_foo',\r\n    np_args_idx = [...]/0,\r\n    outer_attrs = [...]/2,\r\n    py_wrapper_required = True,\r\n    reqd_kw_flags_cname = '0',\r\n    used = True)\r\nDefNode.body = StatListNode(foo.pyx:11:7)\r\nStatListNode.stats[0] = ExprStatNode(foo.pyx:11:7)\r\nExprStatNode.expr = SimpleCallNode(foo.pyx:11:7,\r\n    use_managed_ref = True)\r\n\r\nCompiler crash traceback from this point on:\r\n  File \"/Users/matthew/Code/ThirdParty/cython/Cython/Compiler/Visitor.py\", line 180, in _visit\r\n    return handler_method(obj)\r\n  File \"/Users/matthew/Code/ThirdParty/cython/Cython/Compiler/Visitor.py\", line 514, in visit_SimpleCallNode\r\n    if function.type.is_pyobject:\r\nAttributeError: 'NoneType' object has no attribute 'is_pyobject'\r\n```\r\n\r\nThe docs say it's not necessary to declare the constructor in this case, am I doing something wrong?",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Agreed that it shouldn't crash (so this is definitely a bug), but shouldn't you use `new Foo()` ?",
            "created_at": "2019-10-18T07:11:46Z",
            "html_url": "https://github.com/cython/cython/issues/3193#issuecomment-543559504",
            "id": 543559504,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3193",
            "node_id": "MDEyOklzc3VlQ29tbWVudDU0MzU1OTUwNA==",
            "updated_at": "2019-10-18T07:11:46Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/543559504",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I was expecting `f = Foo()` to default-construct a `Foo` on the stack, like `cdef Foo f` or the C++ `auto f = Foo()` would, and then I minimised the example to just `Foo()`.\r\n\r\nThe code I started from was this, which crashes the compiler if the default constructor for `std::greater` is not declared:\r\n```cython\r\nfrom libcpp cimport bool \r\nfrom libcpp.algorithm cimport sort \r\nfrom libcpp.vector cimport vector \r\n\r\ncdef extern from \"<functional>\" namespace \"std\" nogil: \r\n    cdef cppclass greater[T=*]: \r\n        greater() except +  # remove this to crash compiler\r\n        bool operator()(const T& lhs, const T& rhs) except + \r\n\r\ndef sort_ints_reverse(vector[int] values): \r\n    \"\"\"Test sort using a standard library comparison function object. \r\n \r\n    >>> sort_ints_reverse([5, 7, 4, 2, 8, 6, 1, 9, 0, 3]) \r\n    [9, 8, 7, 6, 5, 4, 3, 2, 1, 0] \r\n    \"\"\" \r\n    sort(values.begin(), values.end(), greater[int]()) \r\n    return values \r\n```",
            "created_at": "2019-10-18T10:35:11Z",
            "html_url": "https://github.com/cython/cython/issues/3193#issuecomment-543662787",
            "id": 543662787,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3193",
            "node_id": "MDEyOklzc3VlQ29tbWVudDU0MzY2Mjc4Nw==",
            "updated_at": "2019-10-18T10:35:11Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/543662787",
            "user": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/6166539?v=4",
                "events_url": "https://api.github.com/users/mje-nz/events{/privacy}",
                "followers_url": "https://api.github.com/users/mje-nz/followers",
                "following_url": "https://api.github.com/users/mje-nz/following{/other_user}",
                "gists_url": "https://api.github.com/users/mje-nz/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mje-nz",
                "id": 6166539,
                "login": "mje-nz",
                "node_id": "MDQ6VXNlcjYxNjY1Mzk=",
                "organizations_url": "https://api.github.com/users/mje-nz/orgs",
                "received_events_url": "https://api.github.com/users/mje-nz/received_events",
                "repos_url": "https://api.github.com/users/mje-nz/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mje-nz/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mje-nz/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mje-nz"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/3193/comments",
    "created_at": "2019-10-17T21:23:35Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2019-10-18T07:08:03Z",
            "event": "labeled",
            "id": 2723768111,
            "label": {
                "color": "444444",
                "name": "Type Analysis"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDI3MjM3NjgxMTE=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/2723768111"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2019-10-18T07:08:09Z",
            "event": "labeled",
            "id": 2723768363,
            "label": {
                "color": "444444",
                "name": "defect"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDI3MjM3NjgzNjM=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/2723768363"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/3193/events",
    "html_url": "https://github.com/cython/cython/issues/3193",
    "id": 508728125,
    "labels": [
        {
            "color": "444444",
            "default": false,
            "id": 425558824,
            "name": "Type Analysis",
            "node_id": "MDU6TGFiZWw0MjU1NTg4MjQ=",
            "url": "https://api.github.com/repos/cython/cython/labels/Type%20Analysis"
        },
        {
            "color": "444444",
            "default": false,
            "id": 425553654,
            "name": "defect",
            "node_id": "MDU6TGFiZWw0MjU1NTM2NTQ=",
            "url": "https://api.github.com/repos/cython/cython/labels/defect"
        }
    ],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/3193/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU1MDg3MjgxMjU=",
    "number": 3193,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "title": "Compiler crash when constructor is missing",
    "updated_at": "2019-10-18T10:35:11Z",
    "url": "https://api.github.com/repos/cython/cython/issues/3193",
    "user": {
        "avatar_url": "https://avatars3.githubusercontent.com/u/6166539?v=4",
        "events_url": "https://api.github.com/users/mje-nz/events{/privacy}",
        "followers_url": "https://api.github.com/users/mje-nz/followers",
        "following_url": "https://api.github.com/users/mje-nz/following{/other_user}",
        "gists_url": "https://api.github.com/users/mje-nz/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/mje-nz",
        "id": 6166539,
        "login": "mje-nz",
        "node_id": "MDQ6VXNlcjYxNjY1Mzk=",
        "organizations_url": "https://api.github.com/users/mje-nz/orgs",
        "received_events_url": "https://api.github.com/users/mje-nz/received_events",
        "repos_url": "https://api.github.com/users/mje-nz/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/mje-nz/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/mje-nz/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/mje-nz"
    }
}