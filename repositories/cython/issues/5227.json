{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Is your feature request related to a problem? Please describe.\n\nIn my code, I would like to compile multiple modules into a single shared object (.so or .pyd).\r\n\n\n### Describe the solution you'd like.\n\nThe functionality could be like cython_freeze but instead of creating a main function it would create a PyInit_mypackage that calls the PyInit_module functions of all the modules  and register the modules as buildin.\n\n### Describe alternatives you've considered.\n\n_No response_\n\n### Additional context\n\n_No response_",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "This would be a quite handy feature for writing accelerator modules. Currently I have a bunch for various parts of my package, meaning they all get built separately, have duplicate copies of utility code, constants and imports, etc. Each only has a few visible names for the public API. It'd be nice if there was a way to merge several, having Cython mangle names to avoid conflicts for the internals, reuse constants/utility code/imports. Then verify there's not overlaps on the Python-exposed API, and bundle all those into the same namespace for Python code to import from.\r\n\r\nNo idea if the structure of Cython would allow for this to be done without major rearchitecturing. ",
            "created_at": "2023-01-25T21:58:02Z",
            "html_url": "https://github.com/cython/cython/issues/5227#issuecomment-1404279716",
            "id": 1404279716,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/5227",
            "node_id": "IC_kwDOABDGAc5Ts5uk",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/1404279716/reactions"
            },
            "updated_at": "2023-01-25T21:58:02Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/1404279716",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8453732?v=4",
                "events_url": "https://api.github.com/users/TeamSpen210/events{/privacy}",
                "followers_url": "https://api.github.com/users/TeamSpen210/followers",
                "following_url": "https://api.github.com/users/TeamSpen210/following{/other_user}",
                "gists_url": "https://api.github.com/users/TeamSpen210/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/TeamSpen210",
                "id": 8453732,
                "login": "TeamSpen210",
                "node_id": "MDQ6VXNlcjg0NTM3MzI=",
                "organizations_url": "https://api.github.com/users/TeamSpen210/orgs",
                "received_events_url": "https://api.github.com/users/TeamSpen210/received_events",
                "repos_url": "https://api.github.com/users/TeamSpen210/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/TeamSpen210/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/TeamSpen210/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/TeamSpen210"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I think the deduplication of utility code should be treated as a separate issue (last time I looked at it I decided that it might be worthwhile for the memoryview code but really not for everything else).\r\n\r\nBundling modules into one .so file becomes a simpler problem if you compile each module to separate C files, use internal linkage for everything (which we basically do) and then the only name clashes that you need to worry about are the module init functions.\r\n\r\nThere's at least a couple of third-party tools that do this for Cython modules:\r\n* https://github.com/smok-serwis/snakehouse\r\n* https://github.com/dave-msk/merak",
            "created_at": "2023-01-25T23:05:47Z",
            "html_url": "https://github.com/cython/cython/issues/5227#issuecomment-1404338901",
            "id": 1404338901,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/5227",
            "node_id": "IC_kwDOABDGAc5TtILV",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/1404338901/reactions"
            },
            "updated_at": "2023-01-25T23:05:47Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/1404338901",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/5227/comments",
    "created_at": "2023-01-25T18:00:12Z",
    "event_data": [],
    "events_url": "https://api.github.com/repos/cython/cython/issues/5227/events",
    "html_url": "https://github.com/cython/cython/issues/5227",
    "id": 1557064670,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/5227/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOABDGAc5czuve",
    "number": 5227,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/cython/cython/issues/5227/reactions"
    },
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "state_reason": null,
    "timeline_url": "https://api.github.com/repos/cython/cython/issues/5227/timeline",
    "title": "[ENH] Allow to package multiple modules in one shared object",
    "updated_at": "2023-01-25T23:05:47Z",
    "url": "https://api.github.com/repos/cython/cython/issues/5227",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/1808876?v=4",
        "events_url": "https://api.github.com/users/rjungbeck/events{/privacy}",
        "followers_url": "https://api.github.com/users/rjungbeck/followers",
        "following_url": "https://api.github.com/users/rjungbeck/following{/other_user}",
        "gists_url": "https://api.github.com/users/rjungbeck/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/rjungbeck",
        "id": 1808876,
        "login": "rjungbeck",
        "node_id": "MDQ6VXNlcjE4MDg4NzY=",
        "organizations_url": "https://api.github.com/users/rjungbeck/orgs",
        "received_events_url": "https://api.github.com/users/rjungbeck/received_events",
        "repos_url": "https://api.github.com/users/rjungbeck/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/rjungbeck/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/rjungbeck/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/rjungbeck"
    }
}