{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "body": "### Describe your issue\n\nSince commit d95049a10888bdf996fdf7f60aca19410d74d9ab, Cython generates the following code:\n\n```c\n#if CYTHON_USE_PYLONG_INTERNALS\nstatic PyObject* __Pyx_Unpacked___Pyx_PyLong_MultiplyCObj( ...\n    ...\n    long b, x;\n    ...\n    if (likely(__Pyx_PyLong_IsCompact(op2))) {\n        b = __Pyx_PyLong_CompactValue(op2);\n    } else {\n```\n\nNote that `PyUnstable_Long_CompactValue` returns `Py_ssize_t`, but the result is assigned to a `long`. \nIn fact, I'm getting a corresponding warning from the C compiler on Windows:\nhttps://github.com/mpi4py/mpi4py/actions/runs/17461524191/job/49587112025#step:9:228\n```console\nsrc/mpi4py/MPI.c(298497): warning C4244: '=': conversion from 'Py_ssize_t' to 'long', possible loss of data\n```\n\nLooking at the CPython PyLong implementation, I not 100% sure integer truncation can ever occur in practice (max 30 bits in digit?). Therefore, maybe the trivial fix is to just add a `(long)` cast:\n\n```diff\ndiff --git a/Cython/Utility/Optimize.c b/Cython/Utility/Optimize.c\nindex d714042f1..1bd9dddb5 100644\n--- a/Cython/Utility/Optimize.c\n+++ b/Cython/Utility/Optimize.c\n@@ -1250,7 +1250,7 @@ static {{c_ret_type}} __Pyx_Unpacked_{{cfunc_name}}(PyObject *op1, PyObject *op2\n \n     // handle most common case first to avoid indirect branch and optimise branch prediction\n     if (likely(__Pyx_PyLong_IsCompact({{pyval}}))) {\n-        {{ival}} = __Pyx_PyLong_CompactValue({{pyval}});\n+        {{ival}} = (long) __Pyx_PyLong_CompactValue({{pyval}});\n     } else {\n         const digit* digits = __Pyx_PyLong_Digits({{pyval}});\n         const Py_ssize_t size = __Pyx_PyLong_SignedDigitCount({{pyval}});\n```\n",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "cc @scoder As the original author of that refactoring, let me know what you think. If you indeed agree that my patch above is good enough to silence the (otherwise inconsecuential) warning, I'll put a PR together for your review.",
            "created_at": "2025-09-04T11:25:16Z",
            "html_url": "https://github.com/cython/cython/issues/7134#issuecomment-3253232994",
            "id": 3253232994,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/7134",
            "node_id": "IC_kwDOABDGAc7B6GVi",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/3253232994/reactions"
            },
            "updated_at": "2025-09-04T11:25:16Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/3253232994",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/294981?v=4",
                "events_url": "https://api.github.com/users/dalcinl/events{/privacy}",
                "followers_url": "https://api.github.com/users/dalcinl/followers",
                "following_url": "https://api.github.com/users/dalcinl/following{/other_user}",
                "gists_url": "https://api.github.com/users/dalcinl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/dalcinl",
                "id": 294981,
                "login": "dalcinl",
                "node_id": "MDQ6VXNlcjI5NDk4MQ==",
                "organizations_url": "https://api.github.com/users/dalcinl/orgs",
                "received_events_url": "https://api.github.com/users/dalcinl/received_events",
                "repos_url": "https://api.github.com/users/dalcinl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/dalcinl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/dalcinl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/dalcinl",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "It's probably safe to just apply the cast, but that doesn't mean we need to take the risk of missing future changes here.\n\nSee https://github.com/cython/cython/pull/7160",
            "created_at": "2025-09-17T10:26:40Z",
            "html_url": "https://github.com/cython/cython/issues/7134#issuecomment-3302348008",
            "id": 3302348008,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/7134",
            "node_id": "IC_kwDOABDGAc7E1dTo",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/3302348008/reactions"
            },
            "updated_at": "2025-09-17T10:26:40Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/3302348008",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/7134/comments",
    "created_at": "2025-09-04T11:21:55Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder",
                "user_view_type": "public"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2025-09-04T11:25:18Z",
            "event": "mentioned",
            "id": 19502084929,
            "node_id": "MEE_lADOABDGAc7JqSqHzwAAAASKajNB",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/19502084929"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder",
                "user_view_type": "public"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2025-09-04T11:25:18Z",
            "event": "subscribed",
            "id": 19502084946,
            "node_id": "SE_lADOABDGAc7JqSqHzwAAAASKajNS",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/19502084946"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/827060?v=4",
                "events_url": "https://api.github.com/users/matusvalo/events{/privacy}",
                "followers_url": "https://api.github.com/users/matusvalo/followers",
                "following_url": "https://api.github.com/users/matusvalo/following{/other_user}",
                "gists_url": "https://api.github.com/users/matusvalo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/matusvalo",
                "id": 827060,
                "login": "matusvalo",
                "node_id": "MDQ6VXNlcjgyNzA2MA==",
                "organizations_url": "https://api.github.com/users/matusvalo/orgs",
                "received_events_url": "https://api.github.com/users/matusvalo/received_events",
                "repos_url": "https://api.github.com/users/matusvalo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/matusvalo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/matusvalo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/matusvalo",
                "user_view_type": "public"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2025-09-06T19:56:08Z",
            "event": "labeled",
            "id": 19547155218,
            "label": {
                "color": "444444",
                "name": "Code Generation"
            },
            "node_id": "LE_lADOABDGAc7JqSqHzwAAAASNGesS",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/19547155218"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder",
                "user_view_type": "public"
            },
            "commit_id": "da0af6c8f08ca14a84ea91857392b1b20478b8d1",
            "commit_url": "https://api.github.com/repos/scoder/cython/commits/da0af6c8f08ca14a84ea91857392b1b20478b8d1",
            "created_at": "2025-09-17T10:21:30Z",
            "event": "referenced",
            "id": 19746907648,
            "node_id": "REFE_lADOABDGAc7JqSqHzwAAAASZAeYA",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/19746907648"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder",
                "user_view_type": "public"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2025-09-17T10:22:07Z",
            "event": "milestoned",
            "id": 19746922097,
            "milestone": {
                "title": "3.1.5"
            },
            "node_id": "MIE_lADOABDGAc7JqSqHzwAAAASZAh5x",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/19746922097"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder",
                "user_view_type": "public"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2025-09-17T10:22:19Z",
            "event": "labeled",
            "id": 19746926194,
            "label": {
                "color": "444444",
                "name": "defect"
            },
            "node_id": "LE_lADOABDGAc7JqSqHzwAAAASZAi5y",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/19746926194"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder",
                "user_view_type": "public"
            },
            "commit_id": "7521afb8cce76bf395914de2d9d283292093bcda",
            "commit_url": "https://api.github.com/repos/scoder/cython/commits/7521afb8cce76bf395914de2d9d283292093bcda",
            "created_at": "2025-09-17T10:29:06Z",
            "event": "referenced",
            "id": 19747064746,
            "node_id": "REFE_lADOABDGAc7JqSqHzwAAAASZBEuq",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/19747064746"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/7134/events",
    "html_url": "https://github.com/cython/cython/issues/7134",
    "id": 3383306887,
    "issue_dependencies_summary": {
        "blocked_by": 0,
        "blocking": 0,
        "total_blocked_by": 0,
        "total_blocking": 0
    },
    "labels": [
        {
            "color": "444444",
            "default": false,
            "description": null,
            "id": 425553654,
            "name": "defect",
            "node_id": "MDU6TGFiZWw0MjU1NTM2NTQ=",
            "url": "https://api.github.com/repos/cython/cython/labels/defect"
        },
        {
            "color": "444444",
            "default": false,
            "description": null,
            "id": 425556330,
            "name": "Code Generation",
            "node_id": "MDU6TGFiZWw0MjU1NTYzMzA=",
            "url": "https://api.github.com/repos/cython/cython/labels/Code%20Generation"
        }
    ],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/7134/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 1,
        "created_at": "2025-09-16T12:47:49Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
            "events_url": "https://api.github.com/users/scoder/events{/privacy}",
            "followers_url": "https://api.github.com/users/scoder/followers",
            "following_url": "https://api.github.com/users/scoder/following{/other_user}",
            "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/scoder",
            "id": 491659,
            "login": "scoder",
            "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
            "organizations_url": "https://api.github.com/users/scoder/orgs",
            "received_events_url": "https://api.github.com/users/scoder/received_events",
            "repos_url": "https://api.github.com/users/scoder/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/scoder",
            "user_view_type": "public"
        },
        "description": "",
        "due_on": null,
        "html_url": "https://github.com/cython/cython/milestone/117",
        "id": 13704293,
        "labels_url": "https://api.github.com/repos/cython/cython/milestones/117/labels",
        "node_id": "MI_kwDOABDGAc4A0Rxl",
        "number": 117,
        "open_issues": 2,
        "state": "open",
        "title": "3.1.5",
        "updated_at": "2025-09-17T10:25:06Z",
        "url": "https://api.github.com/repos/cython/cython/milestones/117"
    },
    "node_id": "I_kwDOABDGAc7JqSqH",
    "number": 7134,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/cython/cython/issues/7134/reactions"
    },
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/cython/cython/issues/7134/timeline",
    "title": "Warning about integer truncation in generated C code",
    "type": null,
    "updated_at": "2025-09-17T10:26:40Z",
    "url": "https://api.github.com/repos/cython/cython/issues/7134",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/294981?v=4",
        "events_url": "https://api.github.com/users/dalcinl/events{/privacy}",
        "followers_url": "https://api.github.com/users/dalcinl/followers",
        "following_url": "https://api.github.com/users/dalcinl/following{/other_user}",
        "gists_url": "https://api.github.com/users/dalcinl/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/dalcinl",
        "id": 294981,
        "login": "dalcinl",
        "node_id": "MDQ6VXNlcjI5NDk4MQ==",
        "organizations_url": "https://api.github.com/users/dalcinl/orgs",
        "received_events_url": "https://api.github.com/users/dalcinl/received_events",
        "repos_url": "https://api.github.com/users/dalcinl/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/dalcinl/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/dalcinl/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/dalcinl",
        "user_view_type": "public"
    }
}