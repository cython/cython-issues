{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "<!--\r\n**Note:**\r\n- Do not use the bug and feature tracker for support requests. Use the `cython-users` mailing list instead.\r\n- Did you search for similar issues already? Please do, it helps to save us precious time that we otherwise could not invest into development.\r\n- Did you try the latest master branch or pre-release? It might already have what you want to report.\r\n-->\r\n\r\n**Describe the bug**\r\nWhen attempting to index a MemoryView using a tuple, the error `Invalid index for memoryview specified, type (int, int)` occurs on compile. However, it is possible to index a tuple in two cases: by running the `__getitem__` method on the same view and using the same tuple as an argument, or by using a tuple literal. This indicates to me that this is indeed an implemented feature, but cannot be accessed.\r\n\r\n**To Reproduce**\r\nCode to reproduce the behaviour:\r\n\r\n```\r\nimport numpy as np\r\ncdef int[:,:] view = np.resize(np.arange(20, dtype='i'), (10,2))\r\ncdef (int,int)index = (3,0)\r\n\r\nview.__getitem__(index)       # this works\r\nview[(3,0)]                   # this also works\r\nview[index]                   # this fails\r\n```\r\n\r\n**Expected behavior**\r\nI expect the last line to produce the same output as the first two, but it raises an error at build.\r\n\r\n**Environment (please complete the following information):**\r\n - OS: macOS\r\n - Version: 0.29.21\r\n\r\n**Additional context**\r\nThis occurs using multiple cython methods (`pyxinstall`, Cython command, `setup.py`)\r\n",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "COLLABORATOR",
            "body": "FWIW: indexing with an generic untyped tuple (which looks to currently works) is likely to be fairly slow compared to most memoryview operations. What you're trying (indexing with a C-tuple) could probably be made fairly quick.",
            "created_at": "2020-08-01T07:17:48Z",
            "html_url": "https://github.com/cython/cython/issues/3761#issuecomment-667487032",
            "id": 667487032,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3761",
            "node_id": "MDEyOklzc3VlQ29tbWVudDY2NzQ4NzAzMg==",
            "performed_via_github_app": null,
            "updated_at": "2020-08-01T07:17:48Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/667487032",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "That's not implemented yet, but yes, that would be a lovely feature. It would know the number of indices in the ctuple and their types, so everything could be arranged at compile time.\r\n\r\nWhat happens behind the scenes in the cases where this works is that Cython converts the ctuple to a Python tuple and passes that, losing all compile time information about the indices.\r\n\r\nCould you add a couple of (currently failing) tests to the test file `tests/memoryview/memslice.pyx` ? Different index types, ctuple lengths, whatever you can come up with?",
            "created_at": "2020-08-01T07:30:38Z",
            "html_url": "https://github.com/cython/cython/issues/3761#issuecomment-667488557",
            "id": 667488557,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3761",
            "node_id": "MDEyOklzc3VlQ29tbWVudDY2NzQ4ODU1Nw==",
            "performed_via_github_app": null,
            "updated_at": "2020-08-01T07:30:38Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/667488557",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/3761/comments",
    "created_at": "2020-07-31T21:15:04Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2020-08-01T04:55:32Z",
            "event": "labeled",
            "id": 3611213503,
            "label": {
                "color": "444444",
                "name": "Cython Language Feature"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDM2MTEyMTM1MDM=",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/3611213503"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2020-08-01T04:55:32Z",
            "event": "labeled",
            "id": 3611213504,
            "label": {
                "color": "c2e0c6",
                "name": "feature"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDM2MTEyMTM1MDQ=",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/3611213504"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2020-08-01T04:55:32Z",
            "event": "labeled",
            "id": 3611213505,
            "label": {
                "color": "444444",
                "name": "Type Analysis"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDM2MTEyMTM1MDU=",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/3611213505"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2020-08-01T07:39:59Z",
            "event": "renamed",
            "id": 3611414017,
            "node_id": "MDE3OlJlbmFtZWRUaXRsZUV2ZW50MzYxMTQxNDAxNw==",
            "performed_via_github_app": null,
            "rename": {
                "from": "MemoryView cannot be indexed with tuple",
                "to": "MemoryView cannot be indexed with ctuple"
            },
            "url": "https://api.github.com/repos/cython/cython/issues/events/3611414017"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/3761/events",
    "html_url": "https://github.com/cython/cython/issues/3761",
    "id": 670240983,
    "labels": [
        {
            "color": "444444",
            "default": false,
            "description": null,
            "id": 425559948,
            "name": "Cython Language Feature",
            "node_id": "MDU6TGFiZWw0MjU1NTk5NDg=",
            "url": "https://api.github.com/repos/cython/cython/labels/Cython%20Language%20Feature"
        },
        {
            "color": "444444",
            "default": false,
            "description": null,
            "id": 425558824,
            "name": "Type Analysis",
            "node_id": "MDU6TGFiZWw0MjU1NTg4MjQ=",
            "url": "https://api.github.com/repos/cython/cython/labels/Type%20Analysis"
        },
        {
            "color": "c2e0c6",
            "default": false,
            "description": null,
            "id": 414805463,
            "name": "feature",
            "node_id": "MDU6TGFiZWw0MTQ4MDU0NjM=",
            "url": "https://api.github.com/repos/cython/cython/labels/feature"
        }
    ],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/3761/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU2NzAyNDA5ODM=",
    "number": 3761,
    "performed_via_github_app": null,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "title": "MemoryView cannot be indexed with ctuple",
    "updated_at": "2020-08-01T07:39:59Z",
    "url": "https://api.github.com/repos/cython/cython/issues/3761",
    "user": {
        "avatar_url": "https://avatars0.githubusercontent.com/u/5956054?v=4",
        "events_url": "https://api.github.com/users/stuartthomas25/events{/privacy}",
        "followers_url": "https://api.github.com/users/stuartthomas25/followers",
        "following_url": "https://api.github.com/users/stuartthomas25/following{/other_user}",
        "gists_url": "https://api.github.com/users/stuartthomas25/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/stuartthomas25",
        "id": 5956054,
        "login": "stuartthomas25",
        "node_id": "MDQ6VXNlcjU5NTYwNTQ=",
        "organizations_url": "https://api.github.com/users/stuartthomas25/orgs",
        "received_events_url": "https://api.github.com/users/stuartthomas25/received_events",
        "repos_url": "https://api.github.com/users/stuartthomas25/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/stuartthomas25/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/stuartthomas25/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/stuartthomas25"
    }
}