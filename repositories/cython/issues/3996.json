{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "<!--\r\n**PLEASE READ THIS FIRST:**\r\n- Do not use the bug and feature tracker for support requests. Use the `cython-users` mailing list instead.\r\n- Did you search for similar issues already? Please do, it helps to save us precious time that we otherwise could not invest into development.\r\n- Did you try the latest master branch or pre-release? It might already have what you want to report. Also see the [Changelog](https://github.com/cython/cython/blob/master/CHANGES.rst) regarding recent changes.\r\n-->\r\n\r\n**Describe the bug**\r\n```\r\ncimport cython\r\ncpdef void main():\r\n    cdef object [::1] v0 = cython.view.array(shape=(0,), itemsize=sizeof(void *), format='O')\r\n```\r\n```\r\nValueError: Invalid shape in axis 0: 0.\r\n```\r\n\r\n**To Reproduce**\r\nRun the above.\r\n\r\n**Expected behavior**\r\nThat the array with no elements would get created\r\n\r\n**Environment (please complete the following information):**\r\n - OS: Win 10\r\n - Python version: 3.8.5\r\n - Cython version: 0.29.21\r\n\r\n**Additional context**\r\n[One of the tests](https://github.com/mrakgr/The-Spiral-Language/blob/1592cf7ee6805ef2f2ed13351c121d61828f7c42/Spiral%20Compilation%20Tests/compilation_tests/test45/test.spi) for the Spiral language does a breath first search using nested arrays instead of a queue, so it can have a size of zero towards the end after all the moves get filtered.\r\n\r\nI have no idea why this weird restriction is in place here. This wasn't the case with the Numpy arrays or pretty much any kind of array in any language I've looked at.\r\n",
    "closed_at": "2021-02-02T17:01:41Z",
    "comment_data": [
        {
            "author_association": "COLLABORATOR",
            "body": "Duplicate of https://github.com/cython/cython/issues/3334. I think we should allow this given that you can get a size-0 memoryview by creatively slicing another memoryview.",
            "created_at": "2021-02-02T17:01:41Z",
            "html_url": "https://github.com/cython/cython/issues/3996#issuecomment-771791450",
            "id": 771791450,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3996",
            "node_id": "MDEyOklzc3VlQ29tbWVudDc3MTc5MTQ1MA==",
            "performed_via_github_app": null,
            "updated_at": "2021-02-02T17:02:29Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/771791450",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        },
        {
            "author_association": "NONE",
            "body": "It is good that this will be easy to fix. I've gone back to Numpy arrays until this gets resolved, so please do so.",
            "created_at": "2021-02-03T08:49:25Z",
            "html_url": "https://github.com/cython/cython/issues/3996#issuecomment-772341166",
            "id": 772341166,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3996",
            "node_id": "MDEyOklzc3VlQ29tbWVudDc3MjM0MTE2Ng==",
            "performed_via_github_app": null,
            "updated_at": "2021-02-03T08:49:25Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/772341166",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6266635?v=4",
                "events_url": "https://api.github.com/users/mrakgr/events{/privacy}",
                "followers_url": "https://api.github.com/users/mrakgr/followers",
                "following_url": "https://api.github.com/users/mrakgr/following{/other_user}",
                "gists_url": "https://api.github.com/users/mrakgr/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mrakgr",
                "id": 6266635,
                "login": "mrakgr",
                "node_id": "MDQ6VXNlcjYyNjY2MzU=",
                "organizations_url": "https://api.github.com/users/mrakgr/orgs",
                "received_events_url": "https://api.github.com/users/mrakgr/received_events",
                "repos_url": "https://api.github.com/users/mrakgr/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mrakgr/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mrakgr/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mrakgr"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/3996/comments",
    "created_at": "2021-02-02T16:57:16Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2021-02-02T17:01:41Z",
            "event": "closed",
            "id": 4280473471,
            "node_id": "MDExOkNsb3NlZEV2ZW50NDI4MDQ3MzQ3MQ==",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/4280473471"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2021-02-02T17:01:50Z",
            "event": "labeled",
            "id": 4280474420,
            "label": {
                "color": "444444",
                "name": "R: duplicate"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDQyODA0NzQ0MjA=",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/4280474420"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/3996/events",
    "html_url": "https://github.com/cython/cython/issues/3996",
    "id": 799467355,
    "labels": [
        {
            "color": "444444",
            "default": false,
            "description": null,
            "id": 425556894,
            "name": "R: duplicate",
            "node_id": "MDU6TGFiZWw0MjU1NTY4OTQ=",
            "url": "https://api.github.com/repos/cython/cython/labels/R:%20duplicate"
        }
    ],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/3996/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU3OTk0NjczNTU=",
    "number": 3996,
    "performed_via_github_app": null,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "closed",
    "title": "[BUG] Memory view arrays cannot be size 0",
    "updated_at": "2021-02-03T08:49:25Z",
    "url": "https://api.github.com/repos/cython/cython/issues/3996",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/6266635?v=4",
        "events_url": "https://api.github.com/users/mrakgr/events{/privacy}",
        "followers_url": "https://api.github.com/users/mrakgr/followers",
        "following_url": "https://api.github.com/users/mrakgr/following{/other_user}",
        "gists_url": "https://api.github.com/users/mrakgr/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/mrakgr",
        "id": 6266635,
        "login": "mrakgr",
        "node_id": "MDQ6VXNlcjYyNjY2MzU=",
        "organizations_url": "https://api.github.com/users/mrakgr/orgs",
        "received_events_url": "https://api.github.com/users/mrakgr/received_events",
        "repos_url": "https://api.github.com/users/mrakgr/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/mrakgr/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/mrakgr/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/mrakgr"
    }
}