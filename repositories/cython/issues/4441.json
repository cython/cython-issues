{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "<!--\r\n**PLEASE READ THIS FIRST:**\r\n- Do not use the bug and feature tracker for support requests. Use the `cython-users` mailing list instead.\r\n- Did you search for similar issues already? Please do, it helps to save us precious time that we otherwise could not invest into development.\r\n- Did you try the latest master branch or pre-release? It might already have what you want to report. Also see the [Changelog](https://github.com/cython/cython/blob/master/CHANGES.rst) regarding recent changes.\r\n-->\r\n\r\n**Describe the bug**\r\nUsing `python setup.py build_ext --cython-directives=linetrace=True` with `build_ext`/`old_build_ext` is broken.\r\n\r\n**To Reproduce**\r\nJust run `python setup.py build_ext --cython-directives=linetrace=True` on any Cython project using the `build_ext`/`old_build_ext`\r\n\r\n**Expected behavior**\r\nIt should work, instead it raises an exception because `linetrace=True` is left as a string and not parsed into a list of directives. (How to parse the value part might require some consideration...)\r\n\r\n**Environment (please complete the following information):**\r\n - OS: Windows\r\n - Python version 3.10.0\r\n - Cython version 0.29.24\r\n\r\n**Additional context**\r\nSee https://groups.google.com/g/cython-users/c/C52mc9lm5xo\r\n",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Right, that looks wrong. I guess no-one has ever used this. That means that we can probably leave this unresolved, given that we're deprecating `old_build_ext` in favour of `new_build_ext`. Let's just make sure it works there.",
            "created_at": "2021-11-02T19:13:17Z",
            "html_url": "https://github.com/cython/cython/issues/4441#issuecomment-958091348",
            "id": 958091348,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/4441",
            "node_id": "IC_kwDOABDGAc45G1BU",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/958091348/reactions"
            },
            "updated_at": "2021-11-02T19:13:17Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/958091348",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "For the latest changes in `new_build_ext`, see https://github.com/cython/cython/pull/4339",
            "created_at": "2021-11-02T19:21:56Z",
            "html_url": "https://github.com/cython/cython/issues/4441#issuecomment-958097379",
            "id": 958097379,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/4441",
            "node_id": "IC_kwDOABDGAc45G2fj",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/958097379/reactions"
            },
            "updated_at": "2021-11-02T19:21:56Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/958097379",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "NONE",
            "body": "Hmmm. It doesn't seem that even in that PR we have a way to pass `cython-directives` from either the CLI, or from the `Extension` instance, or from any `setup` keyword arg? Nor any other Cython specific flags to cythonize?",
            "created_at": "2021-11-02T21:15:30Z",
            "html_url": "https://github.com/cython/cython/issues/4441#issuecomment-958172282",
            "id": 958172282,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/4441",
            "node_id": "IC_kwDOABDGAc45HIx6",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/958172282/reactions"
            },
            "updated_at": "2021-11-02T21:27:19Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/958172282",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/24731903?v=4",
                "events_url": "https://api.github.com/users/segevfiner/events{/privacy}",
                "followers_url": "https://api.github.com/users/segevfiner/followers",
                "following_url": "https://api.github.com/users/segevfiner/following{/other_user}",
                "gists_url": "https://api.github.com/users/segevfiner/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/segevfiner",
                "id": 24731903,
                "login": "segevfiner",
                "node_id": "MDQ6VXNlcjI0NzMxOTAz",
                "organizations_url": "https://api.github.com/users/segevfiner/orgs",
                "received_events_url": "https://api.github.com/users/segevfiner/received_events",
                "repos_url": "https://api.github.com/users/segevfiner/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/segevfiner/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/segevfiner/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/segevfiner"
            }
        },
        {
            "author_association": "NONE",
            "body": "Welp... Looks like even passing `cython_directives` to the `Extension` in `old_build_ext` is broken. Just passing it to the normal extension generates a warning, so it looks like you need to import `Extension` from `Cython.Distutils`, but then it just errors out with `error: unknown file type '.pyx' (from 'cypcap.pyx')`",
            "created_at": "2021-11-03T01:18:58Z",
            "html_url": "https://github.com/cython/cython/issues/4441#issuecomment-958584657",
            "id": 958584657,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/4441",
            "node_id": "IC_kwDOABDGAc45ItdR",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/958584657/reactions"
            },
            "updated_at": "2021-11-03T01:18:58Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/958584657",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/24731903?v=4",
                "events_url": "https://api.github.com/users/segevfiner/events{/privacy}",
                "followers_url": "https://api.github.com/users/segevfiner/followers",
                "following_url": "https://api.github.com/users/segevfiner/following{/other_user}",
                "gists_url": "https://api.github.com/users/segevfiner/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/segevfiner",
                "id": 24731903,
                "login": "segevfiner",
                "node_id": "MDQ6VXNlcjI0NzMxOTAz",
                "organizations_url": "https://api.github.com/users/segevfiner/orgs",
                "received_events_url": "https://api.github.com/users/segevfiner/received_events",
                "repos_url": "https://api.github.com/users/segevfiner/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/segevfiner/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/segevfiner/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/segevfiner"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "BTW part of #3541 is migrating all directives to `new_build_ext`. This should close this issue. I can work on that when #4339 is merged to master.",
            "created_at": "2021-11-03T20:13:03Z",
            "html_url": "https://github.com/cython/cython/issues/4441#issuecomment-959942900",
            "id": 959942900,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/4441",
            "node_id": "IC_kwDOABDGAc45N5D0",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/959942900/reactions"
            },
            "updated_at": "2021-11-03T20:13:03Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/959942900",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/827060?v=4",
                "events_url": "https://api.github.com/users/matusvalo/events{/privacy}",
                "followers_url": "https://api.github.com/users/matusvalo/followers",
                "following_url": "https://api.github.com/users/matusvalo/following{/other_user}",
                "gists_url": "https://api.github.com/users/matusvalo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/matusvalo",
                "id": 827060,
                "login": "matusvalo",
                "node_id": "MDQ6VXNlcjgyNzA2MA==",
                "organizations_url": "https://api.github.com/users/matusvalo/orgs",
                "received_events_url": "https://api.github.com/users/matusvalo/received_events",
                "repos_url": "https://api.github.com/users/matusvalo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/matusvalo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/matusvalo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/matusvalo"
            }
        }
    ],
    "comments": 5,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/4441/comments",
    "created_at": "2021-11-02T16:34:09Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2021-11-02T19:13:28Z",
            "event": "labeled",
            "id": 5557748059,
            "label": {
                "color": "444444",
                "name": "Build System"
            },
            "node_id": "LE_lADOABDGAc4-JIgbzwAAAAFLRIFb",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/5557748059"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2021-11-02T19:13:28Z",
            "event": "labeled",
            "id": 5557748066,
            "label": {
                "color": "444444",
                "name": "defect"
            },
            "node_id": "LE_lADOABDGAc4-JIgbzwAAAAFLRIFi",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/5557748066"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/4441/events",
    "html_url": "https://github.com/cython/cython/issues/4441",
    "id": 1042581531,
    "labels": [
        {
            "color": "444444",
            "default": false,
            "description": null,
            "id": 425553654,
            "name": "defect",
            "node_id": "MDU6TGFiZWw0MjU1NTM2NTQ=",
            "url": "https://api.github.com/repos/cython/cython/labels/defect"
        },
        {
            "color": "444444",
            "default": false,
            "description": null,
            "id": 425556353,
            "name": "Build System",
            "node_id": "MDU6TGFiZWw0MjU1NTYzNTM=",
            "url": "https://api.github.com/repos/cython/cython/labels/Build%20System"
        }
    ],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/4441/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOABDGAc4-JIgb",
    "number": 4441,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/cython/cython/issues/4441/reactions"
    },
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "timeline_url": "https://api.github.com/repos/cython/cython/issues/4441/timeline",
    "title": "[BUG] --cython-directives flag to build_ext/old_build_ext is broken",
    "updated_at": "2021-11-03T20:13:03Z",
    "url": "https://api.github.com/repos/cython/cython/issues/4441",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/24731903?v=4",
        "events_url": "https://api.github.com/users/segevfiner/events{/privacy}",
        "followers_url": "https://api.github.com/users/segevfiner/followers",
        "following_url": "https://api.github.com/users/segevfiner/following{/other_user}",
        "gists_url": "https://api.github.com/users/segevfiner/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/segevfiner",
        "id": 24731903,
        "login": "segevfiner",
        "node_id": "MDQ6VXNlcjI0NzMxOTAz",
        "organizations_url": "https://api.github.com/users/segevfiner/orgs",
        "received_events_url": "https://api.github.com/users/segevfiner/received_events",
        "repos_url": "https://api.github.com/users/segevfiner/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/segevfiner/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/segevfiner/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/segevfiner"
    }
}