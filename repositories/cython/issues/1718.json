{
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "I basically got these files:\r\n**src/header.pxd**\r\n```\r\ncdef extern from \"<stdio.h>\":\r\n    int printf (const char*, ...)\r\n```\r\n**src/main.pyx**\r\n```\r\ncimport header\r\ndef myFunc ():\r\n    header.printf (\"Hello World\\n\")\r\n```\r\n**setup.py**\r\n```\r\nfrom distutils.core import setup\r\nfrom distutils.extension import Extension\r\nfrom Cython.Build import cythonize\r\n\r\next_modules = [\r\n    Extension (\"*\", sources = [\"src/main.pyx\"], include_dirs = ['.'])\r\n]\r\nsetup (\r\n  name = \"blabla\",\r\n  ext_modules = cythonize (ext_modules),\r\n  script_args = ['build_ext'],\r\n  options = {'build_ext': { 'inplace':True } }\r\n)\r\n```\r\n \r\n\r\nNow if I run this I get this output:\r\n```\r\n>>> python setup.py\r\nsrc/main.pyx: cannot find cimported module 'header'\r\nrunning build_ext\r\nbuilding 'main' extension\r\ngcc -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -Os -fomit-frame-pointer -fPIC -I. -I/usr/include/python3.5m -c src/main.c -o build/temp.linux-x86_64-3.5/src/main.o\r\ngcc -shared -Wl,--as-needed build/temp.linux-x86_64-3.5/src/main.o -L/usr/lib -lpython3.5m -o /home/programming/python/main.cpython-35m-x86_64-linux-gnu.so\r\n```\r\nThe warning makes no sense to me since importing the module and calling myFunc works fine.\r\nIf I put main.pyx and header.pxd in the same directory as setup.py the warning goes away.\r\nWhat am I missing here?\r\n> \r\nIf I add a empty \\_\\_init\\_\\_.py - file to the src-directory the warning goes away but then I cannot import any global module in main.pxy ... So when I add the init-file and change main.pxy to this\r\n```\r\ncimport header\r\nimport sys\r\ndef myFunc ():\r\n    header.printf (\"Hello World\\n\")\r\n    print (sys.version)\r\n```\r\nI get this this error when importing the module:\r\n```\r\nPython 3.5.2 (default, Dec 22 2016, 10:15:38) \r\n[GCC 6.2.1 20160822] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import main\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"src/main.pyx\", line 4, in init src.main (src/main.c:1050)\r\n    import sys\r\nSystemError: Parent module '' not loaded, cannot perform relative import\r\n```\r\n\r\n",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "I faced the same problem. Looks like cythonize assumes the package is layed out below setup.py, without interim directories (technically: adds just \".\" to its pxd search path to handle local pxd files).\r\n\r\nThere is simple workaround: add src to path yourself. In my case it was\r\n```\r\n   ext_modules=cythonize(\r\n        â€¦,\r\n        # help cythonize find my own .pxd files\r\n        include_path=[os.path.join(os.path.dirname(os.path.abspath(__file__)), \"src\")],\r\n   )\r\n```\r\n\r\n(mayhaps bare [\"src\"] would suffiice but I opted to be safe and calculated absolute path)",
            "created_at": "2018-08-27T16:58:36Z",
            "html_url": "https://github.com/cython/cython/issues/1718#issuecomment-416293378",
            "id": 416293378,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/1718",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQxNjI5MzM3OA==",
            "updated_at": "2018-08-27T16:58:36Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/416293378",
            "user": {
                "avatar_url": "https://avatars2.githubusercontent.com/u/161873?v=4",
                "events_url": "https://api.github.com/users/Mekk/events{/privacy}",
                "followers_url": "https://api.github.com/users/Mekk/followers",
                "following_url": "https://api.github.com/users/Mekk/following{/other_user}",
                "gists_url": "https://api.github.com/users/Mekk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Mekk",
                "id": 161873,
                "login": "Mekk",
                "node_id": "MDQ6VXNlcjE2MTg3Mw==",
                "organizations_url": "https://api.github.com/users/Mekk/orgs",
                "received_events_url": "https://api.github.com/users/Mekk/received_events",
                "repos_url": "https://api.github.com/users/Mekk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Mekk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Mekk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Mekk"
            }
        },
        {
            "author_association": "NONE",
            "body": "btw: in my case I inform setup about my layout by \r\n```\r\n    package_dir={'': \"src\"},\r\n```\r\nand of course at the time cythonize is called, this option is in no way available. Not sure whether pretty solution is possible (by pretty I mean handling this automatically, what would mean lazy-ing dependency calculation until setup object is constructed) but probably cythonize could handle some \"where is top of my package\" argument (defaulting to \".\" but allowing me to set it to \"src\" or whatever I use in given case) ",
            "created_at": "2018-08-27T17:03:49Z",
            "html_url": "https://github.com/cython/cython/issues/1718#issuecomment-416295047",
            "id": 416295047,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/1718",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQxNjI5NTA0Nw==",
            "updated_at": "2018-08-27T17:03:49Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/416295047",
            "user": {
                "avatar_url": "https://avatars2.githubusercontent.com/u/161873?v=4",
                "events_url": "https://api.github.com/users/Mekk/events{/privacy}",
                "followers_url": "https://api.github.com/users/Mekk/followers",
                "following_url": "https://api.github.com/users/Mekk/following{/other_user}",
                "gists_url": "https://api.github.com/users/Mekk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Mekk",
                "id": 161873,
                "login": "Mekk",
                "node_id": "MDQ6VXNlcjE2MTg3Mw==",
                "organizations_url": "https://api.github.com/users/Mekk/orgs",
                "received_events_url": "https://api.github.com/users/Mekk/received_events",
                "repos_url": "https://api.github.com/users/Mekk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Mekk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Mekk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Mekk"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/1718/comments",
    "created_at": "2017-05-27T17:06:34Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2017-08-17T16:18:39Z",
            "event": "labeled",
            "id": 1210459999,
            "label": {
                "color": "444444",
                "name": "Build System"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDEyMTA0NTk5OTk=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/1210459999"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2017-08-17T16:18:39Z",
            "event": "labeled",
            "id": 1210460000,
            "label": {
                "color": "444444",
                "name": "defect"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDEyMTA0NjAwMDA=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/1210460000"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2017-08-17T16:18:39Z",
            "event": "labeled",
            "id": 1210460002,
            "label": {
                "color": "444444",
                "name": "P: minor"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDEyMTA0NjAwMDI=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/1210460002"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2017-08-17T16:18:39Z",
            "event": "labeled",
            "id": 1210460004,
            "label": {
                "color": "0e8a16",
                "name": "patch wanted"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDEyMTA0NjAwMDQ=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/1210460004"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/1718/events",
    "html_url": "https://github.com/cython/cython/issues/1718",
    "id": 231814798,
    "labels": [
        {
            "color": "444444",
            "default": false,
            "id": 425556353,
            "name": "Build System",
            "node_id": "MDU6TGFiZWw0MjU1NTYzNTM=",
            "url": "https://api.github.com/repos/cython/cython/labels/Build%20System"
        },
        {
            "color": "444444",
            "default": false,
            "id": 425556338,
            "name": "P: minor",
            "node_id": "MDU6TGFiZWw0MjU1NTYzMzg=",
            "url": "https://api.github.com/repos/cython/cython/labels/P:%20minor"
        },
        {
            "color": "444444",
            "default": false,
            "id": 425553654,
            "name": "defect",
            "node_id": "MDU6TGFiZWw0MjU1NTM2NTQ=",
            "url": "https://api.github.com/repos/cython/cython/labels/defect"
        },
        {
            "color": "0e8a16",
            "default": true,
            "id": 414800879,
            "name": "help wanted",
            "node_id": "MDU6TGFiZWw0MTQ4MDA4Nzk=",
            "url": "https://api.github.com/repos/cython/cython/labels/help%20wanted"
        }
    ],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/1718/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWUyMzE4MTQ3OTg=",
    "number": 1718,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "title": "'cannot find cimported module' with subfolder",
    "updated_at": "2018-08-27T17:03:49Z",
    "url": "https://api.github.com/repos/cython/cython/issues/1718",
    "user": {
        "avatar_url": "https://avatars2.githubusercontent.com/u/14794405?v=4",
        "events_url": "https://api.github.com/users/xatian/events{/privacy}",
        "followers_url": "https://api.github.com/users/xatian/followers",
        "following_url": "https://api.github.com/users/xatian/following{/other_user}",
        "gists_url": "https://api.github.com/users/xatian/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/xatian",
        "id": 14794405,
        "login": "xatian",
        "node_id": "MDQ6VXNlcjE0Nzk0NDA1",
        "organizations_url": "https://api.github.com/users/xatian/orgs",
        "received_events_url": "https://api.github.com/users/xatian/received_events",
        "repos_url": "https://api.github.com/users/xatian/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/xatian/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/xatian/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/xatian"
    }
}