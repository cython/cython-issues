{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "I have a extension class which including C++ member (`std::vector<my_struct>`, and `my_struct` has some `std::pair<int, int>` members).\r\nAnd there also has a `std::pair<int, int>` type definition in the same source.\r\n\r\nI'm found that the conversion function (`std::pair<int, int>` to `tuple[int, int]`) is defined twice unless added `@cython.auto_pickle(False)` on my extension class.\r\n\r\n```\r\n11510:18: error: redefinition of 'PyObject* __pyx_convert_pair_to_py_int____int(const std::pair<int, int>&)'\r\n static PyObject *__pyx_convert_pair_to_py_int____int(std::pair<int,int>  const &__pyx_v_p) {\r\n                  ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n10055:18: note: 'PyObject* __pyx_convert_pair_to_py_int____int(const std::pair<int, int>&)' previously defined here\r\n static PyObject *__pyx_convert_pair_to_py_int____int(std::pair<int,int>  const &__pyx_v_p) {\r\n                  ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n```\r\n\r\nI'm not clearly know how Cython checks the tool functions of `ctypedef`.\r\nIn another case My extension members are sharing a same `ctypedef` with local variables, but this error is not occurred.",
    "closed_at": "2021-03-27T10:15:55Z",
    "comment_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "When I'm using `vector[pair[int, int]]` and `map[int, bint]` in the same file, the error comes again.\r\nRegardless creating type alias or using original form can't solve the problem.\r\n\r\nMaybe somewhere Cython treats `bint` as a different type when generating conversion functions.",
            "created_at": "2020-07-14T09:33:51Z",
            "html_url": "https://github.com/cython/cython/issues/3741#issuecomment-658079212",
            "id": 658079212,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3741",
            "node_id": "MDEyOklzc3VlQ29tbWVudDY1ODA3OTIxMg==",
            "performed_via_github_app": null,
            "updated_at": "2020-07-14T09:33:51Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/658079212",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10264720?v=4",
                "events_url": "https://api.github.com/users/KmolYuan/events{/privacy}",
                "followers_url": "https://api.github.com/users/KmolYuan/followers",
                "following_url": "https://api.github.com/users/KmolYuan/following{/other_user}",
                "gists_url": "https://api.github.com/users/KmolYuan/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/KmolYuan",
                "id": 10264720,
                "login": "KmolYuan",
                "node_id": "MDQ6VXNlcjEwMjY0NzIw",
                "organizations_url": "https://api.github.com/users/KmolYuan/orgs",
                "received_events_url": "https://api.github.com/users/KmolYuan/received_events",
                "repos_url": "https://api.github.com/users/KmolYuan/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/KmolYuan/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/KmolYuan/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/KmolYuan"
            }
        },
        {
            "author_association": "COLLABORATOR",
            "body": "This looks like substantially the same issue as https://github.com/cython/cython/issues/3716 and https://github.com/cython/cython/issues/3734. The problem is where Cython utility code is itself generating utility code. Each lot of 2nd-level generated utility code is generated without access to the full module scope so can end up sharing names.\r\n\r\nI'll try to have a look at it in the near future. Although it looked trick to solve last time I looked",
            "created_at": "2020-07-14T17:07:48Z",
            "html_url": "https://github.com/cython/cython/issues/3741#issuecomment-658300485",
            "id": 658300485,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3741",
            "node_id": "MDEyOklzc3VlQ29tbWVudDY1ODMwMDQ4NQ==",
            "performed_via_github_app": null,
            "updated_at": "2020-07-14T17:07:48Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/658300485",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "My case is little complex, which mixed a lot of functions and cannot extracted to a small one.\r\nI'm not actually know what cause the duplicated code in my module.\r\n\r\nThe repo is here, change this line from `Status &` to `object` can reproduce the error: (build by `setup.py`)\r\nhttps://github.com/KmolYuan/pyslvs/blob/master/pyslvs/topo_config.pyx#L187\r\n\r\nBut this error does not bother me at the moment.",
            "created_at": "2020-07-19T12:51:22Z",
            "html_url": "https://github.com/cython/cython/issues/3741#issuecomment-660639153",
            "id": 660639153,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3741",
            "node_id": "MDEyOklzc3VlQ29tbWVudDY2MDYzOTE1Mw==",
            "performed_via_github_app": null,
            "updated_at": "2020-07-19T12:52:07Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/660639153",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10264720?v=4",
                "events_url": "https://api.github.com/users/KmolYuan/events{/privacy}",
                "followers_url": "https://api.github.com/users/KmolYuan/followers",
                "following_url": "https://api.github.com/users/KmolYuan/following{/other_user}",
                "gists_url": "https://api.github.com/users/KmolYuan/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/KmolYuan",
                "id": 10264720,
                "login": "KmolYuan",
                "node_id": "MDQ6VXNlcjEwMjY0NzIw",
                "organizations_url": "https://api.github.com/users/KmolYuan/orgs",
                "received_events_url": "https://api.github.com/users/KmolYuan/received_events",
                "repos_url": "https://api.github.com/users/KmolYuan/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/KmolYuan/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/KmolYuan/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/KmolYuan"
            }
        }
    ],
    "comments": 3,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/3741/comments",
    "created_at": "2020-07-14T08:59:18Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10264720?v=4",
                "events_url": "https://api.github.com/users/KmolYuan/events{/privacy}",
                "followers_url": "https://api.github.com/users/KmolYuan/followers",
                "following_url": "https://api.github.com/users/KmolYuan/following{/other_user}",
                "gists_url": "https://api.github.com/users/KmolYuan/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/KmolYuan",
                "id": 10264720,
                "login": "KmolYuan",
                "node_id": "MDQ6VXNlcjEwMjY0NzIw",
                "organizations_url": "https://api.github.com/users/KmolYuan/orgs",
                "received_events_url": "https://api.github.com/users/KmolYuan/received_events",
                "repos_url": "https://api.github.com/users/KmolYuan/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/KmolYuan/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/KmolYuan/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/KmolYuan"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2020-07-14T09:23:53Z",
            "event": "renamed",
            "id": 3543299030,
            "node_id": "MDE3OlJlbmFtZWRUaXRsZUV2ZW50MzU0MzI5OTAzMA==",
            "performed_via_github_app": null,
            "rename": {
                "from": "\"auto_pickle\" option causes conversion function redefinition error when handling C++ member",
                "to": "\"ctypdef\" causes conversion function redefinition error when handling C++ types"
            },
            "url": "https://api.github.com/repos/cython/cython/issues/events/3543299030"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10264720?v=4",
                "events_url": "https://api.github.com/users/KmolYuan/events{/privacy}",
                "followers_url": "https://api.github.com/users/KmolYuan/followers",
                "following_url": "https://api.github.com/users/KmolYuan/following{/other_user}",
                "gists_url": "https://api.github.com/users/KmolYuan/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/KmolYuan",
                "id": 10264720,
                "login": "KmolYuan",
                "node_id": "MDQ6VXNlcjEwMjY0NzIw",
                "organizations_url": "https://api.github.com/users/KmolYuan/orgs",
                "received_events_url": "https://api.github.com/users/KmolYuan/received_events",
                "repos_url": "https://api.github.com/users/KmolYuan/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/KmolYuan/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/KmolYuan/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/KmolYuan"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2020-07-14T09:28:23Z",
            "event": "renamed",
            "id": 3543317317,
            "node_id": "MDE3OlJlbmFtZWRUaXRsZUV2ZW50MzU0MzMxNzMxNw==",
            "performed_via_github_app": null,
            "rename": {
                "from": "\"ctypdef\" causes conversion function redefinition error when handling C++ types",
                "to": "Conversion function redefinition error when handling C++ types"
            },
            "url": "https://api.github.com/repos/cython/cython/issues/events/3543317317"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2021-03-27T10:15:55Z",
            "event": "closed",
            "id": 4516911797,
            "node_id": "MDExOkNsb3NlZEV2ZW50NDUxNjkxMTc5Nw==",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/4516911797"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": "9decfca1b7c836247c80ea94aca8c7cacf70327c",
            "commit_url": "https://api.github.com/repos/cython/cython/commits/9decfca1b7c836247c80ea94aca8c7cacf70327c",
            "created_at": "2021-03-27T10:15:56Z",
            "event": "referenced",
            "id": 4516911813,
            "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ1MTY5MTE4MTM=",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/4516911813"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/3741/events",
    "html_url": "https://github.com/cython/cython/issues/3741",
    "id": 656450583,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/3741/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU2NTY0NTA1ODM=",
    "number": 3741,
    "performed_via_github_app": null,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "closed",
    "title": "Conversion function redefinition error when handling C++ types",
    "updated_at": "2021-03-27T10:15:55Z",
    "url": "https://api.github.com/repos/cython/cython/issues/3741",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/10264720?v=4",
        "events_url": "https://api.github.com/users/KmolYuan/events{/privacy}",
        "followers_url": "https://api.github.com/users/KmolYuan/followers",
        "following_url": "https://api.github.com/users/KmolYuan/following{/other_user}",
        "gists_url": "https://api.github.com/users/KmolYuan/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/KmolYuan",
        "id": 10264720,
        "login": "KmolYuan",
        "node_id": "MDQ6VXNlcjEwMjY0NzIw",
        "organizations_url": "https://api.github.com/users/KmolYuan/orgs",
        "received_events_url": "https://api.github.com/users/KmolYuan/received_events",
        "repos_url": "https://api.github.com/users/KmolYuan/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/KmolYuan/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/KmolYuan/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/KmolYuan"
    }
}