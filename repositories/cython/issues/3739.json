{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "I am getting errors when using a debugger with Cython-compiled classes that utilize inheritance AND have linetrace/macros turned on to enable code coverage. As it stands I cannot have a release version of a couple libraries I maintain with line tracing enabled and have it work with a debugger. \r\n\r\n [Link to Github gist with minimal reproduction of error](https://gist.github.com/brandonmkunkel/7f466da9a9e94187b37dc05ef6009a08)\r\n\r\nIn this example I create a Parent class and a Child class that inherits from Parent in the same file, and an Orphan class that does not use inheritance. setup.py compiles the extensions and test_debug_imports must be run attached to your debugger. \r\n\r\nOther Notes:\r\n\r\n- I still get this error when separating the Parent class to separate pyx/pxd files.\r\n- The error doesn't show up when \"linetrace\"=True but macros \"CYTHON_TRACE\" and \"CYTHON_TRACE_NOGIL\" are not enabled\r\n\r\nSystem Configuration\r\n\r\n- IDE: Pycharm\r\n- Python: 3.7.7 x64\r\n- Compiler: MSVC x64\r\n\r\nError Traceback:\r\n\r\n```python\r\nC:\\dev\\cython_example\\venv\\Scripts\\python.exe \"C:\\Program Files\\JetBrains\\PyCharm 2019.1.2\\plugins\\python\\helpers\\pydev\\pydevd.py\" --multiproc --qt-support=auto --client 127.0.0.1 --port 54295 --file C:/dev/cython_example/test_debug_imports.py\r\n\r\npydev debugger: process 32868 is connecting\r\n\r\nConnected to pydev debugger (build 201.8538.36)\r\nTraceback (most recent call last):\r\n  File \"C:\\Program Files\\JetBrains\\PyCharm 2019.1.2\\plugins\\python\\helpers\\pydev\\pydevd.py\", line 2131, in <module>\r\n    main()\r\n  File \"C:\\Program Files\\JetBrains\\PyCharm 2019.1.2\\plugins\\python\\helpers\\pydev\\pydevd.py\", line 2122, in main\r\n    globals = debugger.run(setup['file'], None, None, is_module)\r\n  File \"C:\\Program Files\\JetBrains\\PyCharm 2019.1.2\\plugins\\python\\helpers\\pydev\\pydevd.py\", line 1431, in run\r\n    return self._exec(is_module, entry_point_fn, module_name, file, globals, locals)\r\n  File \"C:\\Program Files\\JetBrains\\PyCharm 2019.1.2\\plugins\\python\\helpers\\pydev\\pydevd.py\", line 1438, in _exec\r\n    pydev_imports.execfile(file, globals, locals)  # execute the script\r\n  File \"C:\\Program Files\\JetBrains\\PyCharm 2019.1.2\\plugins\\python\\helpers\\pydev\\_pydev_imps\\_pydev_execfile.py\", line 18, in execfile\r\n    exec(compile(contents+\"\\n\", file, 'exec'), glob, loc)\r\n  File \"C:/dev/cython_example/test_debug_imports.py\", line 8, in <module>\r\n    test_child_import()\r\n  File \"C:/dev/cython_example/test_debug_imports.py\", line 2, in test_child_import\r\n    from child import Child\r\n  File \"stringsource\", line 1, in init child\r\n  File \"child.pyx\", line 1, in __Pyx_PyMODINIT_FUNC PyInit_child(void)\r\n    cdef class Parent:\r\nTypeError: 'NoneType' object is not callable\r\n```\r\n",
    "closed_at": null,
    "comment_data": [],
    "comments": 0,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/3739/comments",
    "created_at": "2020-07-10T15:06:59Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/38381956?v=4",
                "events_url": "https://api.github.com/users/brandonmkunkel/events{/privacy}",
                "followers_url": "https://api.github.com/users/brandonmkunkel/followers",
                "following_url": "https://api.github.com/users/brandonmkunkel/following{/other_user}",
                "gists_url": "https://api.github.com/users/brandonmkunkel/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/brandonmkunkel",
                "id": 38381956,
                "login": "brandonmkunkel",
                "node_id": "MDQ6VXNlcjM4MzgxOTU2",
                "organizations_url": "https://api.github.com/users/brandonmkunkel/orgs",
                "received_events_url": "https://api.github.com/users/brandonmkunkel/received_events",
                "repos_url": "https://api.github.com/users/brandonmkunkel/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/brandonmkunkel/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/brandonmkunkel/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/brandonmkunkel"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2020-07-10T15:08:25Z",
            "event": "renamed",
            "id": 3534296029,
            "node_id": "MDE3OlJlbmFtZWRUaXRsZUV2ZW50MzUzNDI5NjAyOQ==",
            "rename": {
                "from": "Runtime Error with Inheritance while running with debugger + linetrace on",
                "to": "TypeError with Inheritance while running with debugger + linetrace on"
            },
            "url": "https://api.github.com/repos/cython/cython/issues/events/3534296029"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/3739/events",
    "html_url": "https://github.com/cython/cython/issues/3739",
    "id": 654846717,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/3739/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU2NTQ4NDY3MTc=",
    "number": 3739,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "title": "TypeError with Inheritance while running with debugger + linetrace on",
    "updated_at": "2020-07-10T15:08:25Z",
    "url": "https://api.github.com/repos/cython/cython/issues/3739",
    "user": {
        "avatar_url": "https://avatars0.githubusercontent.com/u/38381956?v=4",
        "events_url": "https://api.github.com/users/brandonmkunkel/events{/privacy}",
        "followers_url": "https://api.github.com/users/brandonmkunkel/followers",
        "following_url": "https://api.github.com/users/brandonmkunkel/following{/other_user}",
        "gists_url": "https://api.github.com/users/brandonmkunkel/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/brandonmkunkel",
        "id": 38381956,
        "login": "brandonmkunkel",
        "node_id": "MDQ6VXNlcjM4MzgxOTU2",
        "organizations_url": "https://api.github.com/users/brandonmkunkel/orgs",
        "received_events_url": "https://api.github.com/users/brandonmkunkel/received_events",
        "repos_url": "https://api.github.com/users/brandonmkunkel/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/brandonmkunkel/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/brandonmkunkel/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/brandonmkunkel"
    }
}