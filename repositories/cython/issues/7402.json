{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Describe the bug\n\nWhile running the tests of numpy under TSAN the following data races are reported:\n\n```console\n\nWARNING: ThreadSanitizer: data race (pid=68622)\n  Atomic read of size 8 at 0x0003202908e0 by thread T2129:\n    #0 _Py_DecRefShared object.c:430 (python.exe:arm64+0x1001a8944)\n    #1 __Pyx_AddTraceback mtrand.pyx.c:35758 (mtrand.cpython-314t-darwin.so:arm64+0x7574)\n    #2 method_vectorcall classobject.c:65 (python.exe:arm64+0x1000df080)\n    #3 _PyVectorcall_Call call.c:285 (python.exe:arm64+0x1000da8ac)\n    #4 _PyObject_Call call.c:348 (python.exe:arm64+0x1000dab40)\n    #5 PyObject_Call call.c:373 (python.exe:arm64+0x1000dad50)\n    #6 _PyEval_EvalFrameDefault generated_cases.c.h:2654 (python.exe:arm64+0x10033fb70)\n    #7 _PyEval_Vector ceval.c:2083 (python.exe:arm64+0x10032542c)\n    #8 _PyFunction_Vectorcall call.c (python.exe:arm64+0x1000daf64)\n    #9 _PyObject_VectorcallTstate pycore_call.h:169 (python.exe:arm64+0x1000e0cf8)\n    #10 method_vectorcall classobject.c:65 (python.exe:arm64+0x1000df080)\n    #11 _PyVectorcall_Call call.c:285 (python.exe:arm64+0x1000da8ac)\n    #12 _PyObject_Call call.c:348 (python.exe:arm64+0x1000dab40)\n    #13 PyObject_Call call.c:373 (python.exe:arm64+0x1000dad50)\n    #14 _PyEval_EvalFrameDefault generated_cases.c.h:2654 (python.exe:arm64+0x10033fb70)\n    #15 _PyEval_Vector ceval.c:2083 (python.exe:arm64+0x10032542c)\n    #16 _PyFunction_Vectorcall call.c (python.exe:arm64+0x1000daf64)\n    #17 _PyObject_VectorcallTstate pycore_call.h:169 (python.exe:arm64+0x1000e0cf8)\n    #18 method_vectorcall classobject.c:73 (python.exe:arm64+0x1000df0b8)\n    #19 _PyVectorcall_Call call.c:273 (python.exe:arm64+0x1000da900)\n    #20 _PyObject_Call call.c:348 (python.exe:arm64+0x1000dab40)\n    #21 PyObject_Call call.c:373 (python.exe:arm64+0x1000dad50)\n    #22 _PyEval_EvalFrameDefault generated_cases.c.h:2654 (python.exe:arm64+0x10033fb70)\n    #23 _PyEval_Vector ceval.c:2083 (python.exe:arm64+0x10032542c)\n    #24 _PyFunction_Vectorcall call.c (python.exe:arm64+0x1000daf64)\n    #25 _PyObject_VectorcallTstate pycore_call.h:169 (python.exe:arm64+0x1000e0cf8)\n    #26 method_vectorcall classobject.c:73 (python.exe:arm64+0x1000df0b8)\n    #27 context_run context.c:728 (python.exe:arm64+0x100395d64)\n    #28 _PyEval_EvalFrameDefault generated_cases.c.h:3744 (python.exe:arm64+0x10034c1b4)\n    #29 _PyEval_Vector ceval.c:2083 (python.exe:arm64+0x10032542c)\n    #30 _PyFunction_Vectorcall call.c (python.exe:arm64+0x1000daf64)\n    #31 _PyObject_VectorcallTstate pycore_call.h:169 (python.exe:arm64+0x1000e0cf8)\n    #32 method_vectorcall classobject.c:73 (python.exe:arm64+0x1000df0b8)\n    #33 _PyVectorcall_Call call.c:273 (python.exe:arm64+0x1000da900)\n    #34 _PyObject_Call call.c:348 (python.exe:arm64+0x1000dab40)\n    #35 PyObject_Call call.c:373 (python.exe:arm64+0x1000dad50)\n    #36 thread_run _threadmodule.c:359 (python.exe:arm64+0x100546b0c)\n    #37 pythread_wrapper thread_pthread.h:242 (python.exe:arm64+0x1004759b4)\n\n  Previous write of size 8 at 0x0003202908e0 by thread T2130:\n    #0 _PyObject_SetDeferredRefcount object.c:2585 (python.exe:arm64+0x1001af9f8)\n    #1 _PyObject_AssignUniqueId uniqueid.c:96 (python.exe:arm64+0x10047f3d8)\n    #2 _PyCode_New codeobject.c:754 (python.exe:arm64+0x1000e2d8c)\n    #3 PyCode_NewEmpty codeobject.c:1000 (python.exe:arm64+0x1000e3e20)\n    #4 __Pyx_AddTraceback mtrand.pyx.c:35747 (mtrand.cpython-314t-darwin.so:arm64+0x7230)\n    #5 method_vectorcall classobject.c:65 (python.exe:arm64+0x1000df080)\n    #6 _PyVectorcall_Call call.c:285 (python.exe:arm64+0x1000da8ac)\n    #7 _PyObject_Call call.c:348 (python.exe:arm64+0x1000dab40)\n    #8 PyObject_Call call.c:373 (python.exe:arm64+0x1000dad50)\n    #9 _PyEval_EvalFrameDefault generated_cases.c.h:2654 (python.exe:arm64+0x10033fb70)\n    #10 _PyEval_Vector ceval.c:2083 (python.exe:arm64+0x10032542c)\n    #11 _PyFunction_Vectorcall call.c (python.exe:arm64+0x1000daf64)\n    #12 _PyObject_VectorcallTstate pycore_call.h:169 (python.exe:arm64+0x1000e0cf8)\n    #13 method_vectorcall classobject.c:65 (python.exe:arm64+0x1000df080)\n    #14 _PyVectorcall_Call call.c:285 (python.exe:arm64+0x1000da8ac)\n    #15 _PyObject_Call call.c:348 (python.exe:arm64+0x1000dab40)\n    #16 PyObject_Call call.c:373 (python.exe:arm64+0x1000dad50)\n    #17 _PyEval_EvalFrameDefault generated_cases.c.h:2654 (python.exe:arm64+0x10033fb70)\n    #18 _PyEval_Vector ceval.c:2083 (python.exe:arm64+0x10032542c)\n    #19 _PyFunction_Vectorcall call.c (python.exe:arm64+0x1000daf64)\n    #20 _PyObject_VectorcallTstate pycore_call.h:169 (python.exe:arm64+0x1000e0cf8)\n    #21 method_vectorcall classobject.c:73 (python.exe:arm64+0x1000df0b8)\n    #22 _PyVectorcall_Call call.c:273 (python.exe:arm64+0x1000da900)\n    #23 _PyObject_Call call.c:348 (python.exe:arm64+0x1000dab40)\n    #24 PyObject_Call call.c:373 (python.exe:arm64+0x1000dad50)\n    #25 _PyEval_EvalFrameDefault generated_cases.c.h:2654 (python.exe:arm64+0x10033fb70)\n    #26 _PyEval_Vector ceval.c:2083 (python.exe:arm64+0x10032542c)\n    #27 _PyFunction_Vectorcall call.c (python.exe:arm64+0x1000daf64)\n    #28 _PyObject_VectorcallTstate pycore_call.h:169 (python.exe:arm64+0x1000e0cf8)\n    #29 method_vectorcall classobject.c:73 (python.exe:arm64+0x1000df0b8)\n    #30 context_run context.c:728 (python.exe:arm64+0x100395d64)\n    #31 _PyEval_EvalFrameDefault generated_cases.c.h:3744 (python.exe:arm64+0x10034c1b4)\n    #32 _PyEval_Vector ceval.c:2083 (python.exe:arm64+0x10032542c)\n    #33 _PyFunction_Vectorcall call.c (python.exe:arm64+0x1000daf64)\n    #34 _PyObject_VectorcallTstate pycore_call.h:169 (python.exe:arm64+0x1000e0cf8)\n    #35 method_vectorcall classobject.c:73 (python.exe:arm64+0x1000df0b8)\n    #36 _PyVectorcall_Call call.c:273 (python.exe:arm64+0x1000da900)\n    #37 _PyObject_Call call.c:348 (python.exe:arm64+0x1000dab40)\n    #38 PyObject_Call call.c:373 (python.exe:arm64+0x1000dad50)\n    #39 thread_run _threadmodule.c:359 (python.exe:arm64+0x100546b0c)\n\nSUMMARY: ThreadSanitizer: data race object.c:430 in _Py_DecRefShared\n==================\n==================\nWARNING: ThreadSanitizer: data race (pid=68622)\n  Read of size 8 at 0x00032a1d0a98 by thread T3206:\n    #0 PyFrame_New frameobject.c:2137 (python.exe:arm64+0x10012ae18)\n    #1 __Pyx_AddTraceback mtrand.pyx.c:35760 (mtrand.cpython-314t-darwin.so:arm64+0x73c4)\n    #2 PyObject_Vectorcall call.c:327 (python.exe:arm64+0x1000daa4c)\n    #3 _PyEval_EvalFrameDefault generated_cases.c.h:1619 (python.exe:arm64+0x10034df40)\n    #4 _PyEval_Vector ceval.c:2083 (python.exe:arm64+0x10032542c)\n    #5 _PyFunction_Vectorcall call.c (python.exe:arm64+0x1000daf64)\n    #6 _PyObject_VectorcallTstate pycore_call.h:169 (python.exe:arm64+0x1000e0cf8)\n    #7 method_vectorcall classobject.c:73 (python.exe:arm64+0x1000df0b8)\n    #8 context_run context.c:728 (python.exe:arm64+0x100395d64)\n    #9 _PyEval_EvalFrameDefault generated_cases.c.h:3744 (python.exe:arm64+0x10034c1b4)\n    #10 _PyEval_Vector ceval.c:2083 (python.exe:arm64+0x10032542c)\n    #11 _PyFunction_Vectorcall call.c (python.exe:arm64+0x1000daf64)\n    #12 _PyObject_VectorcallTstate pycore_call.h:169 (python.exe:arm64+0x1000e0cf8)\n    #13 method_vectorcall classobject.c:73 (python.exe:arm64+0x1000df0b8)\n    #14 _PyVectorcall_Call call.c:273 (python.exe:arm64+0x1000da900)\n    #15 _PyObject_Call call.c:348 (python.exe:arm64+0x1000dab40)\n    #16 PyObject_Call call.c:373 (python.exe:arm64+0x1000dad50)\n    #17 thread_run _threadmodule.c:359 (python.exe:arm64+0x100546b0c)\n    #18 pythread_wrapper thread_pthread.h:242 (python.exe:arm64+0x1004759b4)\n\n  Previous write of size 8 at 0x00032a1d0a98 by thread T3208:\n    #0 _PyUnicode_InternMortal unicodeobject.c:16082 (python.exe:arm64+0x100278620)\n    #1 _PyCode_New codeobject.c:748 (python.exe:arm64+0x1000e26b8)\n    #2 PyCode_NewEmpty codeobject.c:1000 (python.exe:arm64+0x1000e3e20)\n    #3 __Pyx_AddTraceback mtrand.pyx.c:35747 (mtrand.cpython-314t-darwin.so:arm64+0x7230)\n    #4 PyObject_Vectorcall call.c:327 (python.exe:arm64+0x1000daa4c)\n    #5 _PyEval_EvalFrameDefault generated_cases.c.h:1619 (python.exe:arm64+0x10034df40)\n    #6 _PyEval_Vector ceval.c:2083 (python.exe:arm64+0x10032542c)\n    #7 _PyFunction_Vectorcall call.c (python.exe:arm64+0x1000daf64)\n    #8 _PyObject_VectorcallTstate pycore_call.h:169 (python.exe:arm64+0x1000e0cf8)\n    #9 method_vectorcall classobject.c:73 (python.exe:arm64+0x1000df0b8)\n    #10 context_run context.c:728 (python.exe:arm64+0x100395d64)\n    #11 _PyEval_EvalFrameDefault generated_cases.c.h:3744 (python.exe:arm64+0x10034c1b4)\n    #12 _PyEval_Vector ceval.c:2083 (python.exe:arm64+0x10032542c)\n    #13 _PyFunction_Vectorcall call.c (python.exe:arm64+0x1000daf64)\n    #14 _PyObject_VectorcallTstate pycore_call.h:169 (python.exe:arm64+0x1000e0cf8)\n    #15 method_vectorcall classobject.c:73 (python.exe:arm64+0x1000df0b8)\n    #16 _PyVectorcall_Call call.c:273 (python.exe:arm64+0x1000da900)\n    #17 _PyObject_Call call.c:348 (python.exe:arm64+0x1000dab40)\n    #18 PyObject_Call call.c:373 (python.exe:arm64+0x1000dad50)\n    #19 thread_run _threadmodule.c:359 (python.exe:arm64+0x100546b0c)\n    #20 pythread_wrapper thread_pthread.h:242 (python.exe:arm64+0x1004759b4)\n\nSUMMARY: ThreadSanitizer: data race frameobject.c:2137 in PyFrame_New\n==================\n```\n\n### Code to reproduce the behaviour:\n\nRun the tests of numpy using pytest-run-parallel as described in https://github.com/numpy/numpy/issues/30085\n\n### Expected behaviour\n\nNo data races\n\n### OS\n\nAll \n\n### Python version\n\n3.14t\n\n### Cython version\n\n_No response_\n\n### Additional context\n\n_No response_",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Based on a superficial skim-read, this doesn't feel like a Cython bug.\n\nE.g. one of the errors is from `PyCode_NewEmpty` which really should be reentrant. I'm fairly sure the `const char*`s we pass in to it are genuinely const (but I'll double-check that later).  I'm struggling to see how we should be able to create a data race involving it.",
            "created_at": "2025-12-11T12:15:16Z",
            "html_url": "https://github.com/cython/cython/issues/7402#issuecomment-3641646621",
            "id": 3641646621,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/7402",
            "node_id": "IC_kwDOABDGAc7ZDx4d",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/3641646621/reactions"
            },
            "updated_at": "2025-12-11T12:15:16Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/3641646621",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I need to investigate this a bit more on Numpy but I can reproduce this on a toy example **only if I don't instrument the Cython module**. For reference, toy example:\n\n```cython\n# cython: freethreading_compatible=True\n\ndef f():\n    raise RuntimeError\n```\n\nand runner:\n\n```python\nimport raisesomething\n\nimport threading\n\nb = threading.Barrier(4)\n\ndef thread_func():\n    b.wait()\n    for i in range(4):\n        try:\n            raisesomething.f()\n        except RuntimeError:\n            pass\n\nthreads = [threading.Thread(target=thread_func) for _ in range(4)]\nfor t in threads:\n    t.start()\nfor t in threads:\n    t.join()\n```\n\nMy current view is that there are suitable load-acquire barriers between the frame being generated in `PyCode_NewEmpty` and being used by other threads in `PyFrame_New`. However, if the Cython module is built without thread-sanitizer then they're invisible and so you get this error. I've consistently failed to reproduce it when building the Cython module with thread-sanitizer.\n\nI'll have a look at the full Numpy example at some point later to see if I can confirm my suspicions, but that's the current theory.\n\n",
            "created_at": "2025-12-12T08:34:14Z",
            "html_url": "https://github.com/cython/cython/issues/7402#issuecomment-3645481878",
            "id": 3645481878,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/7402",
            "node_id": "IC_kwDOABDGAc7ZSaOW",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/3645481878/reactions"
            },
            "updated_at": "2025-12-12T08:34:14Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/3645481878",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Another possibility is that it's being built with atomics that thread sanitizer can't see properly (possibly the old GCC `sync` atomics). I can't make this fail on x64 Linux, but it's possible that OS X on arm is slightly different.\n\nIf that was the case, it'd be an argument for having slightly more modern fallback atomics.",
            "created_at": "2025-12-12T08:42:32Z",
            "html_url": "https://github.com/cython/cython/issues/7402#issuecomment-3645507590",
            "id": 3645507590,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/7402",
            "node_id": "IC_kwDOABDGAc7ZSggG",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/3645507590/reactions"
            },
            "updated_at": "2025-12-12T08:42:32Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/3645507590",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "> I can't make this fail on x64 Linux, but it's possible that OS X on arm is slightly different.\n\nI had tested it on arm64 mac, haven't tested on linux so that is possible. ",
            "created_at": "2025-12-12T13:10:48Z",
            "html_url": "https://github.com/cython/cython/issues/7402#issuecomment-3646422713",
            "id": 3646422713,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/7402",
            "node_id": "IC_kwDOABDGAc7ZV_65",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/3646422713/reactions"
            },
            "updated_at": "2025-12-12T13:10:48Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/3646422713",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59607654?v=4",
                "events_url": "https://api.github.com/users/kumaraditya303/events{/privacy}",
                "followers_url": "https://api.github.com/users/kumaraditya303/followers",
                "following_url": "https://api.github.com/users/kumaraditya303/following{/other_user}",
                "gists_url": "https://api.github.com/users/kumaraditya303/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/kumaraditya303",
                "id": 59607654,
                "login": "kumaraditya303",
                "node_id": "MDQ6VXNlcjU5NjA3NjU0",
                "organizations_url": "https://api.github.com/users/kumaraditya303/orgs",
                "received_events_url": "https://api.github.com/users/kumaraditya303/received_events",
                "repos_url": "https://api.github.com/users/kumaraditya303/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/kumaraditya303/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/kumaraditya303/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/kumaraditya303",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I didn't manage to reproduce this when running `spin test -p auto -t numpy/random/tests -v` (or at least didn't see any thread sanitizer complaints in the output - it's possible they're going somewhere else...).  Running the full test suite is too slow for me unfortunately.\n\nI still think it's most likely an issue with thread sanitizer not seeing the Cython atomics rather than a genuine thread-safety issue.\n\nWould it be possible to build numpy with `CFLAGS=\"-D__PYX_DEBUG_ATOMICS=1\" spin build ...`?\n\nThere's no need to run numpy though - all I'm interesting in is some warnings that get printed during the build - something like:\n\n```\n#warning \"Using standard C atomics\"\n```\n\nIt should also be the same all through, so once you've seen one there's no need to continue.",
            "created_at": "2025-12-18T18:09:30Z",
            "html_url": "https://github.com/cython/cython/issues/7402#issuecomment-3671495880",
            "id": 3671495880,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/7402",
            "node_id": "IC_kwDOABDGAc7a1pTI",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/3671495880/reactions"
            },
            "updated_at": "2025-12-18T18:09:30Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/3671495880",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Sorry for taking so long to get to this. Only a week later than I promised on Discord ðŸ™ƒ.\n\n> `spin test -p auto -t numpy/random/tests -v`\n\nI think you'd need to be using pytest-run-parallel to see these reports. Here you're using pytest-xdist, which is based on multiprocessing.\n\nYou should use a TSan-instrumented build of CPython and then build NumPy and run the np.random tests like so:\n\n```\npip install -r requirements/build_requirements.txt -r requirements/test_requirements.txt pytest-run-parallel\nspin build --clean -- -Db_sanitize=thread -Dbuildtype=debugoptimized\nspin test --no-build numpy/random -- -svx --parallel-threads=4\n```\n\nSee https://py-free-threading.github.io/thread_sanitizer/ for more tips.\n\nAll that said, I don't see any TSan reports doing that over here on numpy `main` and a CPython compiled from `main` today using pyenv. @kumaraditya303 is there any chance you can try to reproduce this on your end? If you're able to, can you share more detail about how you set up your environment and what you did to trigger the issue? It'd help if you could share the specific test that is triggering the race to help narrow down where to look.",
            "created_at": "2026-01-06T18:21:28Z",
            "html_url": "https://github.com/cython/cython/issues/7402#issuecomment-3715796658",
            "id": 3715796658,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/7402",
            "node_id": "IC_kwDOABDGAc7deo6y",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/3715796658/reactions"
            },
            "updated_at": "2026-01-06T18:21:28Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/3715796658",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3126246?v=4",
                "events_url": "https://api.github.com/users/ngoldbaum/events{/privacy}",
                "followers_url": "https://api.github.com/users/ngoldbaum/followers",
                "following_url": "https://api.github.com/users/ngoldbaum/following{/other_user}",
                "gists_url": "https://api.github.com/users/ngoldbaum/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ngoldbaum",
                "id": 3126246,
                "login": "ngoldbaum",
                "node_id": "MDQ6VXNlcjMxMjYyNDY=",
                "organizations_url": "https://api.github.com/users/ngoldbaum/orgs",
                "received_events_url": "https://api.github.com/users/ngoldbaum/received_events",
                "repos_url": "https://api.github.com/users/ngoldbaum/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ngoldbaum/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ngoldbaum/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ngoldbaum",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 6,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/7402/comments",
    "created_at": "2025-12-11T10:34:39Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/53637421?v=4",
                "events_url": "https://api.github.com/users/GalaxySnail/events{/privacy}",
                "followers_url": "https://api.github.com/users/GalaxySnail/followers",
                "following_url": "https://api.github.com/users/GalaxySnail/following{/other_user}",
                "gists_url": "https://api.github.com/users/GalaxySnail/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/GalaxySnail",
                "id": 53637421,
                "login": "GalaxySnail",
                "node_id": "MDQ6VXNlcjUzNjM3NDIx",
                "organizations_url": "https://api.github.com/users/GalaxySnail/orgs",
                "received_events_url": "https://api.github.com/users/GalaxySnail/received_events",
                "repos_url": "https://api.github.com/users/GalaxySnail/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/GalaxySnail/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/GalaxySnail/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/GalaxySnail",
                "user_view_type": "public"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2025-12-14T05:12:19Z",
            "event": "subscribed",
            "id": 21546211151,
            "node_id": "SE_lADOABDGAc7dqEHFzwAAAAUEQRdP",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/21546211151"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3126246?v=4",
                "events_url": "https://api.github.com/users/ngoldbaum/events{/privacy}",
                "followers_url": "https://api.github.com/users/ngoldbaum/followers",
                "following_url": "https://api.github.com/users/ngoldbaum/following{/other_user}",
                "gists_url": "https://api.github.com/users/ngoldbaum/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ngoldbaum",
                "id": 3126246,
                "login": "ngoldbaum",
                "node_id": "MDQ6VXNlcjMxMjYyNDY=",
                "organizations_url": "https://api.github.com/users/ngoldbaum/orgs",
                "received_events_url": "https://api.github.com/users/ngoldbaum/received_events",
                "repos_url": "https://api.github.com/users/ngoldbaum/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ngoldbaum/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ngoldbaum/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ngoldbaum",
                "user_view_type": "public"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2025-12-26T14:24:50Z",
            "event": "subscribed",
            "id": 21759666073,
            "node_id": "SE_lADOABDGAc7dqEHFzwAAAAUQ-ieZ",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/21759666073"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59607654?v=4",
                "events_url": "https://api.github.com/users/kumaraditya303/events{/privacy}",
                "followers_url": "https://api.github.com/users/kumaraditya303/followers",
                "following_url": "https://api.github.com/users/kumaraditya303/following{/other_user}",
                "gists_url": "https://api.github.com/users/kumaraditya303/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/kumaraditya303",
                "id": 59607654,
                "login": "kumaraditya303",
                "node_id": "MDQ6VXNlcjU5NjA3NjU0",
                "organizations_url": "https://api.github.com/users/kumaraditya303/orgs",
                "received_events_url": "https://api.github.com/users/kumaraditya303/received_events",
                "repos_url": "https://api.github.com/users/kumaraditya303/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/kumaraditya303/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/kumaraditya303/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/kumaraditya303",
                "user_view_type": "public"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2026-01-06T18:21:29Z",
            "event": "mentioned",
            "id": 21882302883,
            "node_id": "MEE_lADOABDGAc7dqEHFzwAAAAUYSXGj",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/21882302883"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59607654?v=4",
                "events_url": "https://api.github.com/users/kumaraditya303/events{/privacy}",
                "followers_url": "https://api.github.com/users/kumaraditya303/followers",
                "following_url": "https://api.github.com/users/kumaraditya303/following{/other_user}",
                "gists_url": "https://api.github.com/users/kumaraditya303/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/kumaraditya303",
                "id": 59607654,
                "login": "kumaraditya303",
                "node_id": "MDQ6VXNlcjU5NjA3NjU0",
                "organizations_url": "https://api.github.com/users/kumaraditya303/orgs",
                "received_events_url": "https://api.github.com/users/kumaraditya303/received_events",
                "repos_url": "https://api.github.com/users/kumaraditya303/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/kumaraditya303/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/kumaraditya303/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/kumaraditya303",
                "user_view_type": "public"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2026-01-06T18:21:30Z",
            "event": "subscribed",
            "id": 21882302919,
            "node_id": "SE_lADOABDGAc7dqEHFzwAAAAUYSXHH",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/21882302919"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/7402/events",
    "html_url": "https://github.com/cython/cython/issues/7402",
    "id": 3718791621,
    "issue_dependencies_summary": {
        "blocked_by": 0,
        "blocking": 0,
        "total_blocked_by": 0,
        "total_blocking": 0
    },
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/7402/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOABDGAc7dqEHF",
    "number": 7402,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/cython/cython/issues/7402/reactions"
    },
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/cython/cython/issues/7402/timeline",
    "title": "[BUG] data races in code object caching and __Pyx_AddTraceback",
    "type": null,
    "updated_at": "2026-01-06T18:21:28Z",
    "url": "https://api.github.com/repos/cython/cython/issues/7402",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/59607654?v=4",
        "events_url": "https://api.github.com/users/kumaraditya303/events{/privacy}",
        "followers_url": "https://api.github.com/users/kumaraditya303/followers",
        "following_url": "https://api.github.com/users/kumaraditya303/following{/other_user}",
        "gists_url": "https://api.github.com/users/kumaraditya303/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/kumaraditya303",
        "id": 59607654,
        "login": "kumaraditya303",
        "node_id": "MDQ6VXNlcjU5NjA3NjU0",
        "organizations_url": "https://api.github.com/users/kumaraditya303/orgs",
        "received_events_url": "https://api.github.com/users/kumaraditya303/received_events",
        "repos_url": "https://api.github.com/users/kumaraditya303/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/kumaraditya303/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/kumaraditya303/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/kumaraditya303",
        "user_view_type": "public"
    }
}