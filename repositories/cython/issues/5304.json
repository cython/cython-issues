{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Is your feature request related to a problem? Please describe.\r\n\r\nIn my code, I would like to define opaque structs with a single line like they are specified in the headers for many libraries:\r\n```cython\r\ncdef extern from \"llvm-c/Types.h\":\r\n    ctypedef struct LLVMOpaqueMemoryBuffer * LLVMMemoryBufferRef\r\n```\r\n\r\nToday this is possible but requires both the definition of the struct as well as the typedef.  We should allow for automatic opaque structs to be defined when used in this way.  (`struct LLVMOpaqueMemoryBuffer` should be defined as opaque as it does not exist)\r\n\r\nThis is the working today version that is needlessly verbose\r\n```cython\r\ncdef extern from \"llvm-c/Types.h\":\r\n    ctypedef struct LLVMOpaqueMemoryBuffer:\r\n        pass\r\n\r\n    ctypede LLVMOpaqueMemoryBuffer * LLVMMemoryBufferRef\r\n```\r\n\r\n### Describe the solution you'd like.\r\n\r\nWhen a `ctypedef` of a struct is encountered, create a node for the opaque version of the struct automatically if another does not exist.\r\n\r\nConcerns may include implicit definition of structs, as long as a further definition of an implicit can re-open the struct node, this shouldn't cause concern in common usage.\r\n\r\n### Describe alternatives you've considered.\r\n\r\nThe more verbose syntax\r\n\r\n### Additional context\r\n\r\nThis will reduce the number of lines for a pxd and increase comprehension for new users, as the double definition is a quirk at best.",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Personally I'm not wildly keen on this. Mainly because it seems like it'd be fairly fiddly to implement for the sake of something where there's an existing, obvious way of doing it.\r\n\r\nHowever, I'll leave it open for the moment to get other opinions",
            "created_at": "2023-03-10T18:09:43Z",
            "html_url": "https://github.com/cython/cython/issues/5304#issuecomment-1464187075",
            "id": 1464187075,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/5304",
            "node_id": "IC_kwDOABDGAc5XRbjD",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/1464187075/reactions"
            },
            "updated_at": "2023-03-10T18:09:43Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/1464187075",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        },
        {
            "author_association": "NONE",
            "body": "I'm not sure the dual definition is obvious...\r\n\r\nWhen creating a pxd from existing header files *MOST* of the time you can add a \"c\" in front of a typedef to translate it to Cython syntax.  Many C libraries expose opaque structs in the form:\r\n\r\n`typedef struct SomeOpaqueStruct * SomeOpaqueRef`\r\n\r\nIt's not always obvious to people using cython that that line of C has done two things, created a struct and then created a typedef of a pointer to that struct to the named pointer type.\r\n\r\nBecause this is so overwhelmingly used in C libraries to define opaque pointers as a one liner, we shouldn't expect consumers to understand the full C details of the typedef to be able to create a similar typedef.",
            "created_at": "2023-03-13T19:45:14Z",
            "html_url": "https://github.com/cython/cython/issues/5304#issuecomment-1466854339",
            "id": 1466854339,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/5304",
            "node_id": "IC_kwDOABDGAc5XbmvD",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/1466854339/reactions"
            },
            "updated_at": "2023-03-13T19:45:14Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/1466854339",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/125403?v=4",
                "events_url": "https://api.github.com/users/rickmark/events{/privacy}",
                "followers_url": "https://api.github.com/users/rickmark/followers",
                "following_url": "https://api.github.com/users/rickmark/following{/other_user}",
                "gists_url": "https://api.github.com/users/rickmark/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rickmark",
                "id": 125403,
                "login": "rickmark",
                "node_id": "MDQ6VXNlcjEyNTQwMw==",
                "organizations_url": "https://api.github.com/users/rickmark/orgs",
                "received_events_url": "https://api.github.com/users/rickmark/received_events",
                "repos_url": "https://api.github.com/users/rickmark/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rickmark/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rickmark/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rickmark"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/5304/comments",
    "created_at": "2023-03-09T22:04:05Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2023-03-10T18:10:40Z",
            "event": "labeled",
            "id": 8720759718,
            "label": {
                "color": "444444",
                "name": "enhancement"
            },
            "node_id": "LE_lADOABDGAc5gcZU_zwAAAAIHzDum",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/8720759718"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2023-03-10T18:11:04Z",
            "event": "labeled",
            "id": 8720763442,
            "label": {
                "color": "444444",
                "name": "Cython Language Feature"
            },
            "node_id": "LE_lADOABDGAc5gcZU_zwAAAAIHzEoy",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/8720763442"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/5304/events",
    "html_url": "https://github.com/cython/cython/issues/5304",
    "id": 1618056511,
    "labels": [
        {
            "color": "444444",
            "default": true,
            "description": null,
            "id": 425556243,
            "name": "enhancement",
            "node_id": "MDU6TGFiZWw0MjU1NTYyNDM=",
            "url": "https://api.github.com/repos/cython/cython/labels/enhancement"
        },
        {
            "color": "444444",
            "default": false,
            "description": null,
            "id": 425559948,
            "name": "Cython Language Feature",
            "node_id": "MDU6TGFiZWw0MjU1NTk5NDg=",
            "url": "https://api.github.com/repos/cython/cython/labels/Cython%20Language%20Feature"
        }
    ],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/5304/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOABDGAc5gcZU_",
    "number": 5304,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/cython/cython/issues/5304/reactions"
    },
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "state_reason": null,
    "timeline_url": "https://api.github.com/repos/cython/cython/issues/5304/timeline",
    "title": "[ENH] Implicit definition of opaque structs",
    "updated_at": "2023-03-13T19:45:15Z",
    "url": "https://api.github.com/repos/cython/cython/issues/5304",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/125403?v=4",
        "events_url": "https://api.github.com/users/rickmark/events{/privacy}",
        "followers_url": "https://api.github.com/users/rickmark/followers",
        "following_url": "https://api.github.com/users/rickmark/following{/other_user}",
        "gists_url": "https://api.github.com/users/rickmark/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/rickmark",
        "id": 125403,
        "login": "rickmark",
        "node_id": "MDQ6VXNlcjEyNTQwMw==",
        "organizations_url": "https://api.github.com/users/rickmark/orgs",
        "received_events_url": "https://api.github.com/users/rickmark/received_events",
        "repos_url": "https://api.github.com/users/rickmark/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/rickmark/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/rickmark/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/rickmark"
    }
}