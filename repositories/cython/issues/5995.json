{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "### Is your feature request related to a problem? Please describe.\r\n\r\n```cython\r\ncdef void create_memview(\r\n    double *buf,\r\n    int n,\r\n) noexcept nogil:\r\n\r\n    cdef double[::1] view = <double[:n:1]> buf\r\n```\r\n\r\nThe above code attemps to cast a C pointer to a contiguous memoryview. It does not compile as-is, but is fine if I do not declare the function \"nogil\".\r\n\r\nI've posted a question (roughly) about this topic on the cython user mailing list (cf https://groups.google.com/g/cython-users/c/i9P89mHMyn0/m/KoUsnviGAAAJ?utm_medium=email&utm_source=footer) and @da-woods advised I should make it a feature request.\r\n\r\nIf it is to be understood that the so-created memoryview does not own the data it references, I don't see why such cast should require the GIL.\r\n\r\nUnlocking this would allow reshaping of contiguous memoryviews without the GIL as well (again with the caveat that the reshaped view does not own the data).\r\n\r\n```cython\r\ncdef void reshape_memview(\r\n    double[::1] view_in,\r\n    int m,\r\n    int n,\r\n) noexcept nogil:\r\n\r\n    cdef double[:,::1] view_reshaped = <double[:m,:n:1]> &view_in[0]\r\n```\r\n\r\n\r\n### Describe the solution you'd like.\r\n\r\nI'd like a way to create a contiguous memoryview referencing an existing C array without requiring the GIL. The created memoryview would not be responsible for freeing the allocated memory.\r\n\r\n### Describe alternatives you've considered.\r\n\r\n_No response_\r\n\r\n### Additional context\r\n\r\n_No response_",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "What I was proposing on the mailing list was that the view reshaping could be done without the gil rather than creation of a fresh memoryview from a pointer.\r\n\r\nThat might still be possible but it's maybe a bigger change",
            "created_at": "2024-02-11T15:13:32Z",
            "html_url": "https://github.com/cython/cython/issues/5995#issuecomment-1937781866",
            "id": 1937781866,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/5995",
            "node_id": "IC_kwDOABDGAc5zgDRq",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/cython/cython/issues/comments/1937781866/reactions"
            },
            "updated_at": "2024-02-11T15:13:32Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/1937781866",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/5995/comments",
    "created_at": "2024-02-11T14:53:58Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2024-02-11T14:53:58Z",
            "event": "mentioned",
            "id": 11767238926,
            "node_id": "MEE_lADOABDGAc5-5kaCzwAAAAK9YdEO",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/11767238926"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2024-02-11T14:53:58Z",
            "event": "subscribed",
            "id": 11767238930,
            "node_id": "SE_lADOABDGAc5-5kaCzwAAAAK9YdES",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/11767238930"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/5534781?v=4",
                "events_url": "https://api.github.com/users/leofang/events{/privacy}",
                "followers_url": "https://api.github.com/users/leofang/followers",
                "following_url": "https://api.github.com/users/leofang/following{/other_user}",
                "gists_url": "https://api.github.com/users/leofang/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/leofang",
                "id": 5534781,
                "login": "leofang",
                "node_id": "MDQ6VXNlcjU1MzQ3ODE=",
                "organizations_url": "https://api.github.com/users/leofang/orgs",
                "received_events_url": "https://api.github.com/users/leofang/received_events",
                "repos_url": "https://api.github.com/users/leofang/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/leofang/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/leofang/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/leofang"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2024-02-12T04:39:54Z",
            "event": "subscribed",
            "id": 11769857352,
            "node_id": "SE_lADOABDGAc5-5kaCzwAAAAK9icVI",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/cython/cython/issues/events/11769857352"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/5995/events",
    "html_url": "https://github.com/cython/cython/issues/5995",
    "id": 2129020546,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/5995/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOABDGAc5-5kaC",
    "number": 5995,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 1,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 1,
        "url": "https://api.github.com/repos/cython/cython/issues/5995/reactions"
    },
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "state_reason": null,
    "timeline_url": "https://api.github.com/repos/cython/cython/issues/5995/timeline",
    "title": "[ENH] Cast a C pointer to a contiguous memoryview without the GIL",
    "updated_at": "2024-02-11T16:33:58Z",
    "url": "https://api.github.com/repos/cython/cython/issues/5995",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/8499652?v=4",
        "events_url": "https://api.github.com/users/gabrielfougeron/events{/privacy}",
        "followers_url": "https://api.github.com/users/gabrielfougeron/followers",
        "following_url": "https://api.github.com/users/gabrielfougeron/following{/other_user}",
        "gists_url": "https://api.github.com/users/gabrielfougeron/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/gabrielfougeron",
        "id": 8499652,
        "login": "gabrielfougeron",
        "node_id": "MDQ6VXNlcjg0OTk2NTI=",
        "organizations_url": "https://api.github.com/users/gabrielfougeron/orgs",
        "received_events_url": "https://api.github.com/users/gabrielfougeron/received_events",
        "repos_url": "https://api.github.com/users/gabrielfougeron/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/gabrielfougeron/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/gabrielfougeron/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/gabrielfougeron"
    }
}