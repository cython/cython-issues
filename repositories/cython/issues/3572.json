{
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "Weird issue we're trying to understand \r\n\r\nhttps://issues.apache.org/jira/browse/ARROW-8684\r\n\r\nOn Python 3.7.5 and higher (but not 3.7.4 and lower, it seems) on macOS, a Cython extension that uses `atexit.register` fails with the following exception\r\n\r\n```\r\n >>> import pyarrow\r\n>>> exit()\r\nError in atexit._run_exitfuncs:\r\nTraceback (most recent call last):\r\n{{ File \"pyarrow/types.pxi\", line 2638, in pyarrow.lib._unregister_py_extension_types}}\r\nSystemError: Bad call flags in _PyMethodDef_RawFastCallDict. METH_OLDARGS is no longer supported!\r\n```\r\n\r\nWe used Cython 0.29.17 to produce the binaries. There instructions for reproducing in the JIRA issue -- I can see if I can make a more minimal reproducer that doesn't depend on building pyarrow",
    "closed_at": "2020-05-12T20:56:47Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Could be due to the `METH_FASTCALL` flag, maybe? Cython 0.29.x doesn't use it for its own functions, so I wonder how a CPython function ends up seeing that flag.\r\n\r\nOr, since this is running at exit time, i might also be some type/object cleanup issue, I don't know.\r\n\r\nWould be good to know whether it is Cython _calling_ a function on this failure or a Cython function being called. But since Cython doesn't use the `_PyMethodDef_RawFastCallDict` function itself, it seems more like it's a call coming from Python.",
            "created_at": "2020-05-04T18:17:49Z",
            "html_url": "https://github.com/cython/cython/issues/3572#issuecomment-623624165",
            "id": 623624165,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3572",
            "node_id": "MDEyOklzc3VlQ29tbWVudDYyMzYyNDE2NQ==",
            "updated_at": "2020-05-04T18:17:49Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/623624165",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "[This CPython change](https://github.com/python/cpython/commit/6a12676b1910d52c85561bdf4f1e20aa13fc8f46) would make it easier to debug, but it won't be released before Py 3.7.8 in June. :-/\r\n\r\nThe only CPython change that I can see in that corner is https://github.com/python/cpython/commit/d092caf096fa48baadfc0900792206bb5aa0192d. It deals with a refcounting issue, so might be related â€“ or not, can't say.",
            "created_at": "2020-05-05T13:44:23Z",
            "html_url": "https://github.com/cython/cython/issues/3572#issuecomment-624064050",
            "id": 624064050,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3572",
            "node_id": "MDEyOklzc3VlQ29tbWVudDYyNDA2NDA1MA==",
            "updated_at": "2020-05-05T13:44:23Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/624064050",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "For the record, the code in question is here:\r\nhttps://github.com/apache/arrow/blob/68475dd8eafec8e51711ff69070a872c06d01714/python/pyarrow/types.pxi#L2638\r\n\r\nNote the function being called from within the `atexit` handler is itself a Cython-defined Python function:\r\nhttps://github.com/apache/arrow/blob/68475dd8eafec8e51711ff69070a872c06d01714/python/pyarrow/types.pxi#L820\r\n",
            "created_at": "2020-05-06T10:15:32Z",
            "html_url": "https://github.com/cython/cython/issues/3572#issuecomment-624561551",
            "id": 624561551,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3572",
            "node_id": "MDEyOklzc3VlQ29tbWVudDYyNDU2MTU1MQ==",
            "updated_at": "2020-05-06T10:15:32Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/624561551",
            "user": {
                "avatar_url": "https://avatars2.githubusercontent.com/u/1721820?v=4",
                "events_url": "https://api.github.com/users/pitrou/events{/privacy}",
                "followers_url": "https://api.github.com/users/pitrou/followers",
                "following_url": "https://api.github.com/users/pitrou/following{/other_user}",
                "gists_url": "https://api.github.com/users/pitrou/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/pitrou",
                "id": 1721820,
                "login": "pitrou",
                "node_id": "MDQ6VXNlcjE3MjE4MjA=",
                "organizations_url": "https://api.github.com/users/pitrou/orgs",
                "received_events_url": "https://api.github.com/users/pitrou/received_events",
                "repos_url": "https://api.github.com/users/pitrou/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/pitrou/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/pitrou/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/pitrou"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I also wasn't able to find any change between Python 3.7.4 and 3.7.5 that seemed related to this issue (neither in the `atexit` module, nor in `Objects/call.c`).",
            "created_at": "2020-05-06T10:17:16Z",
            "html_url": "https://github.com/cython/cython/issues/3572#issuecomment-624562277",
            "id": 624562277,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3572",
            "node_id": "MDEyOklzc3VlQ29tbWVudDYyNDU2MjI3Nw==",
            "updated_at": "2020-05-06T10:17:16Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/624562277",
            "user": {
                "avatar_url": "https://avatars2.githubusercontent.com/u/1721820?v=4",
                "events_url": "https://api.github.com/users/pitrou/events{/privacy}",
                "followers_url": "https://api.github.com/users/pitrou/followers",
                "following_url": "https://api.github.com/users/pitrou/following{/other_user}",
                "gists_url": "https://api.github.com/users/pitrou/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/pitrou",
                "id": 1721820,
                "login": "pitrou",
                "node_id": "MDQ6VXNlcjE3MjE4MjA=",
                "organizations_url": "https://api.github.com/users/pitrou/orgs",
                "received_events_url": "https://api.github.com/users/pitrou/received_events",
                "repos_url": "https://api.github.com/users/pitrou/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/pitrou/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/pitrou/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/pitrou"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@wesm Does the following work or crash for you?\r\n```python\r\n>>> import pyarrow as pa                                                                                                                                                   \r\n>>> pa.unregister_extension_type(\"arrow.py_extension_type\")\r\n```\r\n",
            "created_at": "2020-05-06T10:21:17Z",
            "html_url": "https://github.com/cython/cython/issues/3572#issuecomment-624563974",
            "id": 624563974,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3572",
            "node_id": "MDEyOklzc3VlQ29tbWVudDYyNDU2Mzk3NA==",
            "updated_at": "2020-05-06T10:21:17Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/624563974",
            "user": {
                "avatar_url": "https://avatars2.githubusercontent.com/u/1721820?v=4",
                "events_url": "https://api.github.com/users/pitrou/events{/privacy}",
                "followers_url": "https://api.github.com/users/pitrou/followers",
                "following_url": "https://api.github.com/users/pitrou/following{/other_user}",
                "gists_url": "https://api.github.com/users/pitrou/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/pitrou",
                "id": 1721820,
                "login": "pitrou",
                "node_id": "MDQ6VXNlcjE3MjE4MjA=",
                "organizations_url": "https://api.github.com/users/pitrou/orgs",
                "received_events_url": "https://api.github.com/users/pitrou/received_events",
                "repos_url": "https://api.github.com/users/pitrou/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/pitrou/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/pitrou/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/pitrou"
            }
        },
        {
            "author_association": "NONE",
            "body": "```python\r\nPython 3.7.5 (default, Oct 25 2019, 10:52:18)\r\n[Clang 4.0.1 (tags/RELEASE_401/final)] :: Anaconda, Inc. on darwin\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import pyarrow as pa\r\n>>> pa.unregister_extension_type(\"arrow.py_extension_type\")\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nSystemError: Bad call flags in _PyMethodDef_RawFastCallKeywords. METH_OLDARGS is no longer supported!\r\n```\r\n\r\nI'm only able to reproduce it by installing the wheel, building pyarrow locally on python 3.7.5 works fine (the wheel is built on [3.7.5](https://travis-ci.org/github/ursa-labs/crossbow/builds/683697356#L3422))",
            "created_at": "2020-05-06T11:49:45Z",
            "html_url": "https://github.com/cython/cython/issues/3572#issuecomment-624603408",
            "id": 624603408,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3572",
            "node_id": "MDEyOklzc3VlQ29tbWVudDYyNDYwMzQwOA==",
            "updated_at": "2020-05-06T11:49:45Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/624603408",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/961747?v=4",
                "events_url": "https://api.github.com/users/kszucs/events{/privacy}",
                "followers_url": "https://api.github.com/users/kszucs/followers",
                "following_url": "https://api.github.com/users/kszucs/following{/other_user}",
                "gists_url": "https://api.github.com/users/kszucs/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/kszucs",
                "id": 961747,
                "login": "kszucs",
                "node_id": "MDQ6VXNlcjk2MTc0Nw==",
                "organizations_url": "https://api.github.com/users/kszucs/orgs",
                "received_events_url": "https://api.github.com/users/kszucs/received_events",
                "repos_url": "https://api.github.com/users/kszucs/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/kszucs/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/kszucs/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/kszucs"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Do the conda-forge packages work fine too?",
            "created_at": "2020-05-06T11:51:37Z",
            "html_url": "https://github.com/cython/cython/issues/3572#issuecomment-624604193",
            "id": 624604193,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3572",
            "node_id": "MDEyOklzc3VlQ29tbWVudDYyNDYwNDE5Mw==",
            "updated_at": "2020-05-06T11:51:37Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/624604193",
            "user": {
                "avatar_url": "https://avatars2.githubusercontent.com/u/1721820?v=4",
                "events_url": "https://api.github.com/users/pitrou/events{/privacy}",
                "followers_url": "https://api.github.com/users/pitrou/followers",
                "following_url": "https://api.github.com/users/pitrou/following{/other_user}",
                "gists_url": "https://api.github.com/users/pitrou/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/pitrou",
                "id": 1721820,
                "login": "pitrou",
                "node_id": "MDQ6VXNlcjE3MjE4MjA=",
                "organizations_url": "https://api.github.com/users/pitrou/orgs",
                "received_events_url": "https://api.github.com/users/pitrou/received_events",
                "repos_url": "https://api.github.com/users/pitrou/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/pitrou/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/pitrou/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/pitrou"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Also, perhaps you can put a gdb breakpoint on `__pyx_pf_7pyarrow_3lib_110_unregister_py_extension_types` (I hope the name is the same on macOS).",
            "created_at": "2020-05-06T11:53:03Z",
            "html_url": "https://github.com/cython/cython/issues/3572#issuecomment-624604772",
            "id": 624604772,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3572",
            "node_id": "MDEyOklzc3VlQ29tbWVudDYyNDYwNDc3Mg==",
            "updated_at": "2020-05-06T11:53:03Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/624604772",
            "user": {
                "avatar_url": "https://avatars2.githubusercontent.com/u/1721820?v=4",
                "events_url": "https://api.github.com/users/pitrou/events{/privacy}",
                "followers_url": "https://api.github.com/users/pitrou/followers",
                "following_url": "https://api.github.com/users/pitrou/following{/other_user}",
                "gists_url": "https://api.github.com/users/pitrou/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/pitrou",
                "id": 1721820,
                "login": "pitrou",
                "node_id": "MDQ6VXNlcjE3MjE4MjA=",
                "organizations_url": "https://api.github.com/users/pitrou/orgs",
                "received_events_url": "https://api.github.com/users/pitrou/received_events",
                "repos_url": "https://api.github.com/users/pitrou/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/pitrou/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/pitrou/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/pitrou"
            }
        },
        {
            "author_association": "NONE",
            "body": "> Do the conda-forge packages work fine too?\r\n\r\nYes.",
            "created_at": "2020-05-06T11:55:00Z",
            "html_url": "https://github.com/cython/cython/issues/3572#issuecomment-624605590",
            "id": 624605590,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3572",
            "node_id": "MDEyOklzc3VlQ29tbWVudDYyNDYwNTU5MA==",
            "updated_at": "2020-05-06T11:55:00Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/624605590",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/961747?v=4",
                "events_url": "https://api.github.com/users/kszucs/events{/privacy}",
                "followers_url": "https://api.github.com/users/kszucs/followers",
                "following_url": "https://api.github.com/users/kszucs/following{/other_user}",
                "gists_url": "https://api.github.com/users/kszucs/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/kszucs",
                "id": 961747,
                "login": "kszucs",
                "node_id": "MDQ6VXNlcjk2MTc0Nw==",
                "organizations_url": "https://api.github.com/users/kszucs/orgs",
                "received_events_url": "https://api.github.com/users/kszucs/received_events",
                "repos_url": "https://api.github.com/users/kszucs/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/kszucs/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/kszucs/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/kszucs"
            }
        },
        {
            "author_association": "NONE",
            "body": "> Also, perhaps you can put a gdb breakpoint on `__pyx_pf_7pyarrow_3lib_110_unregister_py_extension_types` (I hope the name is the same on macOS).\r\n\r\nI can't reproduce without the wheels which are built in release mode. Wa can try to produce wheels with debug symbols.",
            "created_at": "2020-05-06T12:57:03Z",
            "html_url": "https://github.com/cython/cython/issues/3572#issuecomment-624632732",
            "id": 624632732,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3572",
            "node_id": "MDEyOklzc3VlQ29tbWVudDYyNDYzMjczMg==",
            "updated_at": "2020-05-06T12:57:03Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/624632732",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/961747?v=4",
                "events_url": "https://api.github.com/users/kszucs/events{/privacy}",
                "followers_url": "https://api.github.com/users/kszucs/followers",
                "following_url": "https://api.github.com/users/kszucs/following{/other_user}",
                "gists_url": "https://api.github.com/users/kszucs/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/kszucs",
                "id": 961747,
                "login": "kszucs",
                "node_id": "MDQ6VXNlcjk2MTc0Nw==",
                "organizations_url": "https://api.github.com/users/kszucs/orgs",
                "received_events_url": "https://api.github.com/users/kszucs/received_events",
                "repos_url": "https://api.github.com/users/kszucs/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/kszucs/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/kszucs/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/kszucs"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I prefer building release wheels with `-g1`, which gives readable user side stack traces with a (for me) acceptable size overhead. YMMV.",
            "created_at": "2020-05-07T07:03:14Z",
            "html_url": "https://github.com/cython/cython/issues/3572#issuecomment-625070482",
            "id": 625070482,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3572",
            "node_id": "MDEyOklzc3VlQ29tbWVudDYyNTA3MDQ4Mg==",
            "updated_at": "2020-05-07T07:03:14Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/625070482",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "NONE",
            "body": "We've been trying to track down this issue, which is proving very difficult to reproduce consistently. In this internal Cython function\r\n\r\n```\r\nstatic CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg) {\r\n#if CYTHON_FAST_PYCALL\r\n    if (PyFunction_Check(func)) {\r\n        return __Pyx_PyFunction_FastCall(func, &arg, 1);\r\n    }\r\n#endif\r\n    if (likely(PyCFunction_Check(func))) {\r\n        if (likely(PyCFunction_GET_FLAGS(func) & METH_O)) {\r\n            return __Pyx_PyObject_CallMethO(func, arg);\r\n#if CYTHON_FAST_PYCCALL\r\n        } else if (PyCFunction_GET_FLAGS(func) & METH_FASTCALL) {\r\n            return __Pyx_PyCFunction_FastCall(func, &arg, 1);\r\n#endif\r\n        }\r\n    }\r\n    return __Pyx__PyObject_CallOneArg(func, arg);\r\n}\r\n```\r\n\r\nthe check `PyCFunction_Check(func)` is failing on the Cython-generated pure Python function `unregister_extension_type`, here's the view inside lldb\r\n\r\n```\r\n(lldb) p (*func->ob_type)\r\n(_typeobject) $8 = {\r\n  ob_base = {\r\n    ob_base = {\r\n      ob_refcnt = 26\r\n      ob_type = 0x00000001002de288\r\n    }\r\n    ob_size = 0\r\n  }\r\n  tp_name = 0x000000010029eff6 \"builtin_function_or_method\"\r\n  tp_basicsize = 48\r\n  tp_itemsize = 0\r\n  tp_dealloc = 0x00000001000843e0 (python`meth_dealloc)\r\n  tp_print = 0x0000000000000000\r\n  tp_getattr = 0x0000000000000000\r\n  tp_setattr = 0x0000000000000000\r\n  tp_as_async = 0x0000000000000000\r\n  tp_repr = 0x00000001000844f0 (python`meth_repr)\r\n  tp_as_number = 0x0000000000000000\r\n  tp_as_sequence = 0x0000000000000000\r\n  tp_as_mapping = 0x0000000000000000\r\n  tp_hash = 0x0000000100084580 (python`meth_hash)\r\n  tp_call = 0x000000010002d6d0 (python`PyCFunction_Call)\r\n  tp_str = 0x00000001000a18c0 (python`object_str)\r\n  tp_getattro = 0x0000000100089bb0 (python`PyObject_GenericGetAttr)\r\n  tp_setattro = 0x000000010008ac00 (python`PyObject_GenericSetAttr)\r\n  tp_as_buffer = 0x0000000000000000\r\n  tp_flags = 806912\r\n  tp_doc = 0x0000000000000000\r\n  tp_traverse = 0x0000000100084650 (python`meth_traverse)\r\n  tp_clear = 0x0000000000000000\r\n  tp_richcompare = 0x00000001000846a0 (python`meth_richcompare)\r\n  tp_weaklistoffset = 40\r\n  tp_iter = 0x0000000000000000\r\n  tp_iternext = 0x0000000000000000\r\n  tp_methods = 0x00000001002d9bb0\r\n  tp_members = 0x00000001002d9bf0\r\n  tp_getset = 0x00000001002d9c40\r\n  tp_base = 0x00000001002de0f8\r\n  tp_dict = 0x000000010804a3c0\r\n  tp_descr_get = 0x0000000000000000\r\n  tp_descr_set = 0x0000000000000000\r\n  tp_dictoffset = 0\r\n  tp_init = 0x00000001000a1a30 (python`object_init)\r\n  tp_alloc = 0x00000001000a1af0 (python`PyType_GenericAlloc)\r\n  tp_new = 0x0000000000000000\r\n  tp_free = 0x00000001001e2fd0 (python`PyObject_GC_Del)\r\n  tp_is_gc = 0x0000000000000000\r\n  tp_bases = 0x0000000108045dd0\r\n  tp_mro = 0x000000010804a640\r\n  tp_cache = 0x0000000000000000\r\n  tp_subclasses = 0x0000000000000000\r\n  tp_weaklist = 0x0000000108049770\r\n  tp_del = 0x0000000000000000\r\n  tp_version_tag = 37\r\n  tp_finalize = 0x0000000000000000\r\n```\r\n\r\nthen `__Pyx__PyObject_CallOneArg` fails when invoking `tp_call`. ",
            "created_at": "2020-05-12T14:49:02Z",
            "html_url": "https://github.com/cython/cython/issues/3572#issuecomment-627393330",
            "id": 627393330,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3572",
            "node_id": "MDEyOklzc3VlQ29tbWVudDYyNzM5MzMzMA==",
            "updated_at": "2020-05-12T14:49:02Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/627393330",
            "user": {
                "avatar_url": "https://avatars2.githubusercontent.com/u/329591?v=4",
                "events_url": "https://api.github.com/users/wesm/events{/privacy}",
                "followers_url": "https://api.github.com/users/wesm/followers",
                "following_url": "https://api.github.com/users/wesm/following{/other_user}",
                "gists_url": "https://api.github.com/users/wesm/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/wesm",
                "id": 329591,
                "login": "wesm",
                "node_id": "MDQ6VXNlcjMyOTU5MQ==",
                "organizations_url": "https://api.github.com/users/wesm/orgs",
                "received_events_url": "https://api.github.com/users/wesm/received_events",
                "repos_url": "https://api.github.com/users/wesm/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/wesm/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/wesm/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/wesm"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Culprit is https://github.com/cython/cython/issues/3603",
            "created_at": "2020-05-12T16:02:21Z",
            "html_url": "https://github.com/cython/cython/issues/3572#issuecomment-627437206",
            "id": 627437206,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3572",
            "node_id": "MDEyOklzc3VlQ29tbWVudDYyNzQzNzIwNg==",
            "updated_at": "2020-05-12T16:02:21Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/627437206",
            "user": {
                "avatar_url": "https://avatars2.githubusercontent.com/u/1721820?v=4",
                "events_url": "https://api.github.com/users/pitrou/events{/privacy}",
                "followers_url": "https://api.github.com/users/pitrou/followers",
                "following_url": "https://api.github.com/users/pitrou/following{/other_user}",
                "gists_url": "https://api.github.com/users/pitrou/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/pitrou",
                "id": 1721820,
                "login": "pitrou",
                "node_id": "MDQ6VXNlcjE3MjE4MjA=",
                "organizations_url": "https://api.github.com/users/pitrou/orgs",
                "received_events_url": "https://api.github.com/users/pitrou/received_events",
                "repos_url": "https://api.github.com/users/pitrou/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/pitrou/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/pitrou/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/pitrou"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Closing this as a 'duplicate' of #3603, since that is the clearer ticket.",
            "created_at": "2020-05-12T20:56:41Z",
            "html_url": "https://github.com/cython/cython/issues/3572#issuecomment-627589269",
            "id": 627589269,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3572",
            "node_id": "MDEyOklzc3VlQ29tbWVudDYyNzU4OTI2OQ==",
            "updated_at": "2020-05-12T20:56:41Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/627589269",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        }
    ],
    "comments": 14,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/3572/comments",
    "created_at": "2020-05-04T17:29:33Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars2.githubusercontent.com/u/329591?v=4",
                "events_url": "https://api.github.com/users/wesm/events{/privacy}",
                "followers_url": "https://api.github.com/users/wesm/followers",
                "following_url": "https://api.github.com/users/wesm/following{/other_user}",
                "gists_url": "https://api.github.com/users/wesm/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/wesm",
                "id": 329591,
                "login": "wesm",
                "node_id": "MDQ6VXNlcjMyOTU5MQ==",
                "organizations_url": "https://api.github.com/users/wesm/orgs",
                "received_events_url": "https://api.github.com/users/wesm/received_events",
                "repos_url": "https://api.github.com/users/wesm/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/wesm/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/wesm/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/wesm"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2020-05-06T10:21:17Z",
            "event": "mentioned",
            "id": 3307833668,
            "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MzMwNzgzMzY2OA==",
            "url": "https://api.github.com/repos/cython/cython/issues/events/3307833668"
        },
        {
            "actor": {
                "avatar_url": "https://avatars2.githubusercontent.com/u/329591?v=4",
                "events_url": "https://api.github.com/users/wesm/events{/privacy}",
                "followers_url": "https://api.github.com/users/wesm/followers",
                "following_url": "https://api.github.com/users/wesm/following{/other_user}",
                "gists_url": "https://api.github.com/users/wesm/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/wesm",
                "id": 329591,
                "login": "wesm",
                "node_id": "MDQ6VXNlcjMyOTU5MQ==",
                "organizations_url": "https://api.github.com/users/wesm/orgs",
                "received_events_url": "https://api.github.com/users/wesm/received_events",
                "repos_url": "https://api.github.com/users/wesm/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/wesm/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/wesm/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/wesm"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2020-05-06T10:21:17Z",
            "event": "subscribed",
            "id": 3307833673,
            "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDMzMDc4MzM2NzM=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/3307833673"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2020-05-12T20:56:07Z",
            "event": "labeled",
            "id": 3329293754,
            "label": {
                "color": "444444",
                "name": "R: duplicate"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDMzMjkyOTM3NTQ=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/3329293754"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2020-05-12T20:56:47Z",
            "event": "closed",
            "id": 3329295915,
            "node_id": "MDExOkNsb3NlZEV2ZW50MzMyOTI5NTkxNQ==",
            "url": "https://api.github.com/repos/cython/cython/issues/events/3329295915"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/3572/events",
    "html_url": "https://github.com/cython/cython/issues/3572",
    "id": 612042625,
    "labels": [
        {
            "color": "444444",
            "default": false,
            "description": null,
            "id": 425556894,
            "name": "R: duplicate",
            "node_id": "MDU6TGFiZWw0MjU1NTY4OTQ=",
            "url": "https://api.github.com/repos/cython/cython/labels/R:%20duplicate"
        }
    ],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/3572/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU2MTIwNDI2MjU=",
    "number": 3572,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "closed",
    "title": "\"SystemError: Bad call flags in _PyMethodDef_RawFastCallDict\" from atexit.register callback on Python 3.7.5 - 3.7.7 on macOS",
    "updated_at": "2020-05-12T20:56:47Z",
    "url": "https://api.github.com/repos/cython/cython/issues/3572",
    "user": {
        "avatar_url": "https://avatars2.githubusercontent.com/u/329591?v=4",
        "events_url": "https://api.github.com/users/wesm/events{/privacy}",
        "followers_url": "https://api.github.com/users/wesm/followers",
        "following_url": "https://api.github.com/users/wesm/following{/other_user}",
        "gists_url": "https://api.github.com/users/wesm/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/wesm",
        "id": 329591,
        "login": "wesm",
        "node_id": "MDQ6VXNlcjMyOTU5MQ==",
        "organizations_url": "https://api.github.com/users/wesm/orgs",
        "received_events_url": "https://api.github.com/users/wesm/received_events",
        "repos_url": "https://api.github.com/users/wesm/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/wesm/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/wesm/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/wesm"
    }
}