{
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "For the [Transonic](http://transonic.readthedocs.io/) project, Cython is used via the pure-Python mode with a .pxd for the signatures.\r\n\r\nI'd like to support something like (direct application for scikit-image):\r\n\r\n```cython\r\n# cython: language_level=3\r\nimport cython\r\n\r\ncdef inline cython.int add(cython.int a, cython.int b) nogil:\r\n    return a + b\r\n\r\ncpdef use_add(cython.int n):\r\n    cdef Py_ssize_t i\r\n    cdef cython.int result = 1\r\n    with cython.nogil:\r\n        for i in range(n):\r\n            result = add(result, result)\r\n    return result\r\n```\r\n\r\nI try to translate this in pure-Python with pxd, which gives:\r\n\r\n- the Python file\r\n\r\n```python\r\n# cython: language_level=3\r\nimport cython\r\n\r\n@cython.cfunc\r\n@cython.inline\r\n@cython.nogil\r\ndef add(a, b):\r\n    return a + b\r\n\r\n@cython.ccall\r\ndef use_add(n):\r\n    result = 1\r\n    with cython.nogil:\r\n        for i in range(n):\r\n            result = add(result, result)\r\n    return result\r\n```\r\n\r\n- the .pxd file\r\n```cython\r\ncdef cython.int add(cython.int a, cython.int b)\r\n\r\n@cython.locals(n=cython.int, i=Py_ssize_t, result=cython.int)\r\ncpdef use_add(cython.int n)\r\n```\r\n\r\nBut Cython complains loudly. I think it's a Cython bug. Can you please tell me if there is a problem in the pure-Python code ? If it is indeed a bug, where should I start to try to fix it ?\r\n\r\nThe error log:\r\n```\r\nCompiling pure_with_pxd.py because it changed.\r\n[1/1] Cythonizing pure_with_pxd.py\r\n\r\nError compiling Cython file:\r\n------------------------------------------------------------\r\n...\r\ncdef cython.int add(cython.int a, cython.int b)\r\n\r\n@cython.locals(n=cython.int, i=Py_ssize_t, result=cython.int)\r\n^\r\n------------------------------------------------------------\r\n\r\npure_with_pxd.pxd:3:0: Cdef functions/classes cannot take arbitrary decorators.\r\n\r\nError compiling Cython file:\r\n------------------------------------------------------------\r\n...\r\n@cython.ccall\r\ndef use_add(n):\r\n    result = 1\r\n    with cython.nogil:\r\n        for i in range(n):\r\n            result = add(result, result)\r\n           ^\r\n------------------------------------------------------------\r\n\r\npure_with_pxd.py:15:12: Assignment of Python object not allowed without gil\r\n\r\nError compiling Cython file:\r\n------------------------------------------------------------\r\n...\r\nimport cython\r\n\r\n@cython.cfunc\r\n@cython.inline\r\n@cython.nogil\r\ndef add(a, b):\r\n^\r\n------------------------------------------------------------\r\n\r\npure_with_pxd.py:7:0: Function with Python return type cannot be declared nogil\r\n\r\nError compiling Cython file:\r\n------------------------------------------------------------\r\n...\r\n\r\n@cython.cfunc\r\n@cython.inline\r\n@cython.nogil\r\ndef add(a, b):\r\n    return a + b\r\n   ^\r\n------------------------------------------------------------\r\n\r\npure_with_pxd.py:8:4: Returning Python object not allowed without gil\r\n\r\nError compiling Cython file:\r\n------------------------------------------------------------\r\n...\r\n\r\n@cython.cfunc\r\n@cython.inline\r\n@cython.nogil\r\ndef add(a, b):\r\n    return a + b\r\n            ^\r\n------------------------------------------------------------\r\n\r\npure_with_pxd.py:8:13: Operation not allowed without gil\r\n\r\nError compiling Cython file:\r\n------------------------------------------------------------\r\n...\r\n\r\n@cython.ccall\r\ndef use_add(n):\r\n    result = 1\r\n    with cython.nogil:\r\n        for i in range(n):\r\n                ^\r\n------------------------------------------------------------\r\n\r\npure_with_pxd.py:14:17: Iterating over Python object not allowed without gil\r\n\r\nError compiling Cython file:\r\n------------------------------------------------------------\r\n...\r\n\r\n@cython.ccall\r\ndef use_add(n):\r\n    result = 1\r\n    with cython.nogil:\r\n        for i in range(n):\r\n                     ^\r\n------------------------------------------------------------\r\n\r\npure_with_pxd.py:14:22: Calling gil-requiring function not allowed without gil\r\n\r\nError compiling Cython file:\r\n------------------------------------------------------------\r\n...\r\n\r\n@cython.ccall\r\ndef use_add(n):\r\n    result = 1\r\n    with cython.nogil:\r\n        for i in range(n):\r\n                     ^\r\n------------------------------------------------------------\r\n\r\npure_with_pxd.py:14:22: Constructing Python tuple not allowed without gil\r\nTraceback (most recent call last):\r\n  File \"/home/users/augier3pi/.pyenv/versions/3.7.3/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"/home/users/augier3pi/.pyenv/versions/3.7.3/lib/python3.7/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/home/users/augier3pi/Dev/transonic/transonic_cl/cythonize.py\", line 11, in <module>\r\n    ext_modules=cythonize(path, language_level=3), include_dirs=[np.get_include()]\r\n  File \"/home/users/augier3pi/.pyenv/versions/3.7.3/lib/python3.7/site-packages/Cython/Build/Dependencies.py\", line 1096, in cythonize\r\n    cythonize_one(*args)\r\n  File \"/home/users/augier3pi/.pyenv/versions/3.7.3/lib/python3.7/site-packages/Cython/Build/Dependencies.py\", line 1219, in cythonize_one\r\n    raise CompileError(None, pyx_file)\r\nCython.Compiler.Errors.CompileError: pure_with_pxd.py\r\n```\r\n\r\n\r\n\r\n\r\n",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Could you add a `cimport cython` to the .pxd file and try again?\r\n\r\nAlso note that in a `.pxd` file (or any Cython code, really), `cython.int` is the same as `int`.",
            "created_at": "2019-10-08T20:49:45Z",
            "html_url": "https://github.com/cython/cython/issues/3170#issuecomment-539698372",
            "id": 539698372,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3170",
            "node_id": "MDEyOklzc3VlQ29tbWVudDUzOTY5ODM3Mg==",
            "updated_at": "2019-10-08T20:49:45Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/539698372",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "NONE",
            "body": "Thank you for the advice, but unfortunately I get the same error.",
            "created_at": "2019-10-08T21:14:55Z",
            "html_url": "https://github.com/cython/cython/issues/3170#issuecomment-539707384",
            "id": 539707384,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3170",
            "node_id": "MDEyOklzc3VlQ29tbWVudDUzOTcwNzM4NA==",
            "updated_at": "2019-10-08T21:14:55Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/539707384",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/8842662?v=4",
                "events_url": "https://api.github.com/users/paugier/events{/privacy}",
                "followers_url": "https://api.github.com/users/paugier/followers",
                "following_url": "https://api.github.com/users/paugier/following{/other_user}",
                "gists_url": "https://api.github.com/users/paugier/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/paugier",
                "id": 8842662,
                "login": "paugier",
                "node_id": "MDQ6VXNlcjg4NDI2NjI=",
                "organizations_url": "https://api.github.com/users/paugier/orgs",
                "received_events_url": "https://api.github.com/users/paugier/received_events",
                "repos_url": "https://api.github.com/users/paugier/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/paugier/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/paugier/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/paugier"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Looks like a bug then.\r\n\r\nIt probably works if you remove the `.pxd` file and use the decorators only in the `.py` file, right?",
            "created_at": "2019-10-08T21:29:34Z",
            "html_url": "https://github.com/cython/cython/issues/3170#issuecomment-539712323",
            "id": 539712323,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3170",
            "node_id": "MDEyOklzc3VlQ29tbWVudDUzOTcxMjMyMw==",
            "updated_at": "2019-10-08T21:29:34Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/539712323",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "(Also note that the signatures for `add()` in the `.py` and `.pxd` files are conflicting regarding `inline` and `nogil` – that should better also be flagged as an error by the compiler, but it seems to be misinterpreting something here which might suppress that error.)",
            "created_at": "2019-10-08T21:31:56Z",
            "html_url": "https://github.com/cython/cython/issues/3170#issuecomment-539713154",
            "id": 539713154,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3170",
            "node_id": "MDEyOklzc3VlQ29tbWVudDUzOTcxMzE1NA==",
            "updated_at": "2019-10-08T21:31:56Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/539713154",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "NONE",
            "body": "> Also note that the signatures for add() in the .py and .pxd files are conflicting regarding inline and nogil\r\n\r\nIf I add `inline` and `nogil` to the signature, I get: `warning: pure_with_pxd.pxd:3:19: Declarations should not be declared inline.`\r\n",
            "created_at": "2019-10-09T07:28:19Z",
            "html_url": "https://github.com/cython/cython/issues/3170#issuecomment-539875882",
            "id": 539875882,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3170",
            "node_id": "MDEyOklzc3VlQ29tbWVudDUzOTg3NTg4Mg==",
            "updated_at": "2019-10-09T07:28:19Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/539875882",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/8842662?v=4",
                "events_url": "https://api.github.com/users/paugier/events{/privacy}",
                "followers_url": "https://api.github.com/users/paugier/followers",
                "following_url": "https://api.github.com/users/paugier/following{/other_user}",
                "gists_url": "https://api.github.com/users/paugier/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/paugier",
                "id": 8842662,
                "login": "paugier",
                "node_id": "MDQ6VXNlcjg4NDI2NjI=",
                "organizations_url": "https://api.github.com/users/paugier/orgs",
                "received_events_url": "https://api.github.com/users/paugier/received_events",
                "repos_url": "https://api.github.com/users/paugier/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/paugier/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/paugier/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/paugier"
            }
        },
        {
            "author_association": "NONE",
            "body": "> It probably works if you remove the .pxd file and use the decorators only in the .py file, right?\r\n\r\nRight. The problem is really with the pxd file. But I real cases, I need the pxd file, in particular to define fused types.",
            "created_at": "2019-10-09T07:31:54Z",
            "html_url": "https://github.com/cython/cython/issues/3170#issuecomment-539877055",
            "id": 539877055,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3170",
            "node_id": "MDEyOklzc3VlQ29tbWVudDUzOTg3NzA1NQ==",
            "updated_at": "2019-10-09T07:31:54Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/539877055",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/8842662?v=4",
                "events_url": "https://api.github.com/users/paugier/events{/privacy}",
                "followers_url": "https://api.github.com/users/paugier/followers",
                "following_url": "https://api.github.com/users/paugier/following{/other_user}",
                "gists_url": "https://api.github.com/users/paugier/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/paugier",
                "id": 8842662,
                "login": "paugier",
                "node_id": "MDQ6VXNlcjg4NDI2NjI=",
                "organizations_url": "https://api.github.com/users/paugier/orgs",
                "received_events_url": "https://api.github.com/users/paugier/received_events",
                "repos_url": "https://api.github.com/users/paugier/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/paugier/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/paugier/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/paugier"
            }
        },
        {
            "author_association": "NONE",
            "body": "I post a new simple version of the example which triggers the same bug:\r\n\r\nThe Python file:\r\n\r\n```python\r\n# cython: language_level=3\r\nimport cython\r\n\r\n@cython.cfunc\r\n@cython.inline\r\n@cython.nogil\r\ndef add(a, b):\r\n    return a + b\r\n\r\n@cython.ccall\r\ndef use_add(n):\r\n    result = 1\r\n    with cython.nogil:\r\n        for i in range(n):\r\n            result = add(result, result)\r\n    return result\r\n```\r\n\r\nAnd the .pxd file:\r\n\r\n```cython\r\ncimport cython\r\n\r\ncdef int add(int a, int b) nogil\r\n\r\n@cython.locals(n=int, i=int, result=int)\r\ncpdef int use_add(int n)\r\n```\r\n\r\nI get the warning `warning: pure_with_pxd.pxd:3:19: Declarations should not be declared inline.` and the same errors than in the first message.\r\n\r\nEdited: remove the `inline` in the .pxd file.",
            "created_at": "2019-10-09T07:36:30Z",
            "html_url": "https://github.com/cython/cython/issues/3170#issuecomment-539878482",
            "id": 539878482,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3170",
            "node_id": "MDEyOklzc3VlQ29tbWVudDUzOTg3ODQ4Mg==",
            "updated_at": "2019-10-10T07:53:38Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/539878482",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/8842662?v=4",
                "events_url": "https://api.github.com/users/paugier/events{/privacy}",
                "followers_url": "https://api.github.com/users/paugier/followers",
                "following_url": "https://api.github.com/users/paugier/following{/other_user}",
                "gists_url": "https://api.github.com/users/paugier/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/paugier",
                "id": 8842662,
                "login": "paugier",
                "node_id": "MDQ6VXNlcjg4NDI2NjI=",
                "organizations_url": "https://api.github.com/users/paugier/orgs",
                "received_events_url": "https://api.github.com/users/paugier/received_events",
                "repos_url": "https://api.github.com/users/paugier/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/paugier/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/paugier/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/paugier"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> If I add `inline` and `nogil` to the signature, I get: `warning:\n> pure_with_pxd.pxd:3:19: Declarations should not be declared inline.`\n\nAh, right, sorry. Using \"inline\" only in the implementation and not in the pxd is actually correct. It lets Cython inline the function inside of the module an still makes it available as a normal function to other modules that want to cimport it.\n\nThe \"nogil\" has to match, though.\n",
            "created_at": "2019-10-10T05:46:24Z",
            "html_url": "https://github.com/cython/cython/issues/3170#issuecomment-540382821",
            "id": 540382821,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3170",
            "node_id": "MDEyOklzc3VlQ29tbWVudDU0MDM4MjgyMQ==",
            "updated_at": "2019-10-10T05:46:24Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/540382821",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "NONE",
            "body": "I removed the `inline` in the .pxd file. Unfortunately, even with the `nogil` I still get:\r\n\r\n```\r\nError compiling Cython file:\r\n------------------------------------------------------------\r\n...\r\nimport cython\r\n\r\n@cython.cfunc\r\n@cython.inline\r\n@cython.nogil\r\ndef add(a, b):\r\n^\r\n------------------------------------------------------------\r\n\r\npure_with_pxd.py:7:0: Function signature does not match previous declaration\r\n\r\nError compiling Cython file:\r\n------------------------------------------------------------\r\n...\r\n@cython.nogil\r\ndef add(a, b):\r\n    return a + b\r\n\r\n@cython.ccall\r\ndef use_add(n):\r\n^\r\n------------------------------------------------------------\r\n\r\npure_with_pxd.py:11:0: Function signature does not match previous declaration\r\n```\r\n\r\nIt would be great to have a little bit more information on why Cython thinks that the \"Function signature does not match previous declaration\"...",
            "created_at": "2019-10-10T07:57:43Z",
            "html_url": "https://github.com/cython/cython/issues/3170#issuecomment-540447931",
            "id": 540447931,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3170",
            "node_id": "MDEyOklzc3VlQ29tbWVudDU0MDQ0NzkzMQ==",
            "updated_at": "2019-10-10T07:57:43Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/540447931",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/8842662?v=4",
                "events_url": "https://api.github.com/users/paugier/events{/privacy}",
                "followers_url": "https://api.github.com/users/paugier/followers",
                "following_url": "https://api.github.com/users/paugier/following{/other_user}",
                "gists_url": "https://api.github.com/users/paugier/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/paugier",
                "id": 8842662,
                "login": "paugier",
                "node_id": "MDQ6VXNlcjg4NDI2NjI=",
                "organizations_url": "https://api.github.com/users/paugier/orgs",
                "received_events_url": "https://api.github.com/users/paugier/received_events",
                "repos_url": "https://api.github.com/users/paugier/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/paugier/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/paugier/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/paugier"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> It would be great to have a little bit more information on why Cython thinks that the \"Function signature does not match previous declaration\"...\r\n\r\nPR welcome.\r\n\r\n> The \"nogil\" has to match, though.\r\n\r\nComing back to this, I think it's actually not true either. It's semantically ok to declare the implementation as `nogil` without making the `.pxd` declaration `nogil` as well (because it gives a wider contract to the outside world), just not the other way round (which would allow the outside world to acll the function incorrectly without holding the GIL).\r\n\r\nMay I ask why you need to duplicate the declaration in the source via decorators that you are already providing in the `,pxd` file in Cython syntax? It should work if you remove the decorators and only keep the `.pxd` override declaration.\r\n\r\n(So, the bug is that Cython shouldn't complain, not that there's no way to do this.)",
            "created_at": "2019-10-12T08:20:50Z",
            "html_url": "https://github.com/cython/cython/issues/3170#issuecomment-541300391",
            "id": 541300391,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3170",
            "node_id": "MDEyOklzc3VlQ29tbWVudDU0MTMwMDM5MQ==",
            "updated_at": "2019-10-12T08:21:42Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/541300391",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "NONE",
            "body": "> It should work if you remove the decorators and only keep the .pxd override declaration.\r\n\r\nI confirm that this particular solution works!\r\n\r\nBut I get the warning message \"warning: pure_with_pxd.pxd:3:19: Declarations should not be declared inline.\" And if i follow the advice, it does not compile.\r\n\r\nAnyway, thank you for your help. Do you have a similar solution for this highly related issue https://github.com/cython/cython/issues/3169 ?",
            "created_at": "2019-10-12T21:31:22Z",
            "html_url": "https://github.com/cython/cython/issues/3170#issuecomment-541363138",
            "id": 541363138,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/3170",
            "node_id": "MDEyOklzc3VlQ29tbWVudDU0MTM2MzEzOA==",
            "updated_at": "2019-10-12T21:31:22Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/541363138",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/8842662?v=4",
                "events_url": "https://api.github.com/users/paugier/events{/privacy}",
                "followers_url": "https://api.github.com/users/paugier/followers",
                "following_url": "https://api.github.com/users/paugier/following{/other_user}",
                "gists_url": "https://api.github.com/users/paugier/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/paugier",
                "id": 8842662,
                "login": "paugier",
                "node_id": "MDQ6VXNlcjg4NDI2NjI=",
                "organizations_url": "https://api.github.com/users/paugier/orgs",
                "received_events_url": "https://api.github.com/users/paugier/received_events",
                "repos_url": "https://api.github.com/users/paugier/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/paugier/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/paugier/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/paugier"
            }
        }
    ],
    "comments": 11,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/3170/comments",
    "created_at": "2019-10-07T14:57:08Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2019-10-08T21:27:09Z",
            "event": "labeled",
            "id": 2696938322,
            "label": {
                "color": "444444",
                "name": "defect"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDI2OTY5MzgzMjI=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/2696938322"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2019-10-08T21:27:09Z",
            "event": "labeled",
            "id": 2696938323,
            "label": {
                "color": "444444",
                "name": "Pure Python Mode"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDI2OTY5MzgzMjM=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/2696938323"
        },
        {
            "actor": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2019-10-08T21:27:09Z",
            "event": "labeled",
            "id": 2696938327,
            "label": {
                "color": "444444",
                "name": "Type Analysis"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDI2OTY5MzgzMjc=",
            "url": "https://api.github.com/repos/cython/cython/issues/events/2696938327"
        }
    ],
    "events_url": "https://api.github.com/repos/cython/cython/issues/3170/events",
    "html_url": "https://github.com/cython/cython/issues/3170",
    "id": 503507328,
    "labels": [
        {
            "color": "444444",
            "default": false,
            "id": 425558499,
            "name": "Pure Python Mode",
            "node_id": "MDU6TGFiZWw0MjU1NTg0OTk=",
            "url": "https://api.github.com/repos/cython/cython/labels/Pure%20Python%20Mode"
        },
        {
            "color": "444444",
            "default": false,
            "id": 425558824,
            "name": "Type Analysis",
            "node_id": "MDU6TGFiZWw0MjU1NTg4MjQ=",
            "url": "https://api.github.com/repos/cython/cython/labels/Type%20Analysis"
        },
        {
            "color": "444444",
            "default": false,
            "id": 425553654,
            "name": "defect",
            "node_id": "MDU6TGFiZWw0MjU1NTM2NTQ=",
            "url": "https://api.github.com/repos/cython/cython/labels/defect"
        }
    ],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/3170/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU1MDM1MDczMjg=",
    "number": 3170,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "title": "Pure-Python mode with pxd: nogil",
    "updated_at": "2019-10-12T21:31:22Z",
    "url": "https://api.github.com/repos/cython/cython/issues/3170",
    "user": {
        "avatar_url": "https://avatars0.githubusercontent.com/u/8842662?v=4",
        "events_url": "https://api.github.com/users/paugier/events{/privacy}",
        "followers_url": "https://api.github.com/users/paugier/followers",
        "following_url": "https://api.github.com/users/paugier/following{/other_user}",
        "gists_url": "https://api.github.com/users/paugier/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/paugier",
        "id": 8842662,
        "login": "paugier",
        "node_id": "MDQ6VXNlcjg4NDI2NjI=",
        "organizations_url": "https://api.github.com/users/paugier/orgs",
        "received_events_url": "https://api.github.com/users/paugier/received_events",
        "repos_url": "https://api.github.com/users/paugier/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/paugier/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/paugier/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/paugier"
    }
}