{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "**Is your feature request related to a problem? Please describe.**\r\nStarting cygdb on OSX by default just crashes because gdb currently crashes when the `file` command is issued\r\n```\r\n$ cygdb .\r\ngdb command file: Activating virtualenv: ~/debugenv/venv; path_to_activate_this_py: ~/debugenv/venv/bin/activate_this.py\r\nInstall pygments for colorized source code.\r\n../../gdb/thread.c:95: internal-error: struct thread_info *inferior_thread(): Assertion `current_thread_ != nullptr' failed.\r\nA problem internal to GDB has been detected,\r\n$\r\n```\r\n\r\nSee https://www.cygwin.com/bugzilla/show_bug.cgi?id=26912 for some details.\r\n\r\n**Describe the solution you'd like**\r\nThe problem can actually be avoided by skipping the `file` command and passing the path to the interpreter on the command line\r\n```\r\n$ cygdb . -- --args python -c \"print('hello')\"\r\ngdb command file: Activating virtualenv: /Users/amol/wrk/ursa/debugenv/venv; path_to_activate_this_py: /Users/amol/wrk/ursa/debugenv/venv/bin/activate_this.py\r\nInstall pygments for colorized source code.\r\n(gdb) cy run\r\nhello\r\n[Inferior 1 (process 9022) exited normally]\r\n(gdb)\r\n```\r\nThis requires by they way to disable the `file` command issued by `Cygdb.py` (I just commented `f.write(\"file %s\\n\" % interpreter)`). A possible work around might to allow users to explicitly bypass the `file` command using a `--no-interpreter` option to `cygdb`, which still does `cy import` the debugging information but leaves to the user the responsibility to set which target interpreter should be debugged.",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "Note, I check if this was related to GDB 10 only, but I can confirm it also happens with GDB 9. Just with slightly different error.\r\n```\r\n../../gdb/inferior.c:283: internal-error: struct inferior *find_inferior_pid(int): Assertion `pid != 0' failed.\r\nA problem internal to GDB has been detected,\r\n```",
            "created_at": "2021-05-20T16:37:34Z",
            "html_url": "https://github.com/cython/cython/issues/4181#issuecomment-845275806",
            "id": 845275806,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/4181",
            "node_id": "MDEyOklzc3VlQ29tbWVudDg0NTI3NTgwNg==",
            "performed_via_github_app": null,
            "updated_at": "2021-05-20T16:37:34Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/845275806",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/601423?v=4",
                "events_url": "https://api.github.com/users/amol-/events{/privacy}",
                "followers_url": "https://api.github.com/users/amol-/followers",
                "following_url": "https://api.github.com/users/amol-/following{/other_user}",
                "gists_url": "https://api.github.com/users/amol-/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/amol-",
                "id": 601423,
                "login": "amol-",
                "node_id": "MDQ6VXNlcjYwMTQyMw==",
                "organizations_url": "https://api.github.com/users/amol-/orgs",
                "received_events_url": "https://api.github.com/users/amol-/received_events",
                "repos_url": "https://api.github.com/users/amol-/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/amol-/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/amol-/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/amol-"
            }
        },
        {
            "author_association": "NONE",
            "body": "https://github.com/cython/cython/pull/4186 adds the proposed option which allows to work around the issue on OSX\r\n\r\n```\r\n$ cygdb . -- --args python -c \"print('hello')\"\r\nGNU gdb (GDB) 9.1\r\nCopyright (C) 2020 Free Software Foundation, Inc.\r\n...\r\n../../gdb/inferior.c:283: internal-error: struct inferior *find_inferior_pid(int): Assertion `pid != 0' failed.\r\nA problem internal to GDB has been detected,\r\nfurther debugging may prove unreliable.\r\nQuit this debugging session? (y or n) [answered Y; input not from terminal]\r\n$\r\n```\r\n\r\nVS\r\n\r\n```\r\n$ cygdb --skip-interpreter . -- --args python -c \"print('hello')\"\r\nGNU gdb (GDB) 9.1\r\nCopyright (C) 2020 Free Software Foundation, Inc.\r\n...\r\n(gdb) cy run\r\nhello\r\n[Inferior 1 (process 31656) exited normally]\r\n(gdb)\r\n``` ",
            "created_at": "2021-05-21T14:04:43Z",
            "html_url": "https://github.com/cython/cython/issues/4181#issuecomment-845973948",
            "id": 845973948,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/4181",
            "node_id": "MDEyOklzc3VlQ29tbWVudDg0NTk3Mzk0OA==",
            "performed_via_github_app": null,
            "updated_at": "2021-05-21T14:05:29Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/845973948",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/601423?v=4",
                "events_url": "https://api.github.com/users/amol-/events{/privacy}",
                "followers_url": "https://api.github.com/users/amol-/followers",
                "following_url": "https://api.github.com/users/amol-/following{/other_user}",
                "gists_url": "https://api.github.com/users/amol-/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/amol-",
                "id": 601423,
                "login": "amol-",
                "node_id": "MDQ6VXNlcjYwMTQyMw==",
                "organizations_url": "https://api.github.com/users/amol-/orgs",
                "received_events_url": "https://api.github.com/users/amol-/received_events",
                "repos_url": "https://api.github.com/users/amol-/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/amol-/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/amol-/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/amol-"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Do we have to leave this option to the user, or is there something we can do to solve the issue ourselves?",
            "created_at": "2021-05-21T21:53:09Z",
            "html_url": "https://github.com/cython/cython/issues/4181#issuecomment-846281710",
            "id": 846281710,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/4181",
            "node_id": "MDEyOklzc3VlQ29tbWVudDg0NjI4MTcxMA==",
            "performed_via_github_app": null,
            "updated_at": "2021-05-21T21:53:09Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/846281710",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "author_association": "NONE",
            "body": "I thought a bit about this and it seemed to me that the best was to leave the choice open to user. In theory the GDB bug should get fixed sooner or later and it seems to me that any automation would be much more complex (you would have to skip the interpreter, but check that it was somehow provided in the command line) for something that in theory should get fixed upstream.",
            "created_at": "2021-05-26T10:48:52Z",
            "html_url": "https://github.com/cython/cython/issues/4181#issuecomment-848668213",
            "id": 848668213,
            "issue_url": "https://api.github.com/repos/cython/cython/issues/4181",
            "node_id": "MDEyOklzc3VlQ29tbWVudDg0ODY2ODIxMw==",
            "performed_via_github_app": null,
            "updated_at": "2021-05-26T10:48:52Z",
            "url": "https://api.github.com/repos/cython/cython/issues/comments/848668213",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/601423?v=4",
                "events_url": "https://api.github.com/users/amol-/events{/privacy}",
                "followers_url": "https://api.github.com/users/amol-/followers",
                "following_url": "https://api.github.com/users/amol-/following{/other_user}",
                "gists_url": "https://api.github.com/users/amol-/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/amol-",
                "id": 601423,
                "login": "amol-",
                "node_id": "MDQ6VXNlcjYwMTQyMw==",
                "organizations_url": "https://api.github.com/users/amol-/orgs",
                "received_events_url": "https://api.github.com/users/amol-/received_events",
                "repos_url": "https://api.github.com/users/amol-/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/amol-/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/amol-/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/amol-"
            }
        }
    ],
    "comments": 4,
    "comments_url": "https://api.github.com/repos/cython/cython/issues/4181/comments",
    "created_at": "2021-05-20T10:33:53Z",
    "event_data": [],
    "events_url": "https://api.github.com/repos/cython/cython/issues/4181/events",
    "html_url": "https://github.com/cython/cython/issues/4181",
    "id": 896617647,
    "labels": [],
    "labels_url": "https://api.github.com/repos/cython/cython/issues/4181/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU4OTY2MTc2NDc=",
    "number": 4181,
    "performed_via_github_app": null,
    "repository_url": "https://api.github.com/repos/cython/cython",
    "state": "open",
    "title": "[ENH] CyGDB can't start on OSX due to setup of interpreter, make interpreter setup optional",
    "updated_at": "2021-05-26T10:48:52Z",
    "url": "https://api.github.com/repos/cython/cython/issues/4181",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/601423?v=4",
        "events_url": "https://api.github.com/users/amol-/events{/privacy}",
        "followers_url": "https://api.github.com/users/amol-/followers",
        "following_url": "https://api.github.com/users/amol-/following{/other_user}",
        "gists_url": "https://api.github.com/users/amol-/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/amol-",
        "id": 601423,
        "login": "amol-",
        "node_id": "MDQ6VXNlcjYwMTQyMw==",
        "organizations_url": "https://api.github.com/users/amol-/orgs",
        "received_events_url": "https://api.github.com/users/amol-/received_events",
        "repos_url": "https://api.github.com/users/amol-/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/amol-/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/amol-/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/amol-"
    }
}