{
    "_links": {
        "comments": {
            "href": "https://api.github.com/repos/cython/cython/issues/5040/comments"
        },
        "commits": {
            "href": "https://api.github.com/repos/cython/cython/pulls/5040/commits"
        },
        "html": {
            "href": "https://github.com/cython/cython/pull/5040"
        },
        "issue": {
            "href": "https://api.github.com/repos/cython/cython/issues/5040"
        },
        "review_comment": {
            "href": "https://api.github.com/repos/cython/cython/pulls/comments{/number}"
        },
        "review_comments": {
            "href": "https://api.github.com/repos/cython/cython/pulls/5040/comments"
        },
        "self": {
            "href": "https://api.github.com/repos/cython/cython/pulls/5040"
        },
        "statuses": {
            "href": "https://api.github.com/repos/cython/cython/statuses/068883048bc7f3aa58c5c6a5831c15f4245c9a6a"
        }
    },
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "auto_merge": null,
    "base": {
        "label": "cython:master",
        "ref": "master",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/cython/cython/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/cython/cython/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/cython/cython/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/cython/cython/branches{/branch}",
            "clone_url": "https://github.com/cython/cython.git",
            "collaborators_url": "https://api.github.com/repos/cython/cython/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/cython/cython/comments{/number}",
            "commits_url": "https://api.github.com/repos/cython/cython/commits{/sha}",
            "compare_url": "https://api.github.com/repos/cython/cython/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/cython/cython/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/cython/cython/contributors",
            "created_at": "2010-11-21T07:44:20Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/cython/cython/deployments",
            "description": "The most widely used Python to C compiler",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/cython/cython/downloads",
            "events_url": "https://api.github.com/repos/cython/cython/events",
            "fork": false,
            "forks": 1338,
            "forks_count": 1338,
            "forks_url": "https://api.github.com/repos/cython/cython/forks",
            "full_name": "cython/cython",
            "git_commits_url": "https://api.github.com/repos/cython/cython/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/cython/cython/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/cython/cython/git/tags{/sha}",
            "git_url": "git://github.com/cython/cython.git",
            "has_discussions": false,
            "has_downloads": true,
            "has_issues": true,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://cython.org",
            "hooks_url": "https://api.github.com/repos/cython/cython/hooks",
            "html_url": "https://github.com/cython/cython",
            "id": 1099265,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/cython/cython/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/cython/cython/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/cython/cython/issues{/number}",
            "keys_url": "https://api.github.com/repos/cython/cython/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/cython/cython/labels{/name}",
            "language": "Python",
            "languages_url": "https://api.github.com/repos/cython/cython/languages",
            "license": {
                "key": "apache-2.0",
                "name": "Apache License 2.0",
                "node_id": "MDc6TGljZW5zZTI=",
                "spdx_id": "Apache-2.0",
                "url": "https://api.github.com/licenses/apache-2.0"
            },
            "merges_url": "https://api.github.com/repos/cython/cython/merges",
            "milestones_url": "https://api.github.com/repos/cython/cython/milestones{/number}",
            "mirror_url": null,
            "name": "cython",
            "node_id": "MDEwOlJlcG9zaXRvcnkxMDk5MjY1",
            "notifications_url": "https://api.github.com/repos/cython/cython/notifications{?since,all,participating}",
            "open_issues": 1130,
            "open_issues_count": 1130,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/486082?v=4",
                "events_url": "https://api.github.com/users/cython/events{/privacy}",
                "followers_url": "https://api.github.com/users/cython/followers",
                "following_url": "https://api.github.com/users/cython/following{/other_user}",
                "gists_url": "https://api.github.com/users/cython/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cython",
                "id": 486082,
                "login": "cython",
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ4NjA4Mg==",
                "organizations_url": "https://api.github.com/users/cython/orgs",
                "received_events_url": "https://api.github.com/users/cython/received_events",
                "repos_url": "https://api.github.com/users/cython/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cython/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cython/subscriptions",
                "type": "Organization",
                "url": "https://api.github.com/users/cython"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/cython/cython/pulls{/number}",
            "pushed_at": "2022-11-09T11:55:45Z",
            "releases_url": "https://api.github.com/repos/cython/cython/releases{/id}",
            "size": 65952,
            "ssh_url": "git@github.com:cython/cython.git",
            "stargazers_count": 7435,
            "stargazers_url": "https://api.github.com/repos/cython/cython/stargazers",
            "statuses_url": "https://api.github.com/repos/cython/cython/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/cython/cython/subscribers",
            "subscription_url": "https://api.github.com/repos/cython/cython/subscription",
            "svn_url": "https://github.com/cython/cython",
            "tags_url": "https://api.github.com/repos/cython/cython/tags",
            "teams_url": "https://api.github.com/repos/cython/cython/teams",
            "topics": [
                "big-data",
                "c",
                "cpp",
                "cpython",
                "cpython-extensions",
                "cython",
                "performance",
                "python"
            ],
            "trees_url": "https://api.github.com/repos/cython/cython/git/trees{/sha}",
            "updated_at": "2022-11-09T13:41:38Z",
            "url": "https://api.github.com/repos/cython/cython",
            "visibility": "public",
            "watchers": 7435,
            "watchers_count": 7435,
            "web_commit_signoff_required": false
        },
        "sha": "fd71114951a9e0d48f0aad324e71d3d9f8be29df",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/486082?v=4",
            "events_url": "https://api.github.com/users/cython/events{/privacy}",
            "followers_url": "https://api.github.com/users/cython/followers",
            "following_url": "https://api.github.com/users/cython/following{/other_user}",
            "gists_url": "https://api.github.com/users/cython/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/cython",
            "id": 486082,
            "login": "cython",
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ4NjA4Mg==",
            "organizations_url": "https://api.github.com/users/cython/orgs",
            "received_events_url": "https://api.github.com/users/cython/received_events",
            "repos_url": "https://api.github.com/users/cython/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/cython/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/cython/subscriptions",
            "type": "Organization",
            "url": "https://api.github.com/users/cython"
        }
    },
    "body": "Fixes #1839 \r\n\r\n`cdef public` functions should be declared with the appropriate linkage:\r\n- in C mode, either `extern` or `extern \"C\"`, depending on whether the header file is included in (resp. object code is linked against) a C or a C++ compilation unit. Choice is made at compile-time through `#ifdef __cplusplus` macros. NB: This is the current behavior.\r\n- in C++ mode, `extern \"C++\"` is the only option, as C code cannot call C++ code. Note that `extern \"C++\"` should be preferred over `extern` to allow users to `#include` the C++ header inside a `extern \"C\"` block (which is legal, although barely used).\r\n\r\nNote that the current behavior is OK for C mode, but is incorrect for the C++ mode. As described in #1839, this incorrect behavior is diagnosed by compilers emitting warnings when `cdef public` functions return a C++ type (e.g. `std::vector`).\r\nThe test introduced in this PR checks that the current behavior for C mode (with both C and C++ compatibility) is preserved, and that the behavior for C++ mode is fixed.",
    "closed_at": "2022-11-08T21:30:07Z",
    "comment_data": [
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/5040#discussion_r979058204"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/5040"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/979058204"
                }
            },
            "author_association": "MEMBER",
            "body": "What's the `extern \"C\"` here testing? I'm just wondering if it's really a C language feature and perhaps isn't something that Cython needs to test",
            "commit_id": "068883048bc7f3aa58c5c6a5831c15f4245c9a6a",
            "created_at": "2022-09-23T20:55:18Z",
            "diff_hunk": "@@ -0,0 +1,148 @@\n+# mode: run\n+# tag: cpp\n+# ticket: 1839\n+\n+\"\"\"\n+PYTHON setup.py build_ext --inplace\n+PYTHON -c \"from foo import test; test()\"\n+PYTHON -c \"from bar import test; test()\"\n+PYTHON -c \"from baz import test; test()\"\n+\"\"\"\n+\n+######## setup.py ########\n+\n+from Cython.Build import cythonize\n+from Cython.Distutils.extension import Extension\n+from distutils.core import setup\n+\n+foo = Extension(\n+    \"foo\",\n+    [\"foo.pyx\", \"foo1.cpp\", \"foo2.cpp\"],\n+)\n+bar = Extension(\n+    \"bar\",\n+    [\"bar.pyx\", \"bar1.c\", \"bar2.cpp\"],\n+)\n+baz = Extension(\n+    \"baz\",\n+    [\"baz.pyx\", \"baz1.c\", \"baz2.cpp\"],\n+    define_macros = [(\"__PYX_EXTERN_C\", 'extern \"C\"')],\n+)\n+\n+setup(\n+    ext_modules=cythonize([foo, bar, baz]),\n+)\n+\n+######## foo.pyx ########\n+\n+# distutils: language = c++\n+\n+from libcpp cimport vector\n+\n+cdef public vector.vector[int] get_vector():\n+    return [1,2,3]\n+\n+cdef extern from \"foo_header.h\":\n+    cdef size_t size_vector1()\n+    cdef size_t size_vector2()\n+\n+def test():\n+    assert size_vector1() == 3\n+    assert size_vector2() == 3\n+\n+######## foo_header.h ########\n+\n+size_t size_vector1();\n+size_t size_vector2();\n+\n+######## foo1.cpp ########\n+\n+#include <vector>\n+#include \"foo.h\"\n+\n+size_t size_vector1() {\n+    return get_vector().size();\n+}\n+\n+######## foo2.cpp ########\n+\n+#include <vector>\n+extern \"C\" {\n+#include \"foo.h\"\n+}",
            "html_url": "https://github.com/cython/cython/pull/5040#discussion_r979058204",
            "id": 979058204,
            "line": null,
            "node_id": "PRRC_kwDOABDGAc46Wz4c",
            "original_commit_id": "e44a1e5c79b6ab5a0c8e527cbc7518f25a884b60",
            "original_line": 72,
            "original_position": 72,
            "original_start_line": 70,
            "path": "tests/run/cpp_extern.srctree",
            "position": null,
            "pull_request_review_id": 1119033654,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/5040",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/pulls/comments/979058204/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "updated_at": "2022-09-23T20:58:45Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/979058204",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/5040#discussion_r979452865"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/5040"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/979452865"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "It tests that the `cdef public` functions are flagged as `extern \"C++\"` (and not `extern`) even when in a C++ compilation unit.\r\nThe rationale is that it is legal to `#include` a header from within a `extern \"C\"` block. In this scenario, all declarations of the header are seen with C-linkage, except those explicitly flagged `extern \"C++\"`.\r\n\r\nThis usage of `extern \"C\"` `#include` is probably a niche, yet it is legal, so I felt that Cython-generated code should comply with it, and compliance should be tested.",
            "commit_id": "068883048bc7f3aa58c5c6a5831c15f4245c9a6a",
            "created_at": "2022-09-25T20:17:23Z",
            "diff_hunk": "@@ -0,0 +1,148 @@\n+# mode: run\n+# tag: cpp\n+# ticket: 1839\n+\n+\"\"\"\n+PYTHON setup.py build_ext --inplace\n+PYTHON -c \"from foo import test; test()\"\n+PYTHON -c \"from bar import test; test()\"\n+PYTHON -c \"from baz import test; test()\"\n+\"\"\"\n+\n+######## setup.py ########\n+\n+from Cython.Build import cythonize\n+from Cython.Distutils.extension import Extension\n+from distutils.core import setup\n+\n+foo = Extension(\n+    \"foo\",\n+    [\"foo.pyx\", \"foo1.cpp\", \"foo2.cpp\"],\n+)\n+bar = Extension(\n+    \"bar\",\n+    [\"bar.pyx\", \"bar1.c\", \"bar2.cpp\"],\n+)\n+baz = Extension(\n+    \"baz\",\n+    [\"baz.pyx\", \"baz1.c\", \"baz2.cpp\"],\n+    define_macros = [(\"__PYX_EXTERN_C\", 'extern \"C\"')],\n+)\n+\n+setup(\n+    ext_modules=cythonize([foo, bar, baz]),\n+)\n+\n+######## foo.pyx ########\n+\n+# distutils: language = c++\n+\n+from libcpp cimport vector\n+\n+cdef public vector.vector[int] get_vector():\n+    return [1,2,3]\n+\n+cdef extern from \"foo_header.h\":\n+    cdef size_t size_vector1()\n+    cdef size_t size_vector2()\n+\n+def test():\n+    assert size_vector1() == 3\n+    assert size_vector2() == 3\n+\n+######## foo_header.h ########\n+\n+size_t size_vector1();\n+size_t size_vector2();\n+\n+######## foo1.cpp ########\n+\n+#include <vector>\n+#include \"foo.h\"\n+\n+size_t size_vector1() {\n+    return get_vector().size();\n+}\n+\n+######## foo2.cpp ########\n+\n+#include <vector>\n+extern \"C\" {\n+#include \"foo.h\"\n+}",
            "html_url": "https://github.com/cython/cython/pull/5040#discussion_r979452865",
            "id": 979452865,
            "in_reply_to_id": 979058204,
            "line": null,
            "node_id": "PRRC_kwDOABDGAc46YUPB",
            "original_commit_id": "e44a1e5c79b6ab5a0c8e527cbc7518f25a884b60",
            "original_line": 72,
            "original_position": 72,
            "original_start_line": 70,
            "path": "tests/run/cpp_extern.srctree",
            "position": null,
            "pull_request_review_id": 1119446712,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/5040",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/pulls/comments/979452865/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "updated_at": "2022-09-25T20:17:24Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/979452865",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/111890372?v=4",
                "events_url": "https://api.github.com/users/EpigeneMax/events{/privacy}",
                "followers_url": "https://api.github.com/users/EpigeneMax/followers",
                "following_url": "https://api.github.com/users/EpigeneMax/following{/other_user}",
                "gists_url": "https://api.github.com/users/EpigeneMax/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/EpigeneMax",
                "id": 111890372,
                "login": "EpigeneMax",
                "node_id": "U_kgDOBqtPxA",
                "organizations_url": "https://api.github.com/users/EpigeneMax/orgs",
                "received_events_url": "https://api.github.com/users/EpigeneMax/received_events",
                "repos_url": "https://api.github.com/users/EpigeneMax/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/EpigeneMax/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/EpigeneMax/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/EpigeneMax"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/5040#discussion_r979454027"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/5040"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/979454027"
                }
            },
            "author_association": "MEMBER",
            "body": "Fair enough - that makes sense. It seems worth a comment since it isn't obvious at first look (at least to me)",
            "commit_id": "068883048bc7f3aa58c5c6a5831c15f4245c9a6a",
            "created_at": "2022-09-25T20:29:07Z",
            "diff_hunk": "@@ -0,0 +1,148 @@\n+# mode: run\n+# tag: cpp\n+# ticket: 1839\n+\n+\"\"\"\n+PYTHON setup.py build_ext --inplace\n+PYTHON -c \"from foo import test; test()\"\n+PYTHON -c \"from bar import test; test()\"\n+PYTHON -c \"from baz import test; test()\"\n+\"\"\"\n+\n+######## setup.py ########\n+\n+from Cython.Build import cythonize\n+from Cython.Distutils.extension import Extension\n+from distutils.core import setup\n+\n+foo = Extension(\n+    \"foo\",\n+    [\"foo.pyx\", \"foo1.cpp\", \"foo2.cpp\"],\n+)\n+bar = Extension(\n+    \"bar\",\n+    [\"bar.pyx\", \"bar1.c\", \"bar2.cpp\"],\n+)\n+baz = Extension(\n+    \"baz\",\n+    [\"baz.pyx\", \"baz1.c\", \"baz2.cpp\"],\n+    define_macros = [(\"__PYX_EXTERN_C\", 'extern \"C\"')],\n+)\n+\n+setup(\n+    ext_modules=cythonize([foo, bar, baz]),\n+)\n+\n+######## foo.pyx ########\n+\n+# distutils: language = c++\n+\n+from libcpp cimport vector\n+\n+cdef public vector.vector[int] get_vector():\n+    return [1,2,3]\n+\n+cdef extern from \"foo_header.h\":\n+    cdef size_t size_vector1()\n+    cdef size_t size_vector2()\n+\n+def test():\n+    assert size_vector1() == 3\n+    assert size_vector2() == 3\n+\n+######## foo_header.h ########\n+\n+size_t size_vector1();\n+size_t size_vector2();\n+\n+######## foo1.cpp ########\n+\n+#include <vector>\n+#include \"foo.h\"\n+\n+size_t size_vector1() {\n+    return get_vector().size();\n+}\n+\n+######## foo2.cpp ########\n+\n+#include <vector>\n+extern \"C\" {\n+#include \"foo.h\"\n+}",
            "html_url": "https://github.com/cython/cython/pull/5040#discussion_r979454027",
            "id": 979454027,
            "in_reply_to_id": 979058204,
            "line": null,
            "node_id": "PRRC_kwDOABDGAc46YUhL",
            "original_commit_id": "e44a1e5c79b6ab5a0c8e527cbc7518f25a884b60",
            "original_line": 72,
            "original_position": 72,
            "original_start_line": 70,
            "path": "tests/run/cpp_extern.srctree",
            "position": null,
            "pull_request_review_id": 1119447657,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/5040",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/pulls/comments/979454027/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "updated_at": "2022-09-25T20:29:07Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/979454027",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/5040#discussion_r979608279"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/5040"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/979608279"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Comment added in commit [79f8003](https://github.com/cython/cython/pull/5040/commits/79f800360b25b8820329627d992b4b777daabdae)",
            "commit_id": "068883048bc7f3aa58c5c6a5831c15f4245c9a6a",
            "created_at": "2022-09-26T06:39:48Z",
            "diff_hunk": "@@ -0,0 +1,148 @@\n+# mode: run\n+# tag: cpp\n+# ticket: 1839\n+\n+\"\"\"\n+PYTHON setup.py build_ext --inplace\n+PYTHON -c \"from foo import test; test()\"\n+PYTHON -c \"from bar import test; test()\"\n+PYTHON -c \"from baz import test; test()\"\n+\"\"\"\n+\n+######## setup.py ########\n+\n+from Cython.Build import cythonize\n+from Cython.Distutils.extension import Extension\n+from distutils.core import setup\n+\n+foo = Extension(\n+    \"foo\",\n+    [\"foo.pyx\", \"foo1.cpp\", \"foo2.cpp\"],\n+)\n+bar = Extension(\n+    \"bar\",\n+    [\"bar.pyx\", \"bar1.c\", \"bar2.cpp\"],\n+)\n+baz = Extension(\n+    \"baz\",\n+    [\"baz.pyx\", \"baz1.c\", \"baz2.cpp\"],\n+    define_macros = [(\"__PYX_EXTERN_C\", 'extern \"C\"')],\n+)\n+\n+setup(\n+    ext_modules=cythonize([foo, bar, baz]),\n+)\n+\n+######## foo.pyx ########\n+\n+# distutils: language = c++\n+\n+from libcpp cimport vector\n+\n+cdef public vector.vector[int] get_vector():\n+    return [1,2,3]\n+\n+cdef extern from \"foo_header.h\":\n+    cdef size_t size_vector1()\n+    cdef size_t size_vector2()\n+\n+def test():\n+    assert size_vector1() == 3\n+    assert size_vector2() == 3\n+\n+######## foo_header.h ########\n+\n+size_t size_vector1();\n+size_t size_vector2();\n+\n+######## foo1.cpp ########\n+\n+#include <vector>\n+#include \"foo.h\"\n+\n+size_t size_vector1() {\n+    return get_vector().size();\n+}\n+\n+######## foo2.cpp ########\n+\n+#include <vector>\n+extern \"C\" {\n+#include \"foo.h\"\n+}",
            "html_url": "https://github.com/cython/cython/pull/5040#discussion_r979608279",
            "id": 979608279,
            "in_reply_to_id": 979058204,
            "line": null,
            "node_id": "PRRC_kwDOABDGAc46Y6LX",
            "original_commit_id": "e44a1e5c79b6ab5a0c8e527cbc7518f25a884b60",
            "original_line": 72,
            "original_position": 72,
            "original_start_line": 70,
            "path": "tests/run/cpp_extern.srctree",
            "position": null,
            "pull_request_review_id": 1119650761,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/5040",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/pulls/comments/979608279/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "updated_at": "2022-09-26T06:39:48Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/979608279",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/111890372?v=4",
                "events_url": "https://api.github.com/users/EpigeneMax/events{/privacy}",
                "followers_url": "https://api.github.com/users/EpigeneMax/followers",
                "following_url": "https://api.github.com/users/EpigeneMax/following{/other_user}",
                "gists_url": "https://api.github.com/users/EpigeneMax/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/EpigeneMax",
                "id": 111890372,
                "login": "EpigeneMax",
                "node_id": "U_kgDOBqtPxA",
                "organizations_url": "https://api.github.com/users/EpigeneMax/orgs",
                "received_events_url": "https://api.github.com/users/EpigeneMax/received_events",
                "repos_url": "https://api.github.com/users/EpigeneMax/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/EpigeneMax/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/EpigeneMax/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/EpigeneMax"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/5040#discussion_r979769366"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/5040"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/979769366"
                }
            },
            "author_association": "MEMBER",
            "body": "If this is the only functionality that we need from env, then I'd rather add an argument `is_cpp=False` than passing  all of`env` into this method.",
            "commit_id": "068883048bc7f3aa58c5c6a5831c15f4245c9a6a",
            "created_at": "2022-09-26T09:19:37Z",
            "diff_hunk": "@@ -876,14 +876,17 @@ def generate_module_preamble(self, env, options, cimported_modules, metadata, co\n         if has_np_pythran(env):\n             env.use_utility_code(UtilityCode.load_cached(\"PythranConversion\", \"CppSupport.cpp\"))\n \n-    def generate_extern_c_macro_definition(self, code):\n+    def generate_extern_c_macro_definition(self, code, env):\n         name = Naming.extern_c_macro\n         code.putln(\"#ifndef %s\" % name)\n-        code.putln(\"  #ifdef __cplusplus\")\n-        code.putln('    #define %s extern \"C\"' % name)\n-        code.putln(\"  #else\")\n-        code.putln(\"    #define %s extern\" % name)\n-        code.putln(\"  #endif\")\n+        if env.is_cpp():",
            "html_url": "https://github.com/cython/cython/pull/5040#discussion_r979769366",
            "id": 979769366,
            "line": null,
            "node_id": "PRRC_kwDOABDGAc46ZhgW",
            "original_commit_id": "79f800360b25b8820329627d992b4b777daabdae",
            "original_line": 882,
            "original_position": 31,
            "original_start_line": null,
            "path": "Cython/Compiler/ModuleNode.py",
            "position": null,
            "pull_request_review_id": 1119876225,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/5040",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/pulls/comments/979769366/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2022-09-26T09:41:12Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/979769366",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/5040#discussion_r979784896"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/5040"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/979784896"
                }
            },
            "author_association": "MEMBER",
            "body": "I think (!) the header file isn't necessarily C++ specific even when we generate C++ code, so this should better not look at `env.is_cpp()` but use pure compile-time C/C++ features.",
            "commit_id": "068883048bc7f3aa58c5c6a5831c15f4245c9a6a",
            "created_at": "2022-09-26T09:32:42Z",
            "diff_hunk": "@@ -262,7 +262,7 @@ def h_entries(entries, api=0, pxd=0):\n             api_guard = self.api_name(Naming.api_guard_prefix, env)\n             h_code_start.putln(\"#ifndef %s\" % api_guard)\n             h_code_start.putln(\"\")\n-            self.generate_extern_c_macro_definition(h_code_start)\n+            self.generate_extern_c_macro_definition(h_code_start, env)",
            "html_url": "https://github.com/cython/cython/pull/5040#discussion_r979784896",
            "id": 979784896,
            "line": null,
            "node_id": "PRRC_kwDOABDGAc46ZlTA",
            "original_commit_id": "79f800360b25b8820329627d992b4b777daabdae",
            "original_line": 265,
            "original_position": 5,
            "original_start_line": null,
            "path": "Cython/Compiler/ModuleNode.py",
            "position": null,
            "pull_request_review_id": 1119876225,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/5040",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/pulls/comments/979784896/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2022-09-26T09:41:12Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/979784896",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/5040#discussion_r979786286"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/5040"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/979786286"
                }
            },
            "author_association": "MEMBER",
            "body": "This seems an unrelated change that shouldn't be included in this PR.",
            "commit_id": "068883048bc7f3aa58c5c6a5831c15f4245c9a6a",
            "created_at": "2022-09-26T09:34:09Z",
            "diff_hunk": "@@ -3,6 +3,7 @@\n # The following two lines are for test purposes only, please ignore them.\n # distutils: sources = embedded_main.c\n # tag: py3only\n+# tag: no-cpp",
            "html_url": "https://github.com/cython/cython/pull/5040#discussion_r979786286",
            "id": 979786286,
            "line": 6,
            "node_id": "PRRC_kwDOABDGAc46Zlou",
            "original_commit_id": "79f800360b25b8820329627d992b4b777daabdae",
            "original_line": 6,
            "original_position": 4,
            "original_start_line": null,
            "path": "docs/examples/tutorial/embedding/embedded.pyx",
            "position": 4,
            "pull_request_review_id": 1119876225,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/5040",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/pulls/comments/979786286/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2022-09-26T09:41:12Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/979786286",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/5040#discussion_r979788297"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/5040"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/979788297"
                }
            },
            "author_association": "MEMBER",
            "body": "This is in test code. Why did you remove these?",
            "commit_id": "068883048bc7f3aa58c5c6a5831c15f4245c9a6a",
            "created_at": "2022-09-26T09:36:12Z",
            "diff_hunk": "@@ -1,12 +1,6 @@\n-#ifdef __cplusplus\n-extern \"C\" {\n-#endif",
            "html_url": "https://github.com/cython/cython/pull/5040#discussion_r979788297",
            "id": 979788297,
            "line": 3,
            "node_id": "PRRC_kwDOABDGAc46ZmIJ",
            "original_commit_id": "79f800360b25b8820329627d992b4b777daabdae",
            "original_line": 3,
            "original_position": 3,
            "original_start_line": 1,
            "path": "tests/compile/excvalcheck.h",
            "position": 3,
            "pull_request_review_id": 1119876225,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/5040",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/pulls/comments/979788297/reactions"
            },
            "side": "LEFT",
            "start_line": 1,
            "start_side": "LEFT",
            "updated_at": "2022-09-26T09:41:12Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/979788297",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/5040#discussion_r980296238"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/5040"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/980296238"
                }
            },
            "author_association": "MEMBER",
            "body": "My view was:\r\n* if you're passing any C++ class (and a struct can be a hidden a C++ class) then the header is C++ specific. It's definitely very hard for Cython to tell if it's C++ specific.\r\n* The user can always redefine the `__PYX_EXTERN_C` macro themselves, so we aren't forcing them into being C++ specific.\r\n* ~With that said, I'm wondering what's wrong with declaring the functions as plain `extern` in both cases. There possibly is something I'm missing though~ - that's comment \"Note that extern \"C++\" should be preferred over extern to allow users to #include the C++ header inside a extern \"C\" block (which is legal, although barely used).\" ",
            "commit_id": "068883048bc7f3aa58c5c6a5831c15f4245c9a6a",
            "created_at": "2022-09-26T16:59:05Z",
            "diff_hunk": "@@ -262,7 +262,7 @@ def h_entries(entries, api=0, pxd=0):\n             api_guard = self.api_name(Naming.api_guard_prefix, env)\n             h_code_start.putln(\"#ifndef %s\" % api_guard)\n             h_code_start.putln(\"\")\n-            self.generate_extern_c_macro_definition(h_code_start)\n+            self.generate_extern_c_macro_definition(h_code_start, env)",
            "html_url": "https://github.com/cython/cython/pull/5040#discussion_r980296238",
            "id": 980296238,
            "in_reply_to_id": 979784896,
            "line": null,
            "node_id": "PRRC_kwDOABDGAc46biIu",
            "original_commit_id": "79f800360b25b8820329627d992b4b777daabdae",
            "original_line": 265,
            "original_position": 5,
            "original_start_line": null,
            "path": "Cython/Compiler/ModuleNode.py",
            "position": null,
            "pull_request_review_id": 1120610517,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/5040",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/pulls/comments/980296238/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2022-09-26T17:00:51Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/980296238",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/5040#discussion_r980481210"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/5040"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/980481210"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "> * if you're passing any C++ class (and a struct can be a hidden a C++ class) then the header is C++ specific. It's definitely very hard for Cython to tell if it's C++ specific.\r\n\r\nYes! So the rationale behind this PR is that any header generated in C++ mode should be considered as C++ specific.\r\n\r\nThe reason to look at `env.is_cpp()` is that the header exposes the signatures of functions (which may have C or C++ linkage) to a compilation unit (which may be C or C++). Linkage of functions depends on the language used when cythonizing `.pyx` file, while the compile-time C/C++ macros can only determine the language of the compilation unit they are in.\r\n\r\n\r\n\r\n",
            "commit_id": "068883048bc7f3aa58c5c6a5831c15f4245c9a6a",
            "created_at": "2022-09-26T20:40:30Z",
            "diff_hunk": "@@ -262,7 +262,7 @@ def h_entries(entries, api=0, pxd=0):\n             api_guard = self.api_name(Naming.api_guard_prefix, env)\n             h_code_start.putln(\"#ifndef %s\" % api_guard)\n             h_code_start.putln(\"\")\n-            self.generate_extern_c_macro_definition(h_code_start)\n+            self.generate_extern_c_macro_definition(h_code_start, env)",
            "html_url": "https://github.com/cython/cython/pull/5040#discussion_r980481210",
            "id": 980481210,
            "in_reply_to_id": 979784896,
            "line": null,
            "node_id": "PRRC_kwDOABDGAc46cPS6",
            "original_commit_id": "79f800360b25b8820329627d992b4b777daabdae",
            "original_line": 265,
            "original_position": 5,
            "original_start_line": null,
            "path": "Cython/Compiler/ModuleNode.py",
            "position": null,
            "pull_request_review_id": 1120876048,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/5040",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/pulls/comments/980481210/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2022-09-26T20:40:30Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/980481210",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/111890372?v=4",
                "events_url": "https://api.github.com/users/EpigeneMax/events{/privacy}",
                "followers_url": "https://api.github.com/users/EpigeneMax/followers",
                "following_url": "https://api.github.com/users/EpigeneMax/following{/other_user}",
                "gists_url": "https://api.github.com/users/EpigeneMax/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/EpigeneMax",
                "id": 111890372,
                "login": "EpigeneMax",
                "node_id": "U_kgDOBqtPxA",
                "organizations_url": "https://api.github.com/users/EpigeneMax/orgs",
                "received_events_url": "https://api.github.com/users/EpigeneMax/received_events",
                "repos_url": "https://api.github.com/users/EpigeneMax/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/EpigeneMax/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/EpigeneMax/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/EpigeneMax"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/5040#discussion_r980481499"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/5040"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/980481499"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Agreed.",
            "commit_id": "068883048bc7f3aa58c5c6a5831c15f4245c9a6a",
            "created_at": "2022-09-26T20:40:53Z",
            "diff_hunk": "@@ -876,14 +876,17 @@ def generate_module_preamble(self, env, options, cimported_modules, metadata, co\n         if has_np_pythran(env):\n             env.use_utility_code(UtilityCode.load_cached(\"PythranConversion\", \"CppSupport.cpp\"))\n \n-    def generate_extern_c_macro_definition(self, code):\n+    def generate_extern_c_macro_definition(self, code, env):\n         name = Naming.extern_c_macro\n         code.putln(\"#ifndef %s\" % name)\n-        code.putln(\"  #ifdef __cplusplus\")\n-        code.putln('    #define %s extern \"C\"' % name)\n-        code.putln(\"  #else\")\n-        code.putln(\"    #define %s extern\" % name)\n-        code.putln(\"  #endif\")\n+        if env.is_cpp():",
            "html_url": "https://github.com/cython/cython/pull/5040#discussion_r980481499",
            "id": 980481499,
            "in_reply_to_id": 979769366,
            "line": null,
            "node_id": "PRRC_kwDOABDGAc46cPXb",
            "original_commit_id": "79f800360b25b8820329627d992b4b777daabdae",
            "original_line": 882,
            "original_position": 31,
            "original_start_line": null,
            "path": "Cython/Compiler/ModuleNode.py",
            "position": null,
            "pull_request_review_id": 1120876486,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/5040",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/pulls/comments/980481499/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2022-09-26T20:40:53Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/980481499",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/111890372?v=4",
                "events_url": "https://api.github.com/users/EpigeneMax/events{/privacy}",
                "followers_url": "https://api.github.com/users/EpigeneMax/followers",
                "following_url": "https://api.github.com/users/EpigeneMax/following{/other_user}",
                "gists_url": "https://api.github.com/users/EpigeneMax/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/EpigeneMax",
                "id": 111890372,
                "login": "EpigeneMax",
                "node_id": "U_kgDOBqtPxA",
                "organizations_url": "https://api.github.com/users/EpigeneMax/orgs",
                "received_events_url": "https://api.github.com/users/EpigeneMax/received_events",
                "repos_url": "https://api.github.com/users/EpigeneMax/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/EpigeneMax/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/EpigeneMax/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/EpigeneMax"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/5040#discussion_r980488492"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/5040"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/980488492"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "The intention is to exclude this test from C++ backend runs.\r\nRunning this test with the C++ backend fails: `.pyx` file is cythonized to C++, and the generated C++ header is included in a `.c` compilation unit, and finally the compiler rightfully rejects the `extern \"C++\"` declaration.\r\n\r\nIf we want to keep it in the C++ backend, then the proper solution would be to redefine the `__PYX_EXTERN_C` macro.\r\n\r\n",
            "commit_id": "068883048bc7f3aa58c5c6a5831c15f4245c9a6a",
            "created_at": "2022-09-26T20:49:01Z",
            "diff_hunk": "@@ -3,6 +3,7 @@\n # The following two lines are for test purposes only, please ignore them.\n # distutils: sources = embedded_main.c\n # tag: py3only\n+# tag: no-cpp",
            "html_url": "https://github.com/cython/cython/pull/5040#discussion_r980488492",
            "id": 980488492,
            "in_reply_to_id": 979786286,
            "line": 6,
            "node_id": "PRRC_kwDOABDGAc46cREs",
            "original_commit_id": "79f800360b25b8820329627d992b4b777daabdae",
            "original_line": 6,
            "original_position": 4,
            "original_start_line": null,
            "path": "docs/examples/tutorial/embedding/embedded.pyx",
            "position": 4,
            "pull_request_review_id": 1120886649,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/5040",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/pulls/comments/980488492/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2022-09-26T20:49:01Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/980488492",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/111890372?v=4",
                "events_url": "https://api.github.com/users/EpigeneMax/events{/privacy}",
                "followers_url": "https://api.github.com/users/EpigeneMax/followers",
                "following_url": "https://api.github.com/users/EpigeneMax/following{/other_user}",
                "gists_url": "https://api.github.com/users/EpigeneMax/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/EpigeneMax",
                "id": 111890372,
                "login": "EpigeneMax",
                "node_id": "U_kgDOBqtPxA",
                "organizations_url": "https://api.github.com/users/EpigeneMax/orgs",
                "received_events_url": "https://api.github.com/users/EpigeneMax/received_events",
                "repos_url": "https://api.github.com/users/EpigeneMax/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/EpigeneMax/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/EpigeneMax/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/EpigeneMax"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/5040#discussion_r980500156"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/5040"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/980500156"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "I am just adjusting existing tests to the new behavior.\r\nWith the old behavior, functions were declared as `extern` in C mode and `extern \"C\"` in C++ mode by Cython, and all declarations within a compilation unit must agree.\r\nWith the new behavior, functions are declared as `extern` in C mode and `extern \"C++\"` in C++ mode by Cython, so these `extern \"C\"` blocks make the compilation fail. ",
            "commit_id": "068883048bc7f3aa58c5c6a5831c15f4245c9a6a",
            "created_at": "2022-09-26T21:01:28Z",
            "diff_hunk": "@@ -1,12 +1,6 @@\n-#ifdef __cplusplus\n-extern \"C\" {\n-#endif",
            "html_url": "https://github.com/cython/cython/pull/5040#discussion_r980500156",
            "id": 980500156,
            "in_reply_to_id": 979788297,
            "line": 3,
            "node_id": "PRRC_kwDOABDGAc46cT68",
            "original_commit_id": "79f800360b25b8820329627d992b4b777daabdae",
            "original_line": 3,
            "original_position": 3,
            "original_start_line": 1,
            "path": "tests/compile/excvalcheck.h",
            "position": 3,
            "pull_request_review_id": 1120903474,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/5040",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/cython/cython/pulls/comments/980500156/reactions"
            },
            "side": "LEFT",
            "start_line": 1,
            "start_side": "LEFT",
            "updated_at": "2022-09-26T21:01:28Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/980500156",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/111890372?v=4",
                "events_url": "https://api.github.com/users/EpigeneMax/events{/privacy}",
                "followers_url": "https://api.github.com/users/EpigeneMax/followers",
                "following_url": "https://api.github.com/users/EpigeneMax/following{/other_user}",
                "gists_url": "https://api.github.com/users/EpigeneMax/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/EpigeneMax",
                "id": 111890372,
                "login": "EpigeneMax",
                "node_id": "U_kgDOBqtPxA",
                "organizations_url": "https://api.github.com/users/EpigeneMax/orgs",
                "received_events_url": "https://api.github.com/users/EpigeneMax/received_events",
                "repos_url": "https://api.github.com/users/EpigeneMax/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/EpigeneMax/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/EpigeneMax/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/EpigeneMax"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/cython/cython/issues/5040/comments",
    "commit_data": [
        {
            "author": {
                "avatar_url": "https://avatars.githubusercontent.com/u/111890372?v=4",
                "events_url": "https://api.github.com/users/EpigeneMax/events{/privacy}",
                "followers_url": "https://api.github.com/users/EpigeneMax/followers",
                "following_url": "https://api.github.com/users/EpigeneMax/following{/other_user}",
                "gists_url": "https://api.github.com/users/EpigeneMax/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/EpigeneMax",
                "id": 111890372,
                "login": "EpigeneMax",
                "node_id": "U_kgDOBqtPxA",
                "organizations_url": "https://api.github.com/users/EpigeneMax/orgs",
                "received_events_url": "https://api.github.com/users/EpigeneMax/received_events",
                "repos_url": "https://api.github.com/users/EpigeneMax/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/EpigeneMax/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/EpigeneMax/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/EpigeneMax"
            },
            "comments_url": "https://api.github.com/repos/cython/cython/commits/a6d20e61a0b49012b5c629c948768081fb30e144/comments",
            "commit": {
                "author": {
                    "date": "2022-09-20T20:15:28Z",
                    "email": "maximilien@epigenelabs.com",
                    "name": "Maximilien Colange"
                },
                "comment_count": 0,
                "committer": {
                    "date": "2022-09-20T21:56:05Z",
                    "email": "maximilien@epigenelabs.com",
                    "name": "Maximilien Colange"
                },
                "message": "add test for linkage of public cdef in C++ mode",
                "tree": {
                    "sha": "deae353de0e18d8371dfd1ecfb0e1487097d178e",
                    "url": "https://api.github.com/repos/cython/cython/git/trees/deae353de0e18d8371dfd1ecfb0e1487097d178e"
                },
                "url": "https://api.github.com/repos/cython/cython/git/commits/a6d20e61a0b49012b5c629c948768081fb30e144",
                "verification": {
                    "payload": null,
                    "reason": "unsigned",
                    "signature": null,
                    "verified": false
                }
            },
            "committer": {
                "avatar_url": "https://avatars.githubusercontent.com/u/111890372?v=4",
                "events_url": "https://api.github.com/users/EpigeneMax/events{/privacy}",
                "followers_url": "https://api.github.com/users/EpigeneMax/followers",
                "following_url": "https://api.github.com/users/EpigeneMax/following{/other_user}",
                "gists_url": "https://api.github.com/users/EpigeneMax/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/EpigeneMax",
                "id": 111890372,
                "login": "EpigeneMax",
                "node_id": "U_kgDOBqtPxA",
                "organizations_url": "https://api.github.com/users/EpigeneMax/orgs",
                "received_events_url": "https://api.github.com/users/EpigeneMax/received_events",
                "repos_url": "https://api.github.com/users/EpigeneMax/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/EpigeneMax/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/EpigeneMax/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/EpigeneMax"
            },
            "html_url": "https://github.com/cython/cython/commit/a6d20e61a0b49012b5c629c948768081fb30e144",
            "node_id": "C_kwDOH-SrYtoAKGE2ZDIwZTYxYTBiNDkwMTJiNWM2MjljOTQ4NzY4MDgxZmIzMGUxNDQ",
            "parents": [
                {
                    "html_url": "https://github.com/cython/cython/commit/fd71114951a9e0d48f0aad324e71d3d9f8be29df",
                    "sha": "fd71114951a9e0d48f0aad324e71d3d9f8be29df",
                    "url": "https://api.github.com/repos/cython/cython/commits/fd71114951a9e0d48f0aad324e71d3d9f8be29df"
                }
            ],
            "sha": "a6d20e61a0b49012b5c629c948768081fb30e144",
            "url": "https://api.github.com/repos/cython/cython/commits/a6d20e61a0b49012b5c629c948768081fb30e144"
        },
        {
            "author": {
                "avatar_url": "https://avatars.githubusercontent.com/u/111890372?v=4",
                "events_url": "https://api.github.com/users/EpigeneMax/events{/privacy}",
                "followers_url": "https://api.github.com/users/EpigeneMax/followers",
                "following_url": "https://api.github.com/users/EpigeneMax/following{/other_user}",
                "gists_url": "https://api.github.com/users/EpigeneMax/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/EpigeneMax",
                "id": 111890372,
                "login": "EpigeneMax",
                "node_id": "U_kgDOBqtPxA",
                "organizations_url": "https://api.github.com/users/EpigeneMax/orgs",
                "received_events_url": "https://api.github.com/users/EpigeneMax/received_events",
                "repos_url": "https://api.github.com/users/EpigeneMax/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/EpigeneMax/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/EpigeneMax/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/EpigeneMax"
            },
            "comments_url": "https://api.github.com/repos/cython/cython/commits/060302f3f061f2f7271ee727c72100ac964aa1be/comments",
            "commit": {
                "author": {
                    "date": "2022-09-20T21:55:25Z",
                    "email": "maximilien@epigenelabs.com",
                    "name": "Maximilien Colange"
                },
                "comment_count": 0,
                "committer": {
                    "date": "2022-09-20T21:57:02Z",
                    "email": "maximilien@epigenelabs.com",
                    "name": "Maximilien Colange"
                },
                "message": "fix linkage of public cdef in C++ mode",
                "tree": {
                    "sha": "e98bf023ffc0ab79a076194df767b8f0e4d7900e",
                    "url": "https://api.github.com/repos/cython/cython/git/trees/e98bf023ffc0ab79a076194df767b8f0e4d7900e"
                },
                "url": "https://api.github.com/repos/cython/cython/git/commits/060302f3f061f2f7271ee727c72100ac964aa1be",
                "verification": {
                    "payload": null,
                    "reason": "unsigned",
                    "signature": null,
                    "verified": false
                }
            },
            "committer": {
                "avatar_url": "https://avatars.githubusercontent.com/u/111890372?v=4",
                "events_url": "https://api.github.com/users/EpigeneMax/events{/privacy}",
                "followers_url": "https://api.github.com/users/EpigeneMax/followers",
                "following_url": "https://api.github.com/users/EpigeneMax/following{/other_user}",
                "gists_url": "https://api.github.com/users/EpigeneMax/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/EpigeneMax",
                "id": 111890372,
                "login": "EpigeneMax",
                "node_id": "U_kgDOBqtPxA",
                "organizations_url": "https://api.github.com/users/EpigeneMax/orgs",
                "received_events_url": "https://api.github.com/users/EpigeneMax/received_events",
                "repos_url": "https://api.github.com/users/EpigeneMax/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/EpigeneMax/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/EpigeneMax/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/EpigeneMax"
            },
            "html_url": "https://github.com/cython/cython/commit/060302f3f061f2f7271ee727c72100ac964aa1be",
            "node_id": "C_kwDOH-SrYtoAKDA2MDMwMmYzZjA2MWYyZjcyNzFlZTcyN2M3MjEwMGFjOTY0YWExYmU",
            "parents": [
                {
                    "html_url": "https://github.com/cython/cython/commit/a6d20e61a0b49012b5c629c948768081fb30e144",
                    "sha": "a6d20e61a0b49012b5c629c948768081fb30e144",
                    "url": "https://api.github.com/repos/cython/cython/commits/a6d20e61a0b49012b5c629c948768081fb30e144"
                }
            ],
            "sha": "060302f3f061f2f7271ee727c72100ac964aa1be",
            "url": "https://api.github.com/repos/cython/cython/commits/060302f3f061f2f7271ee727c72100ac964aa1be"
        },
        {
            "author": {
                "avatar_url": "https://avatars.githubusercontent.com/u/111890372?v=4",
                "events_url": "https://api.github.com/users/EpigeneMax/events{/privacy}",
                "followers_url": "https://api.github.com/users/EpigeneMax/followers",
                "following_url": "https://api.github.com/users/EpigeneMax/following{/other_user}",
                "gists_url": "https://api.github.com/users/EpigeneMax/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/EpigeneMax",
                "id": 111890372,
                "login": "EpigeneMax",
                "node_id": "U_kgDOBqtPxA",
                "organizations_url": "https://api.github.com/users/EpigeneMax/orgs",
                "received_events_url": "https://api.github.com/users/EpigeneMax/received_events",
                "repos_url": "https://api.github.com/users/EpigeneMax/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/EpigeneMax/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/EpigeneMax/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/EpigeneMax"
            },
            "comments_url": "https://api.github.com/repos/cython/cython/commits/af8dbb47205a6eeaebf637dd97d891f4823f2e4a/comments",
            "commit": {
                "author": {
                    "date": "2022-09-21T21:00:52Z",
                    "email": "maximilien@epigenelabs.com",
                    "name": "Maximilien Colange"
                },
                "comment_count": 0,
                "committer": {
                    "date": "2022-09-22T07:46:32Z",
                    "email": "maximilien@epigenelabs.com",
                    "name": "Maximilien Colange"
                },
                "message": "update ticket test",
                "tree": {
                    "sha": "7c091413c217764e6231d1c66002ea5456716741",
                    "url": "https://api.github.com/repos/cython/cython/git/trees/7c091413c217764e6231d1c66002ea5456716741"
                },
                "url": "https://api.github.com/repos/cython/cython/git/commits/af8dbb47205a6eeaebf637dd97d891f4823f2e4a",
                "verification": {
                    "payload": null,
                    "reason": "unsigned",
                    "signature": null,
                    "verified": false
                }
            },
            "committer": {
                "avatar_url": "https://avatars.githubusercontent.com/u/111890372?v=4",
                "events_url": "https://api.github.com/users/EpigeneMax/events{/privacy}",
                "followers_url": "https://api.github.com/users/EpigeneMax/followers",
                "following_url": "https://api.github.com/users/EpigeneMax/following{/other_user}",
                "gists_url": "https://api.github.com/users/EpigeneMax/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/EpigeneMax",
                "id": 111890372,
                "login": "EpigeneMax",
                "node_id": "U_kgDOBqtPxA",
                "organizations_url": "https://api.github.com/users/EpigeneMax/orgs",
                "received_events_url": "https://api.github.com/users/EpigeneMax/received_events",
                "repos_url": "https://api.github.com/users/EpigeneMax/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/EpigeneMax/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/EpigeneMax/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/EpigeneMax"
            },
            "html_url": "https://github.com/cython/cython/commit/af8dbb47205a6eeaebf637dd97d891f4823f2e4a",
            "node_id": "C_kwDOH-SrYtoAKGFmOGRiYjQ3MjA1YTZlZWFlYmY2MzdkZDk3ZDg5MWY0ODIzZjJlNGE",
            "parents": [
                {
                    "html_url": "https://github.com/cython/cython/commit/060302f3f061f2f7271ee727c72100ac964aa1be",
                    "sha": "060302f3f061f2f7271ee727c72100ac964aa1be",
                    "url": "https://api.github.com/repos/cython/cython/commits/060302f3f061f2f7271ee727c72100ac964aa1be"
                }
            ],
            "sha": "af8dbb47205a6eeaebf637dd97d891f4823f2e4a",
            "url": "https://api.github.com/repos/cython/cython/commits/af8dbb47205a6eeaebf637dd97d891f4823f2e4a"
        },
        {
            "author": {
                "avatar_url": "https://avatars.githubusercontent.com/u/111890372?v=4",
                "events_url": "https://api.github.com/users/EpigeneMax/events{/privacy}",
                "followers_url": "https://api.github.com/users/EpigeneMax/followers",
                "following_url": "https://api.github.com/users/EpigeneMax/following{/other_user}",
                "gists_url": "https://api.github.com/users/EpigeneMax/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/EpigeneMax",
                "id": 111890372,
                "login": "EpigeneMax",
                "node_id": "U_kgDOBqtPxA",
                "organizations_url": "https://api.github.com/users/EpigeneMax/orgs",
                "received_events_url": "https://api.github.com/users/EpigeneMax/received_events",
                "repos_url": "https://api.github.com/users/EpigeneMax/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/EpigeneMax/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/EpigeneMax/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/EpigeneMax"
            },
            "comments_url": "https://api.github.com/repos/cython/cython/commits/e44a1e5c79b6ab5a0c8e527cbc7518f25a884b60/comments",
            "commit": {
                "author": {
                    "date": "2022-09-20T22:54:40Z",
                    "email": "maximilien@epigenelabs.com",
                    "name": "Maximilien Colange"
                },
                "comment_count": 0,
                "committer": {
                    "date": "2022-09-22T07:46:32Z",
                    "email": "maximilien@epigenelabs.com",
                    "name": "Maximilien Colange"
                },
                "message": "fix incorrect linkage declarations in existing tests",
                "tree": {
                    "sha": "531af9243e95e624adf4c4f33f184d2636fb5d09",
                    "url": "https://api.github.com/repos/cython/cython/git/trees/531af9243e95e624adf4c4f33f184d2636fb5d09"
                },
                "url": "https://api.github.com/repos/cython/cython/git/commits/e44a1e5c79b6ab5a0c8e527cbc7518f25a884b60",
                "verification": {
                    "payload": null,
                    "reason": "unsigned",
                    "signature": null,
                    "verified": false
                }
            },
            "committer": {
                "avatar_url": "https://avatars.githubusercontent.com/u/111890372?v=4",
                "events_url": "https://api.github.com/users/EpigeneMax/events{/privacy}",
                "followers_url": "https://api.github.com/users/EpigeneMax/followers",
                "following_url": "https://api.github.com/users/EpigeneMax/following{/other_user}",
                "gists_url": "https://api.github.com/users/EpigeneMax/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/EpigeneMax",
                "id": 111890372,
                "login": "EpigeneMax",
                "node_id": "U_kgDOBqtPxA",
                "organizations_url": "https://api.github.com/users/EpigeneMax/orgs",
                "received_events_url": "https://api.github.com/users/EpigeneMax/received_events",
                "repos_url": "https://api.github.com/users/EpigeneMax/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/EpigeneMax/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/EpigeneMax/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/EpigeneMax"
            },
            "html_url": "https://github.com/cython/cython/commit/e44a1e5c79b6ab5a0c8e527cbc7518f25a884b60",
            "node_id": "C_kwDOH-SrYtoAKGU0NGExZTVjNzliNmFiNWEwYzhlNTI3Y2JjNzUxOGYyNWE4ODRiNjA",
            "parents": [
                {
                    "html_url": "https://github.com/cython/cython/commit/af8dbb47205a6eeaebf637dd97d891f4823f2e4a",
                    "sha": "af8dbb47205a6eeaebf637dd97d891f4823f2e4a",
                    "url": "https://api.github.com/repos/cython/cython/commits/af8dbb47205a6eeaebf637dd97d891f4823f2e4a"
                }
            ],
            "sha": "e44a1e5c79b6ab5a0c8e527cbc7518f25a884b60",
            "url": "https://api.github.com/repos/cython/cython/commits/e44a1e5c79b6ab5a0c8e527cbc7518f25a884b60"
        },
        {
            "author": {
                "avatar_url": "https://avatars.githubusercontent.com/u/111890372?v=4",
                "events_url": "https://api.github.com/users/EpigeneMax/events{/privacy}",
                "followers_url": "https://api.github.com/users/EpigeneMax/followers",
                "following_url": "https://api.github.com/users/EpigeneMax/following{/other_user}",
                "gists_url": "https://api.github.com/users/EpigeneMax/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/EpigeneMax",
                "id": 111890372,
                "login": "EpigeneMax",
                "node_id": "U_kgDOBqtPxA",
                "organizations_url": "https://api.github.com/users/EpigeneMax/orgs",
                "received_events_url": "https://api.github.com/users/EpigeneMax/received_events",
                "repos_url": "https://api.github.com/users/EpigeneMax/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/EpigeneMax/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/EpigeneMax/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/EpigeneMax"
            },
            "comments_url": "https://api.github.com/repos/cython/cython/commits/79f800360b25b8820329627d992b4b777daabdae/comments",
            "commit": {
                "author": {
                    "date": "2022-09-25T20:41:21Z",
                    "email": "maximilien@epigenelabs.com",
                    "name": "Maximilien Colange"
                },
                "comment_count": 0,
                "committer": {
                    "date": "2022-09-25T20:41:21Z",
                    "email": "maximilien@epigenelabs.com",
                    "name": "Maximilien Colange"
                },
                "message": "add a clarification comment to test",
                "tree": {
                    "sha": "4cb69db5d1e84246ff991216b2bc73a32d39e459",
                    "url": "https://api.github.com/repos/cython/cython/git/trees/4cb69db5d1e84246ff991216b2bc73a32d39e459"
                },
                "url": "https://api.github.com/repos/cython/cython/git/commits/79f800360b25b8820329627d992b4b777daabdae",
                "verification": {
                    "payload": null,
                    "reason": "unsigned",
                    "signature": null,
                    "verified": false
                }
            },
            "committer": {
                "avatar_url": "https://avatars.githubusercontent.com/u/111890372?v=4",
                "events_url": "https://api.github.com/users/EpigeneMax/events{/privacy}",
                "followers_url": "https://api.github.com/users/EpigeneMax/followers",
                "following_url": "https://api.github.com/users/EpigeneMax/following{/other_user}",
                "gists_url": "https://api.github.com/users/EpigeneMax/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/EpigeneMax",
                "id": 111890372,
                "login": "EpigeneMax",
                "node_id": "U_kgDOBqtPxA",
                "organizations_url": "https://api.github.com/users/EpigeneMax/orgs",
                "received_events_url": "https://api.github.com/users/EpigeneMax/received_events",
                "repos_url": "https://api.github.com/users/EpigeneMax/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/EpigeneMax/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/EpigeneMax/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/EpigeneMax"
            },
            "html_url": "https://github.com/cython/cython/commit/79f800360b25b8820329627d992b4b777daabdae",
            "node_id": "C_kwDOH-SrYtoAKDc5ZjgwMDM2MGIyNWI4ODIwMzI5NjI3ZDk5MmI0Yjc3N2RhYWJkYWU",
            "parents": [
                {
                    "html_url": "https://github.com/cython/cython/commit/e44a1e5c79b6ab5a0c8e527cbc7518f25a884b60",
                    "sha": "e44a1e5c79b6ab5a0c8e527cbc7518f25a884b60",
                    "url": "https://api.github.com/repos/cython/cython/commits/e44a1e5c79b6ab5a0c8e527cbc7518f25a884b60"
                }
            ],
            "sha": "79f800360b25b8820329627d992b4b777daabdae",
            "url": "https://api.github.com/repos/cython/cython/commits/79f800360b25b8820329627d992b4b777daabdae"
        },
        {
            "author": {
                "avatar_url": "https://avatars.githubusercontent.com/u/111890372?v=4",
                "events_url": "https://api.github.com/users/EpigeneMax/events{/privacy}",
                "followers_url": "https://api.github.com/users/EpigeneMax/followers",
                "following_url": "https://api.github.com/users/EpigeneMax/following{/other_user}",
                "gists_url": "https://api.github.com/users/EpigeneMax/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/EpigeneMax",
                "id": 111890372,
                "login": "EpigeneMax",
                "node_id": "U_kgDOBqtPxA",
                "organizations_url": "https://api.github.com/users/EpigeneMax/orgs",
                "received_events_url": "https://api.github.com/users/EpigeneMax/received_events",
                "repos_url": "https://api.github.com/users/EpigeneMax/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/EpigeneMax/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/EpigeneMax/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/EpigeneMax"
            },
            "comments_url": "https://api.github.com/repos/cython/cython/commits/068883048bc7f3aa58c5c6a5831c15f4245c9a6a/comments",
            "commit": {
                "author": {
                    "date": "2022-09-26T21:05:45Z",
                    "email": "maximilien@epigenelabs.com",
                    "name": "Maximilien Colange"
                },
                "comment_count": 0,
                "committer": {
                    "date": "2022-09-26T21:06:47Z",
                    "email": "maximilien@epigenelabs.com",
                    "name": "Maximilien Colange"
                },
                "message": "do not pass entire env to generate_extern_c_macro_definition",
                "tree": {
                    "sha": "82ac54e50636c242be7405b722a63e37fa3b70af",
                    "url": "https://api.github.com/repos/cython/cython/git/trees/82ac54e50636c242be7405b722a63e37fa3b70af"
                },
                "url": "https://api.github.com/repos/cython/cython/git/commits/068883048bc7f3aa58c5c6a5831c15f4245c9a6a",
                "verification": {
                    "payload": null,
                    "reason": "unsigned",
                    "signature": null,
                    "verified": false
                }
            },
            "committer": {
                "avatar_url": "https://avatars.githubusercontent.com/u/111890372?v=4",
                "events_url": "https://api.github.com/users/EpigeneMax/events{/privacy}",
                "followers_url": "https://api.github.com/users/EpigeneMax/followers",
                "following_url": "https://api.github.com/users/EpigeneMax/following{/other_user}",
                "gists_url": "https://api.github.com/users/EpigeneMax/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/EpigeneMax",
                "id": 111890372,
                "login": "EpigeneMax",
                "node_id": "U_kgDOBqtPxA",
                "organizations_url": "https://api.github.com/users/EpigeneMax/orgs",
                "received_events_url": "https://api.github.com/users/EpigeneMax/received_events",
                "repos_url": "https://api.github.com/users/EpigeneMax/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/EpigeneMax/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/EpigeneMax/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/EpigeneMax"
            },
            "html_url": "https://github.com/cython/cython/commit/068883048bc7f3aa58c5c6a5831c15f4245c9a6a",
            "node_id": "C_kwDOH-SrYtoAKDA2ODg4MzA0OGJjN2YzYWE1OGM1YzZhNTgzMWMxNWY0MjQ1YzlhNmE",
            "parents": [
                {
                    "html_url": "https://github.com/cython/cython/commit/79f800360b25b8820329627d992b4b777daabdae",
                    "sha": "79f800360b25b8820329627d992b4b777daabdae",
                    "url": "https://api.github.com/repos/cython/cython/commits/79f800360b25b8820329627d992b4b777daabdae"
                }
            ],
            "sha": "068883048bc7f3aa58c5c6a5831c15f4245c9a6a",
            "url": "https://api.github.com/repos/cython/cython/commits/068883048bc7f3aa58c5c6a5831c15f4245c9a6a"
        }
    ],
    "commits_url": "https://api.github.com/repos/cython/cython/pulls/5040/commits",
    "created_at": "2022-09-20T22:12:58Z",
    "diff_url": "https://github.com/cython/cython/pull/5040.diff",
    "draft": false,
    "head": {
        "label": "EpigeneMax:ticket1839",
        "ref": "ticket1839",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/EpigeneMax/cython/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/EpigeneMax/cython/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/EpigeneMax/cython/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/EpigeneMax/cython/branches{/branch}",
            "clone_url": "https://github.com/EpigeneMax/cython.git",
            "collaborators_url": "https://api.github.com/repos/EpigeneMax/cython/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/EpigeneMax/cython/comments{/number}",
            "commits_url": "https://api.github.com/repos/EpigeneMax/cython/commits{/sha}",
            "compare_url": "https://api.github.com/repos/EpigeneMax/cython/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/EpigeneMax/cython/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/EpigeneMax/cython/contributors",
            "created_at": "2022-09-10T18:08:44Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/EpigeneMax/cython/deployments",
            "description": "The most widely used Python to C compiler",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/EpigeneMax/cython/downloads",
            "events_url": "https://api.github.com/repos/EpigeneMax/cython/events",
            "fork": true,
            "forks": 0,
            "forks_count": 0,
            "forks_url": "https://api.github.com/repos/EpigeneMax/cython/forks",
            "full_name": "EpigeneMax/cython",
            "git_commits_url": "https://api.github.com/repos/EpigeneMax/cython/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/EpigeneMax/cython/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/EpigeneMax/cython/git/tags{/sha}",
            "git_url": "git://github.com/EpigeneMax/cython.git",
            "has_discussions": false,
            "has_downloads": true,
            "has_issues": false,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://cython.org",
            "hooks_url": "https://api.github.com/repos/EpigeneMax/cython/hooks",
            "html_url": "https://github.com/EpigeneMax/cython",
            "id": 535079778,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/EpigeneMax/cython/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/EpigeneMax/cython/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/EpigeneMax/cython/issues{/number}",
            "keys_url": "https://api.github.com/repos/EpigeneMax/cython/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/EpigeneMax/cython/labels{/name}",
            "language": "Python",
            "languages_url": "https://api.github.com/repos/EpigeneMax/cython/languages",
            "license": {
                "key": "apache-2.0",
                "name": "Apache License 2.0",
                "node_id": "MDc6TGljZW5zZTI=",
                "spdx_id": "Apache-2.0",
                "url": "https://api.github.com/licenses/apache-2.0"
            },
            "merges_url": "https://api.github.com/repos/EpigeneMax/cython/merges",
            "milestones_url": "https://api.github.com/repos/EpigeneMax/cython/milestones{/number}",
            "mirror_url": null,
            "name": "cython",
            "node_id": "R_kgDOH-SrYg",
            "notifications_url": "https://api.github.com/repos/EpigeneMax/cython/notifications{?since,all,participating}",
            "open_issues": 0,
            "open_issues_count": 0,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/111890372?v=4",
                "events_url": "https://api.github.com/users/EpigeneMax/events{/privacy}",
                "followers_url": "https://api.github.com/users/EpigeneMax/followers",
                "following_url": "https://api.github.com/users/EpigeneMax/following{/other_user}",
                "gists_url": "https://api.github.com/users/EpigeneMax/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/EpigeneMax",
                "id": 111890372,
                "login": "EpigeneMax",
                "node_id": "U_kgDOBqtPxA",
                "organizations_url": "https://api.github.com/users/EpigeneMax/orgs",
                "received_events_url": "https://api.github.com/users/EpigeneMax/received_events",
                "repos_url": "https://api.github.com/users/EpigeneMax/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/EpigeneMax/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/EpigeneMax/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/EpigeneMax"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/EpigeneMax/cython/pulls{/number}",
            "pushed_at": "2022-09-26T21:06:59Z",
            "releases_url": "https://api.github.com/repos/EpigeneMax/cython/releases{/id}",
            "size": 62410,
            "ssh_url": "git@github.com:EpigeneMax/cython.git",
            "stargazers_count": 0,
            "stargazers_url": "https://api.github.com/repos/EpigeneMax/cython/stargazers",
            "statuses_url": "https://api.github.com/repos/EpigeneMax/cython/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/EpigeneMax/cython/subscribers",
            "subscription_url": "https://api.github.com/repos/EpigeneMax/cython/subscription",
            "svn_url": "https://github.com/EpigeneMax/cython",
            "tags_url": "https://api.github.com/repos/EpigeneMax/cython/tags",
            "teams_url": "https://api.github.com/repos/EpigeneMax/cython/teams",
            "topics": [],
            "trees_url": "https://api.github.com/repos/EpigeneMax/cython/git/trees{/sha}",
            "updated_at": "2022-09-12T20:58:02Z",
            "url": "https://api.github.com/repos/EpigeneMax/cython",
            "visibility": "public",
            "watchers": 0,
            "watchers_count": 0,
            "web_commit_signoff_required": false
        },
        "sha": "068883048bc7f3aa58c5c6a5831c15f4245c9a6a",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/111890372?v=4",
            "events_url": "https://api.github.com/users/EpigeneMax/events{/privacy}",
            "followers_url": "https://api.github.com/users/EpigeneMax/followers",
            "following_url": "https://api.github.com/users/EpigeneMax/following{/other_user}",
            "gists_url": "https://api.github.com/users/EpigeneMax/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/EpigeneMax",
            "id": 111890372,
            "login": "EpigeneMax",
            "node_id": "U_kgDOBqtPxA",
            "organizations_url": "https://api.github.com/users/EpigeneMax/orgs",
            "received_events_url": "https://api.github.com/users/EpigeneMax/received_events",
            "repos_url": "https://api.github.com/users/EpigeneMax/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/EpigeneMax/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/EpigeneMax/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/EpigeneMax"
        }
    },
    "html_url": "https://github.com/cython/cython/pull/5040",
    "id": 1062129746,
    "issue_url": "https://api.github.com/repos/cython/cython/issues/5040",
    "labels": [
        {
            "color": "f9d0c4",
            "default": false,
            "description": null,
            "id": 414805136,
            "name": "C++",
            "node_id": "MDU6TGFiZWw0MTQ4MDUxMzY=",
            "url": "https://api.github.com/repos/cython/cython/labels/C++"
        },
        {
            "color": "444444",
            "default": false,
            "description": null,
            "id": 425556330,
            "name": "Code Generation",
            "node_id": "MDU6TGFiZWw0MjU1NTYzMzA=",
            "url": "https://api.github.com/repos/cython/cython/labels/Code%20Generation"
        }
    ],
    "locked": false,
    "merge_commit_sha": "2d40828375f2a25a4b931e582bf0ad5161926e42",
    "merged_at": "2022-11-08T21:30:07Z",
    "milestone": {
        "closed_at": null,
        "closed_issues": 738,
        "created_at": "2018-08-18T06:33:08Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/491659?v=4",
            "events_url": "https://api.github.com/users/scoder/events{/privacy}",
            "followers_url": "https://api.github.com/users/scoder/followers",
            "following_url": "https://api.github.com/users/scoder/following{/other_user}",
            "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/scoder",
            "id": 491659,
            "login": "scoder",
            "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
            "organizations_url": "https://api.github.com/users/scoder/orgs",
            "received_events_url": "https://api.github.com/users/scoder/received_events",
            "repos_url": "https://api.github.com/users/scoder/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/scoder"
        },
        "description": "Goals:\r\n– New version scheme: 3.x instead of 0.x.\r\n– Change default `language_level` from `2` to `3str`.\r\n– Change default for `binding` directive from `False` to `True`.\r\n– Fix some Python compatibility issues (if possible, allowing for breaking changes).\r\n",
        "due_on": null,
        "html_url": "https://github.com/cython/cython/milestone/58",
        "id": 3580387,
        "labels_url": "https://api.github.com/repos/cython/cython/milestones/58/labels",
        "node_id": "MDk6TWlsZXN0b25lMzU4MDM4Nw==",
        "number": 58,
        "open_issues": 40,
        "state": "open",
        "title": "3.0",
        "updated_at": "2022-11-08T21:35:59Z",
        "url": "https://api.github.com/repos/cython/cython/milestones/58"
    },
    "node_id": "PR_kwDOABDGAc4_TtBS",
    "number": 5040,
    "patch_url": "https://github.com/cython/cython/pull/5040.patch",
    "requested_reviewers": [],
    "requested_teams": [],
    "review_comment_url": "https://api.github.com/repos/cython/cython/pulls/comments{/number}",
    "review_comments_url": "https://api.github.com/repos/cython/cython/pulls/5040/comments",
    "state": "closed",
    "statuses_url": "https://api.github.com/repos/cython/cython/statuses/068883048bc7f3aa58c5c6a5831c15f4245c9a6a",
    "title": "Fix linkage for `cdef public` functions in C++ mode",
    "updated_at": "2022-11-08T21:30:20Z",
    "url": "https://api.github.com/repos/cython/cython/pulls/5040",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/111890372?v=4",
        "events_url": "https://api.github.com/users/EpigeneMax/events{/privacy}",
        "followers_url": "https://api.github.com/users/EpigeneMax/followers",
        "following_url": "https://api.github.com/users/EpigeneMax/following{/other_user}",
        "gists_url": "https://api.github.com/users/EpigeneMax/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/EpigeneMax",
        "id": 111890372,
        "login": "EpigeneMax",
        "node_id": "U_kgDOBqtPxA",
        "organizations_url": "https://api.github.com/users/EpigeneMax/orgs",
        "received_events_url": "https://api.github.com/users/EpigeneMax/received_events",
        "repos_url": "https://api.github.com/users/EpigeneMax/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/EpigeneMax/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/EpigeneMax/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/EpigeneMax"
    }
}