{
    "_links": {
        "comments": {
            "href": "https://api.github.com/repos/cython/cython/issues/3518/comments"
        },
        "commits": {
            "href": "https://api.github.com/repos/cython/cython/pulls/3518/commits"
        },
        "html": {
            "href": "https://github.com/cython/cython/pull/3518"
        },
        "issue": {
            "href": "https://api.github.com/repos/cython/cython/issues/3518"
        },
        "review_comment": {
            "href": "https://api.github.com/repos/cython/cython/pulls/comments{/number}"
        },
        "review_comments": {
            "href": "https://api.github.com/repos/cython/cython/pulls/3518/comments"
        },
        "self": {
            "href": "https://api.github.com/repos/cython/cython/pulls/3518"
        },
        "statuses": {
            "href": "https://api.github.com/repos/cython/cython/statuses/1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f"
        }
    },
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "base": {
        "label": "cython:master",
        "ref": "master",
        "repo": {
            "archive_url": "https://api.github.com/repos/cython/cython/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/cython/cython/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/cython/cython/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/cython/cython/branches{/branch}",
            "clone_url": "https://github.com/cython/cython.git",
            "collaborators_url": "https://api.github.com/repos/cython/cython/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/cython/cython/comments{/number}",
            "commits_url": "https://api.github.com/repos/cython/cython/commits{/sha}",
            "compare_url": "https://api.github.com/repos/cython/cython/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/cython/cython/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/cython/cython/contributors",
            "created_at": "2010-11-21T07:44:20Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/cython/cython/deployments",
            "description": "The most widely used Python to C compiler",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/cython/cython/downloads",
            "events_url": "https://api.github.com/repos/cython/cython/events",
            "fork": false,
            "forks": 1002,
            "forks_count": 1002,
            "forks_url": "https://api.github.com/repos/cython/cython/forks",
            "full_name": "cython/cython",
            "git_commits_url": "https://api.github.com/repos/cython/cython/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/cython/cython/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/cython/cython/git/tags{/sha}",
            "git_url": "git://github.com/cython/cython.git",
            "has_downloads": true,
            "has_issues": true,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://cython.org",
            "hooks_url": "https://api.github.com/repos/cython/cython/hooks",
            "html_url": "https://github.com/cython/cython",
            "id": 1099265,
            "issue_comment_url": "https://api.github.com/repos/cython/cython/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/cython/cython/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/cython/cython/issues{/number}",
            "keys_url": "https://api.github.com/repos/cython/cython/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/cython/cython/labels{/name}",
            "language": "Python",
            "languages_url": "https://api.github.com/repos/cython/cython/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/cython/cython/merges",
            "milestones_url": "https://api.github.com/repos/cython/cython/milestones{/number}",
            "mirror_url": null,
            "name": "cython",
            "node_id": "MDEwOlJlcG9zaXRvcnkxMDk5MjY1",
            "notifications_url": "https://api.github.com/repos/cython/cython/notifications{?since,all,participating}",
            "open_issues": 816,
            "open_issues_count": 816,
            "owner": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/486082?v=4",
                "events_url": "https://api.github.com/users/cython/events{/privacy}",
                "followers_url": "https://api.github.com/users/cython/followers",
                "following_url": "https://api.github.com/users/cython/following{/other_user}",
                "gists_url": "https://api.github.com/users/cython/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cython",
                "id": 486082,
                "login": "cython",
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ4NjA4Mg==",
                "organizations_url": "https://api.github.com/users/cython/orgs",
                "received_events_url": "https://api.github.com/users/cython/received_events",
                "repos_url": "https://api.github.com/users/cython/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cython/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cython/subscriptions",
                "type": "Organization",
                "url": "https://api.github.com/users/cython"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/cython/cython/pulls{/number}",
            "pushed_at": "2020-04-20T12:13:34Z",
            "releases_url": "https://api.github.com/repos/cython/cython/releases{/id}",
            "size": 57279,
            "ssh_url": "git@github.com:cython/cython.git",
            "stargazers_count": 5082,
            "stargazers_url": "https://api.github.com/repos/cython/cython/stargazers",
            "statuses_url": "https://api.github.com/repos/cython/cython/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/cython/cython/subscribers",
            "subscription_url": "https://api.github.com/repos/cython/cython/subscription",
            "svn_url": "https://github.com/cython/cython",
            "tags_url": "https://api.github.com/repos/cython/cython/tags",
            "teams_url": "https://api.github.com/repos/cython/cython/teams",
            "trees_url": "https://api.github.com/repos/cython/cython/git/trees{/sha}",
            "updated_at": "2020-04-20T12:13:37Z",
            "url": "https://api.github.com/repos/cython/cython",
            "watchers": 5082,
            "watchers_count": 5082
        },
        "sha": "b692adc13c560551e3ea87e0c0d01bc983248893",
        "user": {
            "avatar_url": "https://avatars3.githubusercontent.com/u/486082?v=4",
            "events_url": "https://api.github.com/users/cython/events{/privacy}",
            "followers_url": "https://api.github.com/users/cython/followers",
            "following_url": "https://api.github.com/users/cython/following{/other_user}",
            "gists_url": "https://api.github.com/users/cython/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/cython",
            "id": 486082,
            "login": "cython",
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ4NjA4Mg==",
            "organizations_url": "https://api.github.com/users/cython/orgs",
            "received_events_url": "https://api.github.com/users/cython/received_events",
            "repos_url": "https://api.github.com/users/cython/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/cython/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/cython/subscriptions",
            "type": "Organization",
            "url": "https://api.github.com/users/cython"
        }
    },
    "body": "To address https://github.com/cython/cython/issues/2753\r\n\r\nTODO: Write tests",
    "closed_at": "2020-04-20T07:06:10Z",
    "comment_data": [
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r408626074"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/408626074"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "I think the issue with this is that `PyObject_GetItem` ends up repeating everything you've just done, so therefore this path is unnecessarily slow.\r\n\r\nThe original issue [linked to the commit that added this feature in CPython](https://github.com/python/cpython/pull/4732/files#diff-fa8da9109fa9e26d43de374c663544fe) so it'd be easy enough to take the code from there.",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-15T07:10:03Z",
            "diff_hunk": "@@ -309,7 +304,13 @@ static PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* key) {\n     if (likely(m && m->mp_subscript)) {\n         return m->mp_subscript(obj, key);\n     }\n-    return __Pyx_PyObject_GetIndex(obj, key);\n+    PySequenceMethods *sm = Py_TYPE(obj)->tp_as_sequence;\n+    if (likely(sm && sm->sq_item)) {\n+        return __Pyx_PyObject_GetIndex(obj, key);\n+    }\n+\n+    // Fall back on CPython's GetItem for non-mappings, non-sequences.\n+    return PyObject_GetItem(obj, key);",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r408626074",
            "id": 408626074,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODYyNjA3NA==",
            "original_commit_id": "3a61c02cb770e33272d19bbcc2963a5d905314c3",
            "original_line": 313,
            "original_position": 23,
            "original_start_line": null,
            "path": "Cython/Utility/ObjectHandling.c",
            "position": null,
            "pull_request_review_id": 393508366,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/408626074",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r408629211"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/408629211"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "This change now means the function won't fail (but may crash), even if the sequence isn't subscriptable, since the check is elsewhere. I think this method is only used from `__Pyx_PyObject_GetItem` so it shouldn't break anything. But maybe it atleast requires a comment saying \"obj MUST have tp_as_sequence\" ?",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-15T07:16:28Z",
            "diff_hunk": "@@ -285,11 +285,6 @@ static CYTHON_INLINE PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* k\n static PyObject *__Pyx_PyObject_GetIndex(PyObject *obj, PyObject* index) {\n     PyObject *runerr;\n     Py_ssize_t key_value;\n-    PySequenceMethods *m = Py_TYPE(obj)->tp_as_sequence;\n-    if (unlikely(!(m && m->sq_item))) {\n-        PyErr_Format(PyExc_TypeError, \"'%.200s' object is not subscriptable\", Py_TYPE(obj)->tp_name);\n-        return NULL;\n-    }",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r408629211",
            "id": 408629211,
            "line": 292,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODYyOTIxMQ==",
            "original_commit_id": "3a61c02cb770e33272d19bbcc2963a5d905314c3",
            "original_line": 292,
            "original_position": 8,
            "original_start_line": null,
            "path": "Cython/Utility/ObjectHandling.c",
            "position": 25,
            "pull_request_review_id": 393508366,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "LEFT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/408629211",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r408650020"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/408650020"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Yes it seems better to just duplicate the logic in CPython's GetItem to deal with this. I'll update to do this.\r\n\r\nOne thing I'm unsure about in general is why cython duplicates the implementations of these functions. Are there optimizations that cython is making that can't be implemented within CPython? Do I need to take any of this into account when adapting the implementation from CPython?",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-15T07:54:41Z",
            "diff_hunk": "@@ -309,7 +304,13 @@ static PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* key) {\n     if (likely(m && m->mp_subscript)) {\n         return m->mp_subscript(obj, key);\n     }\n-    return __Pyx_PyObject_GetIndex(obj, key);\n+    PySequenceMethods *sm = Py_TYPE(obj)->tp_as_sequence;\n+    if (likely(sm && sm->sq_item)) {\n+        return __Pyx_PyObject_GetIndex(obj, key);\n+    }\n+\n+    // Fall back on CPython's GetItem for non-mappings, non-sequences.\n+    return PyObject_GetItem(obj, key);",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r408650020",
            "id": 408650020,
            "in_reply_to_id": 408626074,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY1MDAyMA==",
            "original_commit_id": "3a61c02cb770e33272d19bbcc2963a5d905314c3",
            "original_line": 313,
            "original_position": 23,
            "original_start_line": null,
            "path": "Cython/Utility/ObjectHandling.c",
            "position": null,
            "pull_request_review_id": 393537011,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/408650020",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/771072?v=4",
                "events_url": "https://api.github.com/users/msg555/events{/privacy}",
                "followers_url": "https://api.github.com/users/msg555/followers",
                "following_url": "https://api.github.com/users/msg555/following{/other_user}",
                "gists_url": "https://api.github.com/users/msg555/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/msg555",
                "id": 771072,
                "login": "msg555",
                "node_id": "MDQ6VXNlcjc3MTA3Mg==",
                "organizations_url": "https://api.github.com/users/msg555/orgs",
                "received_events_url": "https://api.github.com/users/msg555/received_events",
                "repos_url": "https://api.github.com/users/msg555/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/msg555/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/msg555/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/msg555"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r408658328"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/408658328"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "I didn't write the original code so I'm not 100% sure sure. I think there's two potential speedups I can see:\r\n\r\n1. No `NULL` check at the start of the function (which I think is helped because Cython has a pretty good idea of what can be NULL or not)\r\n2. Special-case for tuple in `__Pyx_GetItemInt_Fast`.\r\n\r\nI'm not 100% sure what you need to account for though.",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-15T08:09:26Z",
            "diff_hunk": "@@ -309,7 +304,13 @@ static PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* key) {\n     if (likely(m && m->mp_subscript)) {\n         return m->mp_subscript(obj, key);\n     }\n-    return __Pyx_PyObject_GetIndex(obj, key);\n+    PySequenceMethods *sm = Py_TYPE(obj)->tp_as_sequence;\n+    if (likely(sm && sm->sq_item)) {\n+        return __Pyx_PyObject_GetIndex(obj, key);\n+    }\n+\n+    // Fall back on CPython's GetItem for non-mappings, non-sequences.\n+    return PyObject_GetItem(obj, key);",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r408658328",
            "id": 408658328,
            "in_reply_to_id": 408626074,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY1ODMyOA==",
            "original_commit_id": "3a61c02cb770e33272d19bbcc2963a5d905314c3",
            "original_line": 313,
            "original_position": 23,
            "original_start_line": null,
            "path": "Cython/Utility/ObjectHandling.c",
            "position": null,
            "pull_request_review_id": 393547393,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/408658328",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r408660426"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/408660426"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "This comment actually looks like it isn't true. It looks like `__Pyx_GetItemInt_Fast` actually handles non-`tp_as_sequence` cases, and even a generic fallback `PyObject_GetItem` in `__Pyx_GetItemInt_Generic` at the end. Presumably the check for `tp_as_sequence` allows the compile to identify that only one code-path is ever used and inline only the relevant bits. So it may be necessary to produce optimized code, but probably doesn't crash.",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-15T08:13:21Z",
            "diff_hunk": "@@ -285,11 +285,6 @@ static CYTHON_INLINE PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* k\n static PyObject *__Pyx_PyObject_GetIndex(PyObject *obj, PyObject* index) {\n     PyObject *runerr;\n     Py_ssize_t key_value;\n-    PySequenceMethods *m = Py_TYPE(obj)->tp_as_sequence;\n-    if (unlikely(!(m && m->sq_item))) {\n-        PyErr_Format(PyExc_TypeError, \"'%.200s' object is not subscriptable\", Py_TYPE(obj)->tp_name);\n-        return NULL;\n-    }",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r408660426",
            "id": 408660426,
            "in_reply_to_id": 408629211,
            "line": 292,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY2MDQyNg==",
            "original_commit_id": "3a61c02cb770e33272d19bbcc2963a5d905314c3",
            "original_line": 292,
            "original_position": 8,
            "original_start_line": null,
            "path": "Cython/Utility/ObjectHandling.c",
            "position": 25,
            "pull_request_review_id": 393547393,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "LEFT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/408660426",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r408741044"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/408741044"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Alright, thanks so much for the help.\r\n\r\nUpdated the PR to pull in the implementation from CPython 3.7. It also looks like the PR is going to be a bit more complicated than I first thought as it seems we need to add support for implicit classmethods (correct me if I'm wrong here).\r\n\r\nI probably need to add some logic around the python version as well when deciding what should be considered an implicit classmethod for total correctness here.\r\n\r\nAdditionally it looks like there's going to be needed some fixes to the mro logic to be fully compliant with PEP 560. Haven't looked totally at what's going to be required but the included test from CPython still has 7 failing mro-related tests.",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-15T10:29:28Z",
            "diff_hunk": "@@ -309,7 +304,13 @@ static PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* key) {\n     if (likely(m && m->mp_subscript)) {\n         return m->mp_subscript(obj, key);\n     }\n-    return __Pyx_PyObject_GetIndex(obj, key);\n+    PySequenceMethods *sm = Py_TYPE(obj)->tp_as_sequence;\n+    if (likely(sm && sm->sq_item)) {\n+        return __Pyx_PyObject_GetIndex(obj, key);\n+    }\n+\n+    // Fall back on CPython's GetItem for non-mappings, non-sequences.\n+    return PyObject_GetItem(obj, key);",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r408741044",
            "id": 408741044,
            "in_reply_to_id": 408626074,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODc0MTA0NA==",
            "original_commit_id": "3a61c02cb770e33272d19bbcc2963a5d905314c3",
            "original_line": 313,
            "original_position": 23,
            "original_start_line": null,
            "path": "Cython/Utility/ObjectHandling.c",
            "position": null,
            "pull_request_review_id": 393649310,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/408741044",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/771072?v=4",
                "events_url": "https://api.github.com/users/msg555/events{/privacy}",
                "followers_url": "https://api.github.com/users/msg555/followers",
                "following_url": "https://api.github.com/users/msg555/following{/other_user}",
                "gists_url": "https://api.github.com/users/msg555/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/msg555",
                "id": 771072,
                "login": "msg555",
                "node_id": "MDQ6VXNlcjc3MTA3Mg==",
                "organizations_url": "https://api.github.com/users/msg555/orgs",
                "received_events_url": "https://api.github.com/users/msg555/received_events",
                "repos_url": "https://api.github.com/users/msg555/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/msg555/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/msg555/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/msg555"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r408742152"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/408742152"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "How should I signal this test should only run for Python >= 3.7? Should I just add logic to the tests to skip based on the runtime python version?",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-15T10:31:35Z",
            "diff_hunk": "@@ -0,0 +1,288 @@\n+### COPIED FROM CPython 3.7\n+# cython: language_level=3",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r408742152",
            "id": 408742152,
            "line": 3,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODc0MjE1Mg==",
            "original_commit_id": "5c194be5c535c12231fa48b3cb60ef4eda90d35f",
            "original_line": 3,
            "original_position": 2,
            "original_start_line": null,
            "path": "tests/run/test_genericclass.py",
            "position": 3,
            "pull_request_review_id": 393650668,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/408742152",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/771072?v=4",
                "events_url": "https://api.github.com/users/msg555/events{/privacy}",
                "followers_url": "https://api.github.com/users/msg555/followers",
                "following_url": "https://api.github.com/users/msg555/following{/other_user}",
                "gists_url": "https://api.github.com/users/msg555/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/msg555",
                "id": 771072,
                "login": "msg555",
                "node_id": "MDQ6VXNlcjc3MTA3Mg==",
                "organizations_url": "https://api.github.com/users/msg555/orgs",
                "received_events_url": "https://api.github.com/users/msg555/received_events",
                "repos_url": "https://api.github.com/users/msg555/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/msg555/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/msg555/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/msg555"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r408742926"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/408742926"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Need to double check whether this should be added to the front or back of decorators",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-15T10:33:06Z",
            "diff_hunk": "@@ -2883,7 +2883,12 @@ def analyse_declarations(self, env):\n             self.is_staticmethod = False\n \n         if self.name == '__new__' and env.is_py_class_scope:\n-            self.is_staticmethod = 1\n+            self.is_staticmethod = True\n+        if not self.is_classmethod and self.name in ('__class_getitem__', '__init_subclass__') and env.is_py_class_scope:\n+            from .ExprNodes import NameNode\n+            self.decorators = self.decorators or []\n+            self.decorators.append(DecoratorNode(self.pos, decorator=NameNode(self.pos, name='classmethod')))",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r408742926",
            "id": 408742926,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODc0MjkyNg==",
            "original_commit_id": "5c194be5c535c12231fa48b3cb60ef4eda90d35f",
            "original_line": 2890,
            "original_position": 9,
            "original_start_line": null,
            "path": "Cython/Compiler/Nodes.py",
            "position": null,
            "pull_request_review_id": 393651592,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/408742926",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/771072?v=4",
                "events_url": "https://api.github.com/users/msg555/events{/privacy}",
                "followers_url": "https://api.github.com/users/msg555/followers",
                "following_url": "https://api.github.com/users/msg555/following{/other_user}",
                "gists_url": "https://api.github.com/users/msg555/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/msg555",
                "id": 771072,
                "login": "msg555",
                "node_id": "MDQ6VXNlcjc3MTA3Mg==",
                "organizations_url": "https://api.github.com/users/msg555/orgs",
                "received_events_url": "https://api.github.com/users/msg555/received_events",
                "repos_url": "https://api.github.com/users/msg555/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/msg555/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/msg555/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/msg555"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r408748599"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/408748599"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "I'd probably change this to `PyObject_GetAttrString(PYIDENT(\"__class_getitem__\"))` which uses the Cython mechanisms for defining identifier names (it might have to be `PyObject_GetAttr`... not 100% sure).\r\n\r\nThen I don't actually see the need to restrict to to Python 3.7+ - it's only an attribute lookup+function call so it should be possible for Cython to support it on any version of Python.",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-15T10:43:42Z",
            "diff_hunk": "@@ -282,35 +282,46 @@ static CYTHON_INLINE PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* k\n // //@requires: GetItemInt - added in IndexNode as it uses templating.\n \n #if CYTHON_USE_TYPE_SLOTS\n-static PyObject *__Pyx_PyObject_GetIndex(PyObject *obj, PyObject* index) {\n-    PyObject *runerr;\n-    Py_ssize_t key_value;\n-    PySequenceMethods *m = Py_TYPE(obj)->tp_as_sequence;\n-    if (unlikely(!(m && m->sq_item))) {\n-        PyErr_Format(PyExc_TypeError, \"'%.200s' object is not subscriptable\", Py_TYPE(obj)->tp_name);\n-        return NULL;\n-    }\n-\n-    key_value = __Pyx_PyIndex_AsSsize_t(index);\n-    if (likely(key_value != -1 || !(runerr = PyErr_Occurred()))) {\n-        return __Pyx_GetItemInt_Fast(obj, key_value, 0, 1, 1);\n+static PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* key) {\n+    PyTypeObject* tp = Py_TYPE(obj);\n+    PyMappingMethods *mm = tp->tp_as_mapping;\n+    if (likely(mm && mm->mp_subscript)) {\n+        return mm->mp_subscript(obj, key);\n+    }\n+\n+    PySequenceMethods *sm = tp->tp_as_sequence;\n+    if (likely(sm && sm->sq_item)) {\n+        PyObject *runerr;\n+        Py_ssize_t key_value;\n+        key_value = __Pyx_PyIndex_AsSsize_t(key);\n+        if (likely(key_value != -1 || !(runerr = PyErr_Occurred()))) {\n+            return __Pyx_GetItemInt_Fast(obj, key_value, 0, 1, 1);\n+        }\n+        if (PyErr_GivenExceptionMatches(runerr, PyExc_OverflowError)) {\n+            PyErr_Clear();\n+            PyErr_Format(PyExc_IndexError, \"cannot fit '%.200s' into an index-sized integer\", Py_TYPE(key)->tp_name);\n+        }\n+        return NULL; \n+    }\n+    \n+#if PY_VERSION_HEX >= 0x03070000\n+    if (likely(PyType_Check(obj))) {\n+        PyObject *meth;\n+        _Py_IDENTIFIER(__class_getitem__);\n+        if (_PyObject_LookupAttrId(obj, &PyId___class_getitem__, &meth) < 0) {",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r408748599",
            "id": 408748599,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODc0ODU5OQ==",
            "original_commit_id": "5c194be5c535c12231fa48b3cb60ef4eda90d35f",
            "original_line": 311,
            "original_position": 42,
            "original_start_line": null,
            "path": "Cython/Utility/ObjectHandling.c",
            "position": null,
            "pull_request_review_id": 393658458,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/408748599",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r408749041"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/408749041"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "I'd probably drop the MRO stuff and do it in a separate full request. It's almost certainly less important for Cython since the chances are that the `typing` module will never be compiled so Cython will never see it's MRO stuff.\r\n\r\nWith that done, I think the test could actually run on any Python version.",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-15T10:44:44Z",
            "diff_hunk": "@@ -0,0 +1,288 @@\n+### COPIED FROM CPython 3.7\n+# cython: language_level=3",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r408749041",
            "id": 408749041,
            "in_reply_to_id": 408742152,
            "line": 3,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODc0OTA0MQ==",
            "original_commit_id": "5c194be5c535c12231fa48b3cb60ef4eda90d35f",
            "original_line": 3,
            "original_position": 2,
            "original_start_line": null,
            "path": "tests/run/test_genericclass.py",
            "position": 3,
            "pull_request_review_id": 393658458,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/408749041",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r408750565"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/408750565"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "You may well have to change this to a doctest instead since that's what Cython uses. There's probably a simple way of setting up `__doc__ = \"unittest.main(__module__)\"` so doctest just calls unit test (but it might be slightly different...)",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-15T10:47:46Z",
            "diff_hunk": "@@ -0,0 +1,288 @@\n+### COPIED FROM CPython 3.7\n+# cython: language_level=3\n+import unittest\n+from test import support\n+\n+\n+class TestMROEntry(unittest.TestCase):\n+    def test_mro_entry_signature(self):\n+        tested = []\n+        class B: ...\n+        class C:\n+            def __mro_entries__(self, *args, **kwargs):\n+                tested.extend([args, kwargs])\n+                return (C,)\n+        c = C()\n+        self.assertEqual(tested, [])\n+        class D(B, c): ...\n+        self.assertEqual(tested[0], ((B, c),))\n+        self.assertEqual(tested[1], {})\n+\n+    def test_mro_entry(self):\n+        tested = []\n+        class A: ...\n+        class B: ...\n+        class C:\n+            def __mro_entries__(self, bases):\n+                tested.append(bases)\n+                return (self.__class__,)\n+        c = C()\n+        self.assertEqual(tested, [])\n+        class D(A, c, B): ...\n+        self.assertEqual(tested[-1], (A, c, B))\n+        self.assertEqual(D.__bases__, (A, C, B))\n+        self.assertEqual(D.__orig_bases__, (A, c, B))\n+        self.assertEqual(D.__mro__, (D, A, C, B, object))\n+        d = D()\n+        class E(d): ...\n+        self.assertEqual(tested[-1], (d,))\n+        self.assertEqual(E.__bases__, (D,))\n+\n+    def test_mro_entry_none(self):\n+        tested = []\n+        class A: ...\n+        class B: ...\n+        class C:\n+            def __mro_entries__(self, bases):\n+                tested.append(bases)\n+                return ()\n+        c = C()\n+        self.assertEqual(tested, [])\n+        class D(A, c, B): ...\n+        self.assertEqual(tested[-1], (A, c, B))\n+        self.assertEqual(D.__bases__, (A, B))\n+        self.assertEqual(D.__orig_bases__, (A, c, B))\n+        self.assertEqual(D.__mro__, (D, A, B, object))\n+        class E(c): ...\n+        self.assertEqual(tested[-1], (c,))\n+        self.assertEqual(E.__bases__, (object,))\n+        self.assertEqual(E.__orig_bases__, (c,))\n+        self.assertEqual(E.__mro__, (E, object))\n+\n+    def test_mro_entry_with_builtins(self):\n+        tested = []\n+        class A: ...\n+        class C:\n+            def __mro_entries__(self, bases):\n+                tested.append(bases)\n+                return (dict,)\n+        c = C()\n+        self.assertEqual(tested, [])\n+        class D(A, c): ...\n+        self.assertEqual(tested[-1], (A, c))\n+        self.assertEqual(D.__bases__, (A, dict))\n+        self.assertEqual(D.__orig_bases__, (A, c))\n+        self.assertEqual(D.__mro__, (D, A, dict, object))\n+\n+    def test_mro_entry_with_builtins_2(self):\n+        tested = []\n+        class C:\n+            def __mro_entries__(self, bases):\n+                tested.append(bases)\n+                return (C,)\n+        c = C()\n+        self.assertEqual(tested, [])\n+        class D(c, dict): ...\n+        self.assertEqual(tested[-1], (c, dict))\n+        self.assertEqual(D.__bases__, (C, dict))\n+        self.assertEqual(D.__orig_bases__, (c, dict))\n+        self.assertEqual(D.__mro__, (D, C, dict, object))\n+\n+    def test_mro_entry_errors(self):\n+        class C_too_many:\n+            def __mro_entries__(self, bases, something, other):\n+                return ()\n+        c = C_too_many()\n+        with self.assertRaises(TypeError):\n+            class D(c): ...\n+        class C_too_few:\n+            def __mro_entries__(self):\n+                return ()\n+        d = C_too_few()\n+        with self.assertRaises(TypeError):\n+            class D(d): ...\n+\n+    def test_mro_entry_errors_2(self):\n+        class C_not_callable:\n+            __mro_entries__ = \"Surprise!\"\n+        c = C_not_callable()\n+        with self.assertRaises(TypeError):\n+            class D(c): ...\n+        class C_not_tuple:\n+            def __mro_entries__(self):\n+                return object\n+        c = C_not_tuple()\n+        with self.assertRaises(TypeError):\n+            class D(c): ...\n+\n+    def test_mro_entry_metaclass(self):\n+        meta_args = []\n+        class Meta(type):\n+            def __new__(mcls, name, bases, ns):\n+                meta_args.extend([mcls, name, bases, ns])\n+                return super().__new__(mcls, name, bases, ns)\n+        class A: ...\n+        class C:\n+            def __mro_entries__(self, bases):\n+                return (A,)\n+        c = C()\n+        class D(c, metaclass=Meta):\n+            x = 1\n+        self.assertEqual(meta_args[0], Meta)\n+        self.assertEqual(meta_args[1], 'D')\n+        self.assertEqual(meta_args[2], (A,))\n+        self.assertEqual(meta_args[3]['x'], 1)\n+        self.assertEqual(D.__bases__, (A,))\n+        self.assertEqual(D.__orig_bases__, (c,))\n+        self.assertEqual(D.__mro__, (D, A, object))\n+        self.assertEqual(D.__class__, Meta)\n+\n+    def test_mro_entry_type_call(self):\n+        # Substitution should _not_ happen in direct type call\n+        class C:\n+            def __mro_entries__(self, bases):\n+                return ()\n+        c = C()\n+        with self.assertRaisesRegex(TypeError,\n+                                    \"MRO entry resolution; \"\n+                                    \"use types.new_class()\"):\n+            type('Bad', (c,), {})\n+\n+\n+class TestClassGetitem(unittest.TestCase):\n+    def test_class_getitem(self):\n+        getitem_args = []\n+        class C:\n+            def __class_getitem__(*args, **kwargs):\n+                getitem_args.extend([args, kwargs])\n+                return None\n+        C[int, str]\n+        self.assertEqual(getitem_args[0], (C, (int, str)))\n+        self.assertEqual(getitem_args[1], {})\n+\n+    def test_class_getitem_format(self):\n+        class C:\n+            def __class_getitem__(cls, item):\n+                return f'C[{item.__name__}]'\n+        self.assertEqual(C[int], 'C[int]')\n+        self.assertEqual(C[C], 'C[C]')\n+\n+    def test_class_getitem_inheritance(self):\n+        class C:\n+            def __class_getitem__(cls, item):\n+                return f'{cls.__name__}[{item.__name__}]'\n+        class D(C): ...\n+        self.assertEqual(D[int], 'D[int]')\n+        self.assertEqual(D[D], 'D[D]')\n+\n+    def test_class_getitem_inheritance_2(self):\n+        class C:\n+            def __class_getitem__(cls, item):\n+                return 'Should not see this'\n+        class D(C):\n+            def __class_getitem__(cls, item):\n+                return f'{cls.__name__}[{item.__name__}]'\n+        self.assertEqual(D[int], 'D[int]')\n+        self.assertEqual(D[D], 'D[D]')\n+\n+    def test_class_getitem_classmethod(self):\n+        class C:\n+            @classmethod\n+            def __class_getitem__(cls, item):\n+                return f'{cls.__name__}[{item.__name__}]'\n+        class D(C): ...\n+        self.assertEqual(D[int], 'D[int]')\n+        self.assertEqual(D[D], 'D[D]')\n+\n+    def test_class_getitem_patched(self):\n+        class C:\n+            def __init_subclass__(cls):\n+                def __class_getitem__(cls, item):\n+                    return f'{cls.__name__}[{item.__name__}]'\n+                cls.__class_getitem__ = classmethod(__class_getitem__)\n+        class D(C): ...\n+        self.assertEqual(D[int], 'D[int]')\n+        self.assertEqual(D[D], 'D[D]')\n+\n+    def test_class_getitem_with_builtins(self):\n+        class A(dict):\n+            called_with = None\n+\n+            def __class_getitem__(cls, item):\n+                cls.called_with = item\n+        class B(A):\n+            pass\n+        self.assertIs(B.called_with, None)\n+        B[int]\n+        self.assertIs(B.called_with, int)\n+\n+    def test_class_getitem_errors(self):\n+        class C_too_few:\n+            def __class_getitem__(cls):\n+                return None\n+        with self.assertRaises(TypeError):\n+            C_too_few[int]\n+        class C_too_many:\n+            def __class_getitem__(cls, one, two):\n+                return None\n+        with self.assertRaises(TypeError):\n+            C_too_many[int]\n+\n+    def test_class_getitem_errors_2(self):\n+        class C:\n+            def __class_getitem__(cls, item):\n+                return None\n+        with self.assertRaises(TypeError):\n+            C()[int]\n+        class E: ...\n+        e = E()\n+        e.__class_getitem__ = lambda cls, item: 'This will not work'\n+        with self.assertRaises(TypeError):\n+            e[int]\n+        class C_not_callable:\n+            __class_getitem__ = \"Surprise!\"\n+        with self.assertRaises(TypeError):\n+            C_not_callable[int]\n+\n+    def test_class_getitem_metaclass(self):\n+        class Meta(type):\n+            def __class_getitem__(cls, item):\n+                return f'{cls.__name__}[{item.__name__}]'\n+        self.assertEqual(Meta[int], 'Meta[int]')\n+\n+    def test_class_getitem_with_metaclass(self):\n+        class Meta(type): pass\n+        class C(metaclass=Meta):\n+            def __class_getitem__(cls, item):\n+                return f'{cls.__name__}[{item.__name__}]'\n+        self.assertEqual(C[int], 'C[int]')\n+\n+    def test_class_getitem_metaclass_first(self):\n+        class Meta(type):\n+            def __getitem__(cls, item):\n+                return 'from metaclass'\n+        class C(metaclass=Meta):\n+            def __class_getitem__(cls, item):\n+                return 'from __class_getitem__'\n+        self.assertEqual(C[int], 'from metaclass')\n+\n+\n+@support.cpython_only\n+class CAPITest(unittest.TestCase):\n+\n+    def test_c_class(self):\n+        from _testcapi import Generic, GenericAlias\n+        self.assertIsInstance(Generic.__class_getitem__(int), GenericAlias)\n+\n+        IntGeneric = Generic[int]\n+        self.assertIs(type(IntGeneric), GenericAlias)\n+        self.assertEqual(IntGeneric.__mro_entries__(()), (int,))\n+        class C(IntGeneric):\n+            pass\n+        self.assertEqual(C.__bases__, (int,))\n+        self.assertEqual(C.__orig_bases__, (IntGeneric,))\n+        self.assertEqual(C.__mro__, (C, int, object))\n+\n+\n+if __name__ == \"__main__\":",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r408750565",
            "id": 408750565,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODc1MDU2NQ==",
            "original_commit_id": "5c194be5c535c12231fa48b3cb60ef4eda90d35f",
            "original_line": 287,
            "original_position": 287,
            "original_start_line": null,
            "path": "tests/run/test_genericclass.py",
            "position": null,
            "pull_request_review_id": 393658458,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/408750565",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r408751815"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/408751815"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "It'll be the outermost decorator, so probably the front I think. (Although at the minute it probably won't work if there are any other decorators present anyway - I have a PR in to fix this but it's big and some of the changes are unpopular)",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-15T10:50:13Z",
            "diff_hunk": "@@ -2883,7 +2883,12 @@ def analyse_declarations(self, env):\n             self.is_staticmethod = False\n \n         if self.name == '__new__' and env.is_py_class_scope:\n-            self.is_staticmethod = 1\n+            self.is_staticmethod = True\n+        if not self.is_classmethod and self.name in ('__class_getitem__', '__init_subclass__') and env.is_py_class_scope:\n+            from .ExprNodes import NameNode\n+            self.decorators = self.decorators or []\n+            self.decorators.append(DecoratorNode(self.pos, decorator=NameNode(self.pos, name='classmethod')))",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r408751815",
            "id": 408751815,
            "in_reply_to_id": 408742926,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODc1MTgxNQ==",
            "original_commit_id": "5c194be5c535c12231fa48b3cb60ef4eda90d35f",
            "original_line": 2890,
            "original_position": 9,
            "original_start_line": null,
            "path": "Cython/Compiler/Nodes.py",
            "position": null,
            "pull_request_review_id": 393662498,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/408751815",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r408753154"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/408753154"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "On the first line, add:\r\n\r\n```\r\n#mode: run\r\n#tag: pure3.7\r\n```\r\n\r\nto tell the testrunner that a) the test should be run, and b) it should also run it in plain Python>=3.7 just to show that it matches the plain Python behaviour",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-15T10:52:52Z",
            "diff_hunk": "@@ -0,0 +1,288 @@\n+### COPIED FROM CPython 3.7",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r408753154",
            "id": 408753154,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODc1MzE1NA==",
            "original_commit_id": "5c194be5c535c12231fa48b3cb60ef4eda90d35f",
            "original_line": 1,
            "original_position": 1,
            "original_start_line": null,
            "path": "tests/run/test_genericclass.py",
            "position": null,
            "pull_request_review_id": 393664083,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/408753154",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r409055894"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/409055894"
                }
            },
            "author_association": "MEMBER",
            "body": "`test.support` is not necessarily available in a Python installation. But I actually think that we don't need this test at all.",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-15T18:42:36Z",
            "diff_hunk": "@@ -0,0 +1,288 @@\n+### COPIED FROM CPython 3.7\n+# cython: language_level=3\n+import unittest\n+from test import support\n+\n+\n+class TestMROEntry(unittest.TestCase):\n+    def test_mro_entry_signature(self):\n+        tested = []\n+        class B: ...\n+        class C:\n+            def __mro_entries__(self, *args, **kwargs):\n+                tested.extend([args, kwargs])\n+                return (C,)\n+        c = C()\n+        self.assertEqual(tested, [])\n+        class D(B, c): ...\n+        self.assertEqual(tested[0], ((B, c),))\n+        self.assertEqual(tested[1], {})\n+\n+    def test_mro_entry(self):\n+        tested = []\n+        class A: ...\n+        class B: ...\n+        class C:\n+            def __mro_entries__(self, bases):\n+                tested.append(bases)\n+                return (self.__class__,)\n+        c = C()\n+        self.assertEqual(tested, [])\n+        class D(A, c, B): ...\n+        self.assertEqual(tested[-1], (A, c, B))\n+        self.assertEqual(D.__bases__, (A, C, B))\n+        self.assertEqual(D.__orig_bases__, (A, c, B))\n+        self.assertEqual(D.__mro__, (D, A, C, B, object))\n+        d = D()\n+        class E(d): ...\n+        self.assertEqual(tested[-1], (d,))\n+        self.assertEqual(E.__bases__, (D,))\n+\n+    def test_mro_entry_none(self):\n+        tested = []\n+        class A: ...\n+        class B: ...\n+        class C:\n+            def __mro_entries__(self, bases):\n+                tested.append(bases)\n+                return ()\n+        c = C()\n+        self.assertEqual(tested, [])\n+        class D(A, c, B): ...\n+        self.assertEqual(tested[-1], (A, c, B))\n+        self.assertEqual(D.__bases__, (A, B))\n+        self.assertEqual(D.__orig_bases__, (A, c, B))\n+        self.assertEqual(D.__mro__, (D, A, B, object))\n+        class E(c): ...\n+        self.assertEqual(tested[-1], (c,))\n+        self.assertEqual(E.__bases__, (object,))\n+        self.assertEqual(E.__orig_bases__, (c,))\n+        self.assertEqual(E.__mro__, (E, object))\n+\n+    def test_mro_entry_with_builtins(self):\n+        tested = []\n+        class A: ...\n+        class C:\n+            def __mro_entries__(self, bases):\n+                tested.append(bases)\n+                return (dict,)\n+        c = C()\n+        self.assertEqual(tested, [])\n+        class D(A, c): ...\n+        self.assertEqual(tested[-1], (A, c))\n+        self.assertEqual(D.__bases__, (A, dict))\n+        self.assertEqual(D.__orig_bases__, (A, c))\n+        self.assertEqual(D.__mro__, (D, A, dict, object))\n+\n+    def test_mro_entry_with_builtins_2(self):\n+        tested = []\n+        class C:\n+            def __mro_entries__(self, bases):\n+                tested.append(bases)\n+                return (C,)\n+        c = C()\n+        self.assertEqual(tested, [])\n+        class D(c, dict): ...\n+        self.assertEqual(tested[-1], (c, dict))\n+        self.assertEqual(D.__bases__, (C, dict))\n+        self.assertEqual(D.__orig_bases__, (c, dict))\n+        self.assertEqual(D.__mro__, (D, C, dict, object))\n+\n+    def test_mro_entry_errors(self):\n+        class C_too_many:\n+            def __mro_entries__(self, bases, something, other):\n+                return ()\n+        c = C_too_many()\n+        with self.assertRaises(TypeError):\n+            class D(c): ...\n+        class C_too_few:\n+            def __mro_entries__(self):\n+                return ()\n+        d = C_too_few()\n+        with self.assertRaises(TypeError):\n+            class D(d): ...\n+\n+    def test_mro_entry_errors_2(self):\n+        class C_not_callable:\n+            __mro_entries__ = \"Surprise!\"\n+        c = C_not_callable()\n+        with self.assertRaises(TypeError):\n+            class D(c): ...\n+        class C_not_tuple:\n+            def __mro_entries__(self):\n+                return object\n+        c = C_not_tuple()\n+        with self.assertRaises(TypeError):\n+            class D(c): ...\n+\n+    def test_mro_entry_metaclass(self):\n+        meta_args = []\n+        class Meta(type):\n+            def __new__(mcls, name, bases, ns):\n+                meta_args.extend([mcls, name, bases, ns])\n+                return super().__new__(mcls, name, bases, ns)\n+        class A: ...\n+        class C:\n+            def __mro_entries__(self, bases):\n+                return (A,)\n+        c = C()\n+        class D(c, metaclass=Meta):\n+            x = 1\n+        self.assertEqual(meta_args[0], Meta)\n+        self.assertEqual(meta_args[1], 'D')\n+        self.assertEqual(meta_args[2], (A,))\n+        self.assertEqual(meta_args[3]['x'], 1)\n+        self.assertEqual(D.__bases__, (A,))\n+        self.assertEqual(D.__orig_bases__, (c,))\n+        self.assertEqual(D.__mro__, (D, A, object))\n+        self.assertEqual(D.__class__, Meta)\n+\n+    def test_mro_entry_type_call(self):\n+        # Substitution should _not_ happen in direct type call\n+        class C:\n+            def __mro_entries__(self, bases):\n+                return ()\n+        c = C()\n+        with self.assertRaisesRegex(TypeError,\n+                                    \"MRO entry resolution; \"\n+                                    \"use types.new_class()\"):\n+            type('Bad', (c,), {})\n+\n+\n+class TestClassGetitem(unittest.TestCase):\n+    def test_class_getitem(self):\n+        getitem_args = []\n+        class C:\n+            def __class_getitem__(*args, **kwargs):\n+                getitem_args.extend([args, kwargs])\n+                return None\n+        C[int, str]\n+        self.assertEqual(getitem_args[0], (C, (int, str)))\n+        self.assertEqual(getitem_args[1], {})\n+\n+    def test_class_getitem_format(self):\n+        class C:\n+            def __class_getitem__(cls, item):\n+                return f'C[{item.__name__}]'\n+        self.assertEqual(C[int], 'C[int]')\n+        self.assertEqual(C[C], 'C[C]')\n+\n+    def test_class_getitem_inheritance(self):\n+        class C:\n+            def __class_getitem__(cls, item):\n+                return f'{cls.__name__}[{item.__name__}]'\n+        class D(C): ...\n+        self.assertEqual(D[int], 'D[int]')\n+        self.assertEqual(D[D], 'D[D]')\n+\n+    def test_class_getitem_inheritance_2(self):\n+        class C:\n+            def __class_getitem__(cls, item):\n+                return 'Should not see this'\n+        class D(C):\n+            def __class_getitem__(cls, item):\n+                return f'{cls.__name__}[{item.__name__}]'\n+        self.assertEqual(D[int], 'D[int]')\n+        self.assertEqual(D[D], 'D[D]')\n+\n+    def test_class_getitem_classmethod(self):\n+        class C:\n+            @classmethod\n+            def __class_getitem__(cls, item):\n+                return f'{cls.__name__}[{item.__name__}]'\n+        class D(C): ...\n+        self.assertEqual(D[int], 'D[int]')\n+        self.assertEqual(D[D], 'D[D]')\n+\n+    def test_class_getitem_patched(self):\n+        class C:\n+            def __init_subclass__(cls):\n+                def __class_getitem__(cls, item):\n+                    return f'{cls.__name__}[{item.__name__}]'\n+                cls.__class_getitem__ = classmethod(__class_getitem__)\n+        class D(C): ...\n+        self.assertEqual(D[int], 'D[int]')\n+        self.assertEqual(D[D], 'D[D]')\n+\n+    def test_class_getitem_with_builtins(self):\n+        class A(dict):\n+            called_with = None\n+\n+            def __class_getitem__(cls, item):\n+                cls.called_with = item\n+        class B(A):\n+            pass\n+        self.assertIs(B.called_with, None)\n+        B[int]\n+        self.assertIs(B.called_with, int)\n+\n+    def test_class_getitem_errors(self):\n+        class C_too_few:\n+            def __class_getitem__(cls):\n+                return None\n+        with self.assertRaises(TypeError):\n+            C_too_few[int]\n+        class C_too_many:\n+            def __class_getitem__(cls, one, two):\n+                return None\n+        with self.assertRaises(TypeError):\n+            C_too_many[int]\n+\n+    def test_class_getitem_errors_2(self):\n+        class C:\n+            def __class_getitem__(cls, item):\n+                return None\n+        with self.assertRaises(TypeError):\n+            C()[int]\n+        class E: ...\n+        e = E()\n+        e.__class_getitem__ = lambda cls, item: 'This will not work'\n+        with self.assertRaises(TypeError):\n+            e[int]\n+        class C_not_callable:\n+            __class_getitem__ = \"Surprise!\"\n+        with self.assertRaises(TypeError):\n+            C_not_callable[int]\n+\n+    def test_class_getitem_metaclass(self):\n+        class Meta(type):\n+            def __class_getitem__(cls, item):\n+                return f'{cls.__name__}[{item.__name__}]'\n+        self.assertEqual(Meta[int], 'Meta[int]')\n+\n+    def test_class_getitem_with_metaclass(self):\n+        class Meta(type): pass\n+        class C(metaclass=Meta):\n+            def __class_getitem__(cls, item):\n+                return f'{cls.__name__}[{item.__name__}]'\n+        self.assertEqual(C[int], 'C[int]')\n+\n+    def test_class_getitem_metaclass_first(self):\n+        class Meta(type):\n+            def __getitem__(cls, item):\n+                return 'from metaclass'\n+        class C(metaclass=Meta):\n+            def __class_getitem__(cls, item):\n+                return 'from __class_getitem__'\n+        self.assertEqual(C[int], 'from metaclass')\n+\n+\n+@support.cpython_only",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r409055894",
            "id": 409055894,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTA1NTg5NA==",
            "original_commit_id": "5c194be5c535c12231fa48b3cb60ef4eda90d35f",
            "original_line": 270,
            "original_position": 270,
            "original_start_line": null,
            "path": "tests/run/test_genericclass.py",
            "position": null,
            "pull_request_review_id": 394039031,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/409055894",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r409058134"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/409058134"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n            self.decorators.append(DecoratorNode(self.pos, decorator=NameNode(self.pos, name=EncodedString('classmethod'))))\r\n```\r\nApart from that – what is this decorator needed for? Isn't setting `self.is_classmethod` enough?",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-15T18:46:31Z",
            "diff_hunk": "@@ -2883,7 +2883,12 @@ def analyse_declarations(self, env):\n             self.is_staticmethod = False\n \n         if self.name == '__new__' and env.is_py_class_scope:\n-            self.is_staticmethod = 1\n+            self.is_staticmethod = True\n+        if not self.is_classmethod and self.name in ('__class_getitem__', '__init_subclass__') and env.is_py_class_scope:\n+            from .ExprNodes import NameNode\n+            self.decorators = self.decorators or []\n+            self.decorators.append(DecoratorNode(self.pos, decorator=NameNode(self.pos, name='classmethod')))",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r409058134",
            "id": 409058134,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTA1ODEzNA==",
            "original_commit_id": "5c194be5c535c12231fa48b3cb60ef4eda90d35f",
            "original_line": 2890,
            "original_position": 9,
            "original_start_line": null,
            "path": "Cython/Compiler/Nodes.py",
            "position": null,
            "pull_request_review_id": 394039031,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/409058134",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r409063518"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/409063518"
                }
            },
            "author_association": "MEMBER",
            "body": "A common reason for having separate smaller functions is inlining. C compilers often take inlining decisions based on the size of the function, so a small fast-path function can end up being inlined while a longer all-in-one function may fail to be partially inlined.\r\n\r\nAlso, it seems to me that the two functions were really handling different protocols – item access versus indexing.\r\n\r\nI therefore suggest going back to separating the functions.",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-15T18:55:17Z",
            "diff_hunk": "@@ -282,35 +282,46 @@ static CYTHON_INLINE PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* k\n // //@requires: GetItemInt - added in IndexNode as it uses templating.\n \n #if CYTHON_USE_TYPE_SLOTS\n-static PyObject *__Pyx_PyObject_GetIndex(PyObject *obj, PyObject* index) {\n-    PyObject *runerr;\n-    Py_ssize_t key_value;\n-    PySequenceMethods *m = Py_TYPE(obj)->tp_as_sequence;\n-    if (unlikely(!(m && m->sq_item))) {\n-        PyErr_Format(PyExc_TypeError, \"'%.200s' object is not subscriptable\", Py_TYPE(obj)->tp_name);\n-        return NULL;\n-    }\n-\n-    key_value = __Pyx_PyIndex_AsSsize_t(index);\n-    if (likely(key_value != -1 || !(runerr = PyErr_Occurred()))) {\n-        return __Pyx_GetItemInt_Fast(obj, key_value, 0, 1, 1);\n+static PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* key) {\n+    PyTypeObject* tp = Py_TYPE(obj);\n+    PyMappingMethods *mm = tp->tp_as_mapping;\n+    if (likely(mm && mm->mp_subscript)) {\n+        return mm->mp_subscript(obj, key);\n+    }",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r409063518",
            "id": 409063518,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTA2MzUxOA==",
            "original_commit_id": "5c194be5c535c12231fa48b3cb60ef4eda90d35f",
            "original_line": 324,
            "original_position": 21,
            "original_start_line": 285,
            "path": "Cython/Utility/ObjectHandling.c",
            "position": null,
            "pull_request_review_id": 394039031,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/409063518",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r409066467"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/409066467"
                }
            },
            "author_association": "MEMBER",
            "body": "`__Pyx_PyObject_GetAttrStr(obj, PYIDENT(\"__class_getitem__\"))`, with an `//@requires: ObjectHandling.c::PyObjectGetAttrStr` at the top of the code section.\r\n\r\nWe're not using CPython's `_Py_IDENTIFIER` API in Cython.",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-15T19:00:00Z",
            "diff_hunk": "@@ -282,35 +282,46 @@ static CYTHON_INLINE PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* k\n // //@requires: GetItemInt - added in IndexNode as it uses templating.\n \n #if CYTHON_USE_TYPE_SLOTS\n-static PyObject *__Pyx_PyObject_GetIndex(PyObject *obj, PyObject* index) {\n-    PyObject *runerr;\n-    Py_ssize_t key_value;\n-    PySequenceMethods *m = Py_TYPE(obj)->tp_as_sequence;\n-    if (unlikely(!(m && m->sq_item))) {\n-        PyErr_Format(PyExc_TypeError, \"'%.200s' object is not subscriptable\", Py_TYPE(obj)->tp_name);\n-        return NULL;\n-    }\n-\n-    key_value = __Pyx_PyIndex_AsSsize_t(index);\n-    if (likely(key_value != -1 || !(runerr = PyErr_Occurred()))) {\n-        return __Pyx_GetItemInt_Fast(obj, key_value, 0, 1, 1);\n+static PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* key) {\n+    PyTypeObject* tp = Py_TYPE(obj);\n+    PyMappingMethods *mm = tp->tp_as_mapping;\n+    if (likely(mm && mm->mp_subscript)) {\n+        return mm->mp_subscript(obj, key);\n+    }\n+\n+    PySequenceMethods *sm = tp->tp_as_sequence;\n+    if (likely(sm && sm->sq_item)) {\n+        PyObject *runerr;\n+        Py_ssize_t key_value;\n+        key_value = __Pyx_PyIndex_AsSsize_t(key);\n+        if (likely(key_value != -1 || !(runerr = PyErr_Occurred()))) {\n+            return __Pyx_GetItemInt_Fast(obj, key_value, 0, 1, 1);\n+        }\n+        if (PyErr_GivenExceptionMatches(runerr, PyExc_OverflowError)) {\n+            PyErr_Clear();\n+            PyErr_Format(PyExc_IndexError, \"cannot fit '%.200s' into an index-sized integer\", Py_TYPE(key)->tp_name);\n+        }\n+        return NULL; \n+    }\n+    \n+#if PY_VERSION_HEX >= 0x03070000\n+    if (likely(PyType_Check(obj))) {\n+        PyObject *meth;\n+        _Py_IDENTIFIER(__class_getitem__);\n+        if (_PyObject_LookupAttrId(obj, &PyId___class_getitem__, &meth) < 0) {",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r409066467",
            "id": 409066467,
            "in_reply_to_id": 408748599,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTA2NjQ2Nw==",
            "original_commit_id": "5c194be5c535c12231fa48b3cb60ef4eda90d35f",
            "original_line": 311,
            "original_position": 42,
            "original_start_line": null,
            "path": "Cython/Utility/ObjectHandling.c",
            "position": null,
            "pull_request_review_id": 394039031,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/409066467",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r409073293"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/409073293"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n            PyObject *result = __Pyx_PyObject_CallOneArg(meth, key);\r\n```\r\nDoes the same thing in the end (currently), but it's the explicit way to spell this in Cython's internal code.",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-15T19:12:06Z",
            "diff_hunk": "@@ -282,35 +282,46 @@ static CYTHON_INLINE PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* k\n // //@requires: GetItemInt - added in IndexNode as it uses templating.\n \n #if CYTHON_USE_TYPE_SLOTS\n-static PyObject *__Pyx_PyObject_GetIndex(PyObject *obj, PyObject* index) {\n-    PyObject *runerr;\n-    Py_ssize_t key_value;\n-    PySequenceMethods *m = Py_TYPE(obj)->tp_as_sequence;\n-    if (unlikely(!(m && m->sq_item))) {\n-        PyErr_Format(PyExc_TypeError, \"'%.200s' object is not subscriptable\", Py_TYPE(obj)->tp_name);\n-        return NULL;\n-    }\n-\n-    key_value = __Pyx_PyIndex_AsSsize_t(index);\n-    if (likely(key_value != -1 || !(runerr = PyErr_Occurred()))) {\n-        return __Pyx_GetItemInt_Fast(obj, key_value, 0, 1, 1);\n+static PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* key) {\n+    PyTypeObject* tp = Py_TYPE(obj);\n+    PyMappingMethods *mm = tp->tp_as_mapping;\n+    if (likely(mm && mm->mp_subscript)) {\n+        return mm->mp_subscript(obj, key);\n+    }\n+\n+    PySequenceMethods *sm = tp->tp_as_sequence;\n+    if (likely(sm && sm->sq_item)) {\n+        PyObject *runerr;\n+        Py_ssize_t key_value;\n+        key_value = __Pyx_PyIndex_AsSsize_t(key);\n+        if (likely(key_value != -1 || !(runerr = PyErr_Occurred()))) {\n+            return __Pyx_GetItemInt_Fast(obj, key_value, 0, 1, 1);\n+        }\n+        if (PyErr_GivenExceptionMatches(runerr, PyExc_OverflowError)) {\n+            PyErr_Clear();\n+            PyErr_Format(PyExc_IndexError, \"cannot fit '%.200s' into an index-sized integer\", Py_TYPE(key)->tp_name);\n+        }\n+        return NULL; \n+    }\n+    \n+#if PY_VERSION_HEX >= 0x03070000\n+    if (likely(PyType_Check(obj))) {\n+        PyObject *meth;\n+        _Py_IDENTIFIER(__class_getitem__);\n+        if (_PyObject_LookupAttrId(obj, &PyId___class_getitem__, &meth) < 0) {\n+            return NULL;\n+        }\n+        if (meth) {\n+            PyObject *result = __Pyx_PyObject_FastCall(meth, &key, 1);",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r409073293",
            "id": 409073293,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTA3MzI5Mw==",
            "original_commit_id": "5c194be5c535c12231fa48b3cb60ef4eda90d35f",
            "original_line": 315,
            "original_position": 46,
            "original_start_line": null,
            "path": "Cython/Utility/ObjectHandling.c",
            "position": null,
            "pull_request_review_id": 394039031,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/409073293",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r409076382"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/409076382"
                }
            },
            "author_association": "MEMBER",
            "body": "We have a couple of test modules copied from CPython. They use the naming convention `test_*.py`, like this one, so this should one be fine.",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-15T19:17:48Z",
            "diff_hunk": "@@ -0,0 +1,288 @@\n+### COPIED FROM CPython 3.7\n+# cython: language_level=3\n+import unittest\n+from test import support\n+\n+\n+class TestMROEntry(unittest.TestCase):\n+    def test_mro_entry_signature(self):\n+        tested = []\n+        class B: ...\n+        class C:\n+            def __mro_entries__(self, *args, **kwargs):\n+                tested.extend([args, kwargs])\n+                return (C,)\n+        c = C()\n+        self.assertEqual(tested, [])\n+        class D(B, c): ...\n+        self.assertEqual(tested[0], ((B, c),))\n+        self.assertEqual(tested[1], {})\n+\n+    def test_mro_entry(self):\n+        tested = []\n+        class A: ...\n+        class B: ...\n+        class C:\n+            def __mro_entries__(self, bases):\n+                tested.append(bases)\n+                return (self.__class__,)\n+        c = C()\n+        self.assertEqual(tested, [])\n+        class D(A, c, B): ...\n+        self.assertEqual(tested[-1], (A, c, B))\n+        self.assertEqual(D.__bases__, (A, C, B))\n+        self.assertEqual(D.__orig_bases__, (A, c, B))\n+        self.assertEqual(D.__mro__, (D, A, C, B, object))\n+        d = D()\n+        class E(d): ...\n+        self.assertEqual(tested[-1], (d,))\n+        self.assertEqual(E.__bases__, (D,))\n+\n+    def test_mro_entry_none(self):\n+        tested = []\n+        class A: ...\n+        class B: ...\n+        class C:\n+            def __mro_entries__(self, bases):\n+                tested.append(bases)\n+                return ()\n+        c = C()\n+        self.assertEqual(tested, [])\n+        class D(A, c, B): ...\n+        self.assertEqual(tested[-1], (A, c, B))\n+        self.assertEqual(D.__bases__, (A, B))\n+        self.assertEqual(D.__orig_bases__, (A, c, B))\n+        self.assertEqual(D.__mro__, (D, A, B, object))\n+        class E(c): ...\n+        self.assertEqual(tested[-1], (c,))\n+        self.assertEqual(E.__bases__, (object,))\n+        self.assertEqual(E.__orig_bases__, (c,))\n+        self.assertEqual(E.__mro__, (E, object))\n+\n+    def test_mro_entry_with_builtins(self):\n+        tested = []\n+        class A: ...\n+        class C:\n+            def __mro_entries__(self, bases):\n+                tested.append(bases)\n+                return (dict,)\n+        c = C()\n+        self.assertEqual(tested, [])\n+        class D(A, c): ...\n+        self.assertEqual(tested[-1], (A, c))\n+        self.assertEqual(D.__bases__, (A, dict))\n+        self.assertEqual(D.__orig_bases__, (A, c))\n+        self.assertEqual(D.__mro__, (D, A, dict, object))\n+\n+    def test_mro_entry_with_builtins_2(self):\n+        tested = []\n+        class C:\n+            def __mro_entries__(self, bases):\n+                tested.append(bases)\n+                return (C,)\n+        c = C()\n+        self.assertEqual(tested, [])\n+        class D(c, dict): ...\n+        self.assertEqual(tested[-1], (c, dict))\n+        self.assertEqual(D.__bases__, (C, dict))\n+        self.assertEqual(D.__orig_bases__, (c, dict))\n+        self.assertEqual(D.__mro__, (D, C, dict, object))\n+\n+    def test_mro_entry_errors(self):\n+        class C_too_many:\n+            def __mro_entries__(self, bases, something, other):\n+                return ()\n+        c = C_too_many()\n+        with self.assertRaises(TypeError):\n+            class D(c): ...\n+        class C_too_few:\n+            def __mro_entries__(self):\n+                return ()\n+        d = C_too_few()\n+        with self.assertRaises(TypeError):\n+            class D(d): ...\n+\n+    def test_mro_entry_errors_2(self):\n+        class C_not_callable:\n+            __mro_entries__ = \"Surprise!\"\n+        c = C_not_callable()\n+        with self.assertRaises(TypeError):\n+            class D(c): ...\n+        class C_not_tuple:\n+            def __mro_entries__(self):\n+                return object\n+        c = C_not_tuple()\n+        with self.assertRaises(TypeError):\n+            class D(c): ...\n+\n+    def test_mro_entry_metaclass(self):\n+        meta_args = []\n+        class Meta(type):\n+            def __new__(mcls, name, bases, ns):\n+                meta_args.extend([mcls, name, bases, ns])\n+                return super().__new__(mcls, name, bases, ns)\n+        class A: ...\n+        class C:\n+            def __mro_entries__(self, bases):\n+                return (A,)\n+        c = C()\n+        class D(c, metaclass=Meta):\n+            x = 1\n+        self.assertEqual(meta_args[0], Meta)\n+        self.assertEqual(meta_args[1], 'D')\n+        self.assertEqual(meta_args[2], (A,))\n+        self.assertEqual(meta_args[3]['x'], 1)\n+        self.assertEqual(D.__bases__, (A,))\n+        self.assertEqual(D.__orig_bases__, (c,))\n+        self.assertEqual(D.__mro__, (D, A, object))\n+        self.assertEqual(D.__class__, Meta)\n+\n+    def test_mro_entry_type_call(self):\n+        # Substitution should _not_ happen in direct type call\n+        class C:\n+            def __mro_entries__(self, bases):\n+                return ()\n+        c = C()\n+        with self.assertRaisesRegex(TypeError,\n+                                    \"MRO entry resolution; \"\n+                                    \"use types.new_class()\"):\n+            type('Bad', (c,), {})\n+\n+\n+class TestClassGetitem(unittest.TestCase):\n+    def test_class_getitem(self):\n+        getitem_args = []\n+        class C:\n+            def __class_getitem__(*args, **kwargs):\n+                getitem_args.extend([args, kwargs])\n+                return None\n+        C[int, str]\n+        self.assertEqual(getitem_args[0], (C, (int, str)))\n+        self.assertEqual(getitem_args[1], {})\n+\n+    def test_class_getitem_format(self):\n+        class C:\n+            def __class_getitem__(cls, item):\n+                return f'C[{item.__name__}]'\n+        self.assertEqual(C[int], 'C[int]')\n+        self.assertEqual(C[C], 'C[C]')\n+\n+    def test_class_getitem_inheritance(self):\n+        class C:\n+            def __class_getitem__(cls, item):\n+                return f'{cls.__name__}[{item.__name__}]'\n+        class D(C): ...\n+        self.assertEqual(D[int], 'D[int]')\n+        self.assertEqual(D[D], 'D[D]')\n+\n+    def test_class_getitem_inheritance_2(self):\n+        class C:\n+            def __class_getitem__(cls, item):\n+                return 'Should not see this'\n+        class D(C):\n+            def __class_getitem__(cls, item):\n+                return f'{cls.__name__}[{item.__name__}]'\n+        self.assertEqual(D[int], 'D[int]')\n+        self.assertEqual(D[D], 'D[D]')\n+\n+    def test_class_getitem_classmethod(self):\n+        class C:\n+            @classmethod\n+            def __class_getitem__(cls, item):\n+                return f'{cls.__name__}[{item.__name__}]'\n+        class D(C): ...\n+        self.assertEqual(D[int], 'D[int]')\n+        self.assertEqual(D[D], 'D[D]')\n+\n+    def test_class_getitem_patched(self):\n+        class C:\n+            def __init_subclass__(cls):\n+                def __class_getitem__(cls, item):\n+                    return f'{cls.__name__}[{item.__name__}]'\n+                cls.__class_getitem__ = classmethod(__class_getitem__)\n+        class D(C): ...\n+        self.assertEqual(D[int], 'D[int]')\n+        self.assertEqual(D[D], 'D[D]')\n+\n+    def test_class_getitem_with_builtins(self):\n+        class A(dict):\n+            called_with = None\n+\n+            def __class_getitem__(cls, item):\n+                cls.called_with = item\n+        class B(A):\n+            pass\n+        self.assertIs(B.called_with, None)\n+        B[int]\n+        self.assertIs(B.called_with, int)\n+\n+    def test_class_getitem_errors(self):\n+        class C_too_few:\n+            def __class_getitem__(cls):\n+                return None\n+        with self.assertRaises(TypeError):\n+            C_too_few[int]\n+        class C_too_many:\n+            def __class_getitem__(cls, one, two):\n+                return None\n+        with self.assertRaises(TypeError):\n+            C_too_many[int]\n+\n+    def test_class_getitem_errors_2(self):\n+        class C:\n+            def __class_getitem__(cls, item):\n+                return None\n+        with self.assertRaises(TypeError):\n+            C()[int]\n+        class E: ...\n+        e = E()\n+        e.__class_getitem__ = lambda cls, item: 'This will not work'\n+        with self.assertRaises(TypeError):\n+            e[int]\n+        class C_not_callable:\n+            __class_getitem__ = \"Surprise!\"\n+        with self.assertRaises(TypeError):\n+            C_not_callable[int]\n+\n+    def test_class_getitem_metaclass(self):\n+        class Meta(type):\n+            def __class_getitem__(cls, item):\n+                return f'{cls.__name__}[{item.__name__}]'\n+        self.assertEqual(Meta[int], 'Meta[int]')\n+\n+    def test_class_getitem_with_metaclass(self):\n+        class Meta(type): pass\n+        class C(metaclass=Meta):\n+            def __class_getitem__(cls, item):\n+                return f'{cls.__name__}[{item.__name__}]'\n+        self.assertEqual(C[int], 'C[int]')\n+\n+    def test_class_getitem_metaclass_first(self):\n+        class Meta(type):\n+            def __getitem__(cls, item):\n+                return 'from metaclass'\n+        class C(metaclass=Meta):\n+            def __class_getitem__(cls, item):\n+                return 'from __class_getitem__'\n+        self.assertEqual(C[int], 'from metaclass')\n+\n+\n+@support.cpython_only\n+class CAPITest(unittest.TestCase):\n+\n+    def test_c_class(self):\n+        from _testcapi import Generic, GenericAlias\n+        self.assertIsInstance(Generic.__class_getitem__(int), GenericAlias)\n+\n+        IntGeneric = Generic[int]\n+        self.assertIs(type(IntGeneric), GenericAlias)\n+        self.assertEqual(IntGeneric.__mro_entries__(()), (int,))\n+        class C(IntGeneric):\n+            pass\n+        self.assertEqual(C.__bases__, (int,))\n+        self.assertEqual(C.__orig_bases__, (IntGeneric,))\n+        self.assertEqual(C.__mro__, (C, int, object))\n+\n+\n+if __name__ == \"__main__\":",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r409076382",
            "id": 409076382,
            "in_reply_to_id": 408750565,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTA3NjM4Mg==",
            "original_commit_id": "5c194be5c535c12231fa48b3cb60ef4eda90d35f",
            "original_line": 287,
            "original_position": 287,
            "original_start_line": null,
            "path": "tests/run/test_genericclass.py",
            "position": null,
            "pull_request_review_id": 394039031,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/409076382",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r409104312"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/409104312"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "I borrowed this logic from another place in the same file where we add a staticmethod decorator. Should that spot likely change as well?\r\n\r\nAs for why we need the decorator at all - in my testing it seems like setting is_classmethod alone was not enough. I believe the issue is that we need the logic generated from https://github.com/cython/cython/blob/master/Cython/Compiler/Symtab.py#L2006. It probably makes sense for this logic to be generated based off of the is_classmethod setting and for the decorator to be ignored but that refactor is at least currently beyond my familiarity with this codebase.",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-15T20:09:46Z",
            "diff_hunk": "@@ -2883,7 +2883,12 @@ def analyse_declarations(self, env):\n             self.is_staticmethod = False\n \n         if self.name == '__new__' and env.is_py_class_scope:\n-            self.is_staticmethod = 1\n+            self.is_staticmethod = True\n+        if not self.is_classmethod and self.name in ('__class_getitem__', '__init_subclass__') and env.is_py_class_scope:\n+            from .ExprNodes import NameNode\n+            self.decorators = self.decorators or []\n+            self.decorators.append(DecoratorNode(self.pos, decorator=NameNode(self.pos, name='classmethod')))",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r409104312",
            "id": 409104312,
            "in_reply_to_id": 409058134,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTEwNDMxMg==",
            "original_commit_id": "5c194be5c535c12231fa48b3cb60ef4eda90d35f",
            "original_line": 2890,
            "original_position": 9,
            "original_start_line": null,
            "path": "Cython/Compiler/Nodes.py",
            "position": null,
            "pull_request_review_id": 394098587,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/409104312",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/771072?v=4",
                "events_url": "https://api.github.com/users/msg555/events{/privacy}",
                "followers_url": "https://api.github.com/users/msg555/followers",
                "following_url": "https://api.github.com/users/msg555/following{/other_user}",
                "gists_url": "https://api.github.com/users/msg555/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/msg555",
                "id": 771072,
                "login": "msg555",
                "node_id": "MDQ6VXNlcjc3MTA3Mg==",
                "organizations_url": "https://api.github.com/users/msg555/orgs",
                "received_events_url": "https://api.github.com/users/msg555/received_events",
                "repos_url": "https://api.github.com/users/msg555/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/msg555/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/msg555/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/msg555"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r409107500"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/409107500"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "@da-woods I guess it depends on what the general strategy is for handling backwards compatibility. If I ran\r\n\r\n```\r\nclass A:\r\n  def __class_getitem__(cls, item):\r\n    return item\r\n\r\nprint(A[2])\r\n```\r\n\r\non Python 3.6 I should get a TypeError which I would no longer get without the python3.7 guard.\r\n\r\n@scoder will update to use `__Pyx_PyObject_GetAttrStr` as suggested.",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-15T20:15:49Z",
            "diff_hunk": "@@ -282,35 +282,46 @@ static CYTHON_INLINE PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* k\n // //@requires: GetItemInt - added in IndexNode as it uses templating.\n \n #if CYTHON_USE_TYPE_SLOTS\n-static PyObject *__Pyx_PyObject_GetIndex(PyObject *obj, PyObject* index) {\n-    PyObject *runerr;\n-    Py_ssize_t key_value;\n-    PySequenceMethods *m = Py_TYPE(obj)->tp_as_sequence;\n-    if (unlikely(!(m && m->sq_item))) {\n-        PyErr_Format(PyExc_TypeError, \"'%.200s' object is not subscriptable\", Py_TYPE(obj)->tp_name);\n-        return NULL;\n-    }\n-\n-    key_value = __Pyx_PyIndex_AsSsize_t(index);\n-    if (likely(key_value != -1 || !(runerr = PyErr_Occurred()))) {\n-        return __Pyx_GetItemInt_Fast(obj, key_value, 0, 1, 1);\n+static PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* key) {\n+    PyTypeObject* tp = Py_TYPE(obj);\n+    PyMappingMethods *mm = tp->tp_as_mapping;\n+    if (likely(mm && mm->mp_subscript)) {\n+        return mm->mp_subscript(obj, key);\n+    }\n+\n+    PySequenceMethods *sm = tp->tp_as_sequence;\n+    if (likely(sm && sm->sq_item)) {\n+        PyObject *runerr;\n+        Py_ssize_t key_value;\n+        key_value = __Pyx_PyIndex_AsSsize_t(key);\n+        if (likely(key_value != -1 || !(runerr = PyErr_Occurred()))) {\n+            return __Pyx_GetItemInt_Fast(obj, key_value, 0, 1, 1);\n+        }\n+        if (PyErr_GivenExceptionMatches(runerr, PyExc_OverflowError)) {\n+            PyErr_Clear();\n+            PyErr_Format(PyExc_IndexError, \"cannot fit '%.200s' into an index-sized integer\", Py_TYPE(key)->tp_name);\n+        }\n+        return NULL; \n+    }\n+    \n+#if PY_VERSION_HEX >= 0x03070000\n+    if (likely(PyType_Check(obj))) {\n+        PyObject *meth;\n+        _Py_IDENTIFIER(__class_getitem__);\n+        if (_PyObject_LookupAttrId(obj, &PyId___class_getitem__, &meth) < 0) {",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r409107500",
            "id": 409107500,
            "in_reply_to_id": 408748599,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTEwNzUwMA==",
            "original_commit_id": "5c194be5c535c12231fa48b3cb60ef4eda90d35f",
            "original_line": 311,
            "original_position": 42,
            "original_start_line": null,
            "path": "Cython/Utility/ObjectHandling.c",
            "position": null,
            "pull_request_review_id": 394098587,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/409107500",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/771072?v=4",
                "events_url": "https://api.github.com/users/msg555/events{/privacy}",
                "followers_url": "https://api.github.com/users/msg555/followers",
                "following_url": "https://api.github.com/users/msg555/following{/other_user}",
                "gists_url": "https://api.github.com/users/msg555/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/msg555",
                "id": 771072,
                "login": "msg555",
                "node_id": "MDQ6VXNlcjc3MTA3Mg==",
                "organizations_url": "https://api.github.com/users/msg555/orgs",
                "received_events_url": "https://api.github.com/users/msg555/received_events",
                "repos_url": "https://api.github.com/users/msg555/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/msg555/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/msg555/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/msg555"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r409107774"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/409107774"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": ":+1: ",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-15T20:16:24Z",
            "diff_hunk": "@@ -282,35 +282,46 @@ static CYTHON_INLINE PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* k\n // //@requires: GetItemInt - added in IndexNode as it uses templating.\n \n #if CYTHON_USE_TYPE_SLOTS\n-static PyObject *__Pyx_PyObject_GetIndex(PyObject *obj, PyObject* index) {\n-    PyObject *runerr;\n-    Py_ssize_t key_value;\n-    PySequenceMethods *m = Py_TYPE(obj)->tp_as_sequence;\n-    if (unlikely(!(m && m->sq_item))) {\n-        PyErr_Format(PyExc_TypeError, \"'%.200s' object is not subscriptable\", Py_TYPE(obj)->tp_name);\n-        return NULL;\n-    }\n-\n-    key_value = __Pyx_PyIndex_AsSsize_t(index);\n-    if (likely(key_value != -1 || !(runerr = PyErr_Occurred()))) {\n-        return __Pyx_GetItemInt_Fast(obj, key_value, 0, 1, 1);\n+static PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* key) {\n+    PyTypeObject* tp = Py_TYPE(obj);\n+    PyMappingMethods *mm = tp->tp_as_mapping;\n+    if (likely(mm && mm->mp_subscript)) {\n+        return mm->mp_subscript(obj, key);\n+    }\n+\n+    PySequenceMethods *sm = tp->tp_as_sequence;\n+    if (likely(sm && sm->sq_item)) {\n+        PyObject *runerr;\n+        Py_ssize_t key_value;\n+        key_value = __Pyx_PyIndex_AsSsize_t(key);\n+        if (likely(key_value != -1 || !(runerr = PyErr_Occurred()))) {\n+            return __Pyx_GetItemInt_Fast(obj, key_value, 0, 1, 1);\n+        }\n+        if (PyErr_GivenExceptionMatches(runerr, PyExc_OverflowError)) {\n+            PyErr_Clear();\n+            PyErr_Format(PyExc_IndexError, \"cannot fit '%.200s' into an index-sized integer\", Py_TYPE(key)->tp_name);\n+        }\n+        return NULL; \n+    }\n+    \n+#if PY_VERSION_HEX >= 0x03070000\n+    if (likely(PyType_Check(obj))) {\n+        PyObject *meth;\n+        _Py_IDENTIFIER(__class_getitem__);\n+        if (_PyObject_LookupAttrId(obj, &PyId___class_getitem__, &meth) < 0) {\n+            return NULL;\n+        }\n+        if (meth) {\n+            PyObject *result = __Pyx_PyObject_FastCall(meth, &key, 1);",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r409107774",
            "id": 409107774,
            "in_reply_to_id": 409073293,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTEwNzc3NA==",
            "original_commit_id": "5c194be5c535c12231fa48b3cb60ef4eda90d35f",
            "original_line": 315,
            "original_position": 46,
            "original_start_line": null,
            "path": "Cython/Utility/ObjectHandling.c",
            "position": null,
            "pull_request_review_id": 394098587,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/409107774",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/771072?v=4",
                "events_url": "https://api.github.com/users/msg555/events{/privacy}",
                "followers_url": "https://api.github.com/users/msg555/followers",
                "following_url": "https://api.github.com/users/msg555/following{/other_user}",
                "gists_url": "https://api.github.com/users/msg555/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/msg555",
                "id": 771072,
                "login": "msg555",
                "node_id": "MDQ6VXNlcjc3MTA3Mg==",
                "organizations_url": "https://api.github.com/users/msg555/orgs",
                "received_events_url": "https://api.github.com/users/msg555/received_events",
                "repos_url": "https://api.github.com/users/msg555/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/msg555/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/msg555/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/msg555"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r409108288"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/409108288"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Yeah, this is verbatim from CPython. I'll look closer at what's really needed later today",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-15T20:17:25Z",
            "diff_hunk": "@@ -0,0 +1,288 @@\n+### COPIED FROM CPython 3.7\n+# cython: language_level=3\n+import unittest\n+from test import support\n+\n+\n+class TestMROEntry(unittest.TestCase):\n+    def test_mro_entry_signature(self):\n+        tested = []\n+        class B: ...\n+        class C:\n+            def __mro_entries__(self, *args, **kwargs):\n+                tested.extend([args, kwargs])\n+                return (C,)\n+        c = C()\n+        self.assertEqual(tested, [])\n+        class D(B, c): ...\n+        self.assertEqual(tested[0], ((B, c),))\n+        self.assertEqual(tested[1], {})\n+\n+    def test_mro_entry(self):\n+        tested = []\n+        class A: ...\n+        class B: ...\n+        class C:\n+            def __mro_entries__(self, bases):\n+                tested.append(bases)\n+                return (self.__class__,)\n+        c = C()\n+        self.assertEqual(tested, [])\n+        class D(A, c, B): ...\n+        self.assertEqual(tested[-1], (A, c, B))\n+        self.assertEqual(D.__bases__, (A, C, B))\n+        self.assertEqual(D.__orig_bases__, (A, c, B))\n+        self.assertEqual(D.__mro__, (D, A, C, B, object))\n+        d = D()\n+        class E(d): ...\n+        self.assertEqual(tested[-1], (d,))\n+        self.assertEqual(E.__bases__, (D,))\n+\n+    def test_mro_entry_none(self):\n+        tested = []\n+        class A: ...\n+        class B: ...\n+        class C:\n+            def __mro_entries__(self, bases):\n+                tested.append(bases)\n+                return ()\n+        c = C()\n+        self.assertEqual(tested, [])\n+        class D(A, c, B): ...\n+        self.assertEqual(tested[-1], (A, c, B))\n+        self.assertEqual(D.__bases__, (A, B))\n+        self.assertEqual(D.__orig_bases__, (A, c, B))\n+        self.assertEqual(D.__mro__, (D, A, B, object))\n+        class E(c): ...\n+        self.assertEqual(tested[-1], (c,))\n+        self.assertEqual(E.__bases__, (object,))\n+        self.assertEqual(E.__orig_bases__, (c,))\n+        self.assertEqual(E.__mro__, (E, object))\n+\n+    def test_mro_entry_with_builtins(self):\n+        tested = []\n+        class A: ...\n+        class C:\n+            def __mro_entries__(self, bases):\n+                tested.append(bases)\n+                return (dict,)\n+        c = C()\n+        self.assertEqual(tested, [])\n+        class D(A, c): ...\n+        self.assertEqual(tested[-1], (A, c))\n+        self.assertEqual(D.__bases__, (A, dict))\n+        self.assertEqual(D.__orig_bases__, (A, c))\n+        self.assertEqual(D.__mro__, (D, A, dict, object))\n+\n+    def test_mro_entry_with_builtins_2(self):\n+        tested = []\n+        class C:\n+            def __mro_entries__(self, bases):\n+                tested.append(bases)\n+                return (C,)\n+        c = C()\n+        self.assertEqual(tested, [])\n+        class D(c, dict): ...\n+        self.assertEqual(tested[-1], (c, dict))\n+        self.assertEqual(D.__bases__, (C, dict))\n+        self.assertEqual(D.__orig_bases__, (c, dict))\n+        self.assertEqual(D.__mro__, (D, C, dict, object))\n+\n+    def test_mro_entry_errors(self):\n+        class C_too_many:\n+            def __mro_entries__(self, bases, something, other):\n+                return ()\n+        c = C_too_many()\n+        with self.assertRaises(TypeError):\n+            class D(c): ...\n+        class C_too_few:\n+            def __mro_entries__(self):\n+                return ()\n+        d = C_too_few()\n+        with self.assertRaises(TypeError):\n+            class D(d): ...\n+\n+    def test_mro_entry_errors_2(self):\n+        class C_not_callable:\n+            __mro_entries__ = \"Surprise!\"\n+        c = C_not_callable()\n+        with self.assertRaises(TypeError):\n+            class D(c): ...\n+        class C_not_tuple:\n+            def __mro_entries__(self):\n+                return object\n+        c = C_not_tuple()\n+        with self.assertRaises(TypeError):\n+            class D(c): ...\n+\n+    def test_mro_entry_metaclass(self):\n+        meta_args = []\n+        class Meta(type):\n+            def __new__(mcls, name, bases, ns):\n+                meta_args.extend([mcls, name, bases, ns])\n+                return super().__new__(mcls, name, bases, ns)\n+        class A: ...\n+        class C:\n+            def __mro_entries__(self, bases):\n+                return (A,)\n+        c = C()\n+        class D(c, metaclass=Meta):\n+            x = 1\n+        self.assertEqual(meta_args[0], Meta)\n+        self.assertEqual(meta_args[1], 'D')\n+        self.assertEqual(meta_args[2], (A,))\n+        self.assertEqual(meta_args[3]['x'], 1)\n+        self.assertEqual(D.__bases__, (A,))\n+        self.assertEqual(D.__orig_bases__, (c,))\n+        self.assertEqual(D.__mro__, (D, A, object))\n+        self.assertEqual(D.__class__, Meta)\n+\n+    def test_mro_entry_type_call(self):\n+        # Substitution should _not_ happen in direct type call\n+        class C:\n+            def __mro_entries__(self, bases):\n+                return ()\n+        c = C()\n+        with self.assertRaisesRegex(TypeError,\n+                                    \"MRO entry resolution; \"\n+                                    \"use types.new_class()\"):\n+            type('Bad', (c,), {})\n+\n+\n+class TestClassGetitem(unittest.TestCase):\n+    def test_class_getitem(self):\n+        getitem_args = []\n+        class C:\n+            def __class_getitem__(*args, **kwargs):\n+                getitem_args.extend([args, kwargs])\n+                return None\n+        C[int, str]\n+        self.assertEqual(getitem_args[0], (C, (int, str)))\n+        self.assertEqual(getitem_args[1], {})\n+\n+    def test_class_getitem_format(self):\n+        class C:\n+            def __class_getitem__(cls, item):\n+                return f'C[{item.__name__}]'\n+        self.assertEqual(C[int], 'C[int]')\n+        self.assertEqual(C[C], 'C[C]')\n+\n+    def test_class_getitem_inheritance(self):\n+        class C:\n+            def __class_getitem__(cls, item):\n+                return f'{cls.__name__}[{item.__name__}]'\n+        class D(C): ...\n+        self.assertEqual(D[int], 'D[int]')\n+        self.assertEqual(D[D], 'D[D]')\n+\n+    def test_class_getitem_inheritance_2(self):\n+        class C:\n+            def __class_getitem__(cls, item):\n+                return 'Should not see this'\n+        class D(C):\n+            def __class_getitem__(cls, item):\n+                return f'{cls.__name__}[{item.__name__}]'\n+        self.assertEqual(D[int], 'D[int]')\n+        self.assertEqual(D[D], 'D[D]')\n+\n+    def test_class_getitem_classmethod(self):\n+        class C:\n+            @classmethod\n+            def __class_getitem__(cls, item):\n+                return f'{cls.__name__}[{item.__name__}]'\n+        class D(C): ...\n+        self.assertEqual(D[int], 'D[int]')\n+        self.assertEqual(D[D], 'D[D]')\n+\n+    def test_class_getitem_patched(self):\n+        class C:\n+            def __init_subclass__(cls):\n+                def __class_getitem__(cls, item):\n+                    return f'{cls.__name__}[{item.__name__}]'\n+                cls.__class_getitem__ = classmethod(__class_getitem__)\n+        class D(C): ...\n+        self.assertEqual(D[int], 'D[int]')\n+        self.assertEqual(D[D], 'D[D]')\n+\n+    def test_class_getitem_with_builtins(self):\n+        class A(dict):\n+            called_with = None\n+\n+            def __class_getitem__(cls, item):\n+                cls.called_with = item\n+        class B(A):\n+            pass\n+        self.assertIs(B.called_with, None)\n+        B[int]\n+        self.assertIs(B.called_with, int)\n+\n+    def test_class_getitem_errors(self):\n+        class C_too_few:\n+            def __class_getitem__(cls):\n+                return None\n+        with self.assertRaises(TypeError):\n+            C_too_few[int]\n+        class C_too_many:\n+            def __class_getitem__(cls, one, two):\n+                return None\n+        with self.assertRaises(TypeError):\n+            C_too_many[int]\n+\n+    def test_class_getitem_errors_2(self):\n+        class C:\n+            def __class_getitem__(cls, item):\n+                return None\n+        with self.assertRaises(TypeError):\n+            C()[int]\n+        class E: ...\n+        e = E()\n+        e.__class_getitem__ = lambda cls, item: 'This will not work'\n+        with self.assertRaises(TypeError):\n+            e[int]\n+        class C_not_callable:\n+            __class_getitem__ = \"Surprise!\"\n+        with self.assertRaises(TypeError):\n+            C_not_callable[int]\n+\n+    def test_class_getitem_metaclass(self):\n+        class Meta(type):\n+            def __class_getitem__(cls, item):\n+                return f'{cls.__name__}[{item.__name__}]'\n+        self.assertEqual(Meta[int], 'Meta[int]')\n+\n+    def test_class_getitem_with_metaclass(self):\n+        class Meta(type): pass\n+        class C(metaclass=Meta):\n+            def __class_getitem__(cls, item):\n+                return f'{cls.__name__}[{item.__name__}]'\n+        self.assertEqual(C[int], 'C[int]')\n+\n+    def test_class_getitem_metaclass_first(self):\n+        class Meta(type):\n+            def __getitem__(cls, item):\n+                return 'from metaclass'\n+        class C(metaclass=Meta):\n+            def __class_getitem__(cls, item):\n+                return 'from __class_getitem__'\n+        self.assertEqual(C[int], 'from metaclass')\n+\n+\n+@support.cpython_only",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r409108288",
            "id": 409108288,
            "in_reply_to_id": 409055894,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTEwODI4OA==",
            "original_commit_id": "5c194be5c535c12231fa48b3cb60ef4eda90d35f",
            "original_line": 270,
            "original_position": 270,
            "original_start_line": null,
            "path": "tests/run/test_genericclass.py",
            "position": null,
            "pull_request_review_id": 394098587,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/409108288",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/771072?v=4",
                "events_url": "https://api.github.com/users/msg555/events{/privacy}",
                "followers_url": "https://api.github.com/users/msg555/followers",
                "following_url": "https://api.github.com/users/msg555/following{/other_user}",
                "gists_url": "https://api.github.com/users/msg555/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/msg555",
                "id": 771072,
                "login": "msg555",
                "node_id": "MDQ6VXNlcjc3MTA3Mg==",
                "organizations_url": "https://api.github.com/users/msg555/orgs",
                "received_events_url": "https://api.github.com/users/msg555/received_events",
                "repos_url": "https://api.github.com/users/msg555/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/msg555/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/msg555/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/msg555"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r409109549"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/409109549"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Okay, I'll split that back out and then have the __class_getitem__ into its own function as well to better support inlining.",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-15T20:19:53Z",
            "diff_hunk": "@@ -282,35 +282,46 @@ static CYTHON_INLINE PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* k\n // //@requires: GetItemInt - added in IndexNode as it uses templating.\n \n #if CYTHON_USE_TYPE_SLOTS\n-static PyObject *__Pyx_PyObject_GetIndex(PyObject *obj, PyObject* index) {\n-    PyObject *runerr;\n-    Py_ssize_t key_value;\n-    PySequenceMethods *m = Py_TYPE(obj)->tp_as_sequence;\n-    if (unlikely(!(m && m->sq_item))) {\n-        PyErr_Format(PyExc_TypeError, \"'%.200s' object is not subscriptable\", Py_TYPE(obj)->tp_name);\n-        return NULL;\n-    }\n-\n-    key_value = __Pyx_PyIndex_AsSsize_t(index);\n-    if (likely(key_value != -1 || !(runerr = PyErr_Occurred()))) {\n-        return __Pyx_GetItemInt_Fast(obj, key_value, 0, 1, 1);\n+static PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* key) {\n+    PyTypeObject* tp = Py_TYPE(obj);\n+    PyMappingMethods *mm = tp->tp_as_mapping;\n+    if (likely(mm && mm->mp_subscript)) {\n+        return mm->mp_subscript(obj, key);\n+    }",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r409109549",
            "id": 409109549,
            "in_reply_to_id": 409063518,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTEwOTU0OQ==",
            "original_commit_id": "5c194be5c535c12231fa48b3cb60ef4eda90d35f",
            "original_line": 324,
            "original_position": 21,
            "original_start_line": 285,
            "path": "Cython/Utility/ObjectHandling.c",
            "position": null,
            "pull_request_review_id": 394098587,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/409109549",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/771072?v=4",
                "events_url": "https://api.github.com/users/msg555/events{/privacy}",
                "followers_url": "https://api.github.com/users/msg555/followers",
                "following_url": "https://api.github.com/users/msg555/following{/other_user}",
                "gists_url": "https://api.github.com/users/msg555/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/msg555",
                "id": 771072,
                "login": "msg555",
                "node_id": "MDQ6VXNlcjc3MTA3Mg==",
                "organizations_url": "https://api.github.com/users/msg555/orgs",
                "received_events_url": "https://api.github.com/users/msg555/received_events",
                "repos_url": "https://api.github.com/users/msg555/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/msg555/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/msg555/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/msg555"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r409257976"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/409257976"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Open to suggestions on a better place for these definitions to exist and/or better way to express this.",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-16T03:22:32Z",
            "diff_hunk": "@@ -39,6 +39,13 @@\n     _py_int_types = (int, long)\n \n \n+IMPLICIT_CLASSMETHODS = set()\n+if sys.version_info[0:2] >= (3, 6):\n+    IMPLICIT_CLASSMETHODS.add(\"__init_subclass__\")\n+if sys.version_info[0:2] >= (3, 7):\n+    IMPLICIT_CLASSMETHODS.add(\"__class_getitem__\")",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r409257976",
            "id": 409257976,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTI1Nzk3Ng==",
            "original_commit_id": "9b2870ed8e5a1bc4df513bbacfb1e7d73b3b9373",
            "original_line": 46,
            "original_position": 8,
            "original_start_line": null,
            "path": "Cython/Compiler/Nodes.py",
            "position": null,
            "pull_request_review_id": 394273053,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/409257976",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/771072?v=4",
                "events_url": "https://api.github.com/users/msg555/events{/privacy}",
                "followers_url": "https://api.github.com/users/msg555/followers",
                "following_url": "https://api.github.com/users/msg555/following{/other_user}",
                "gists_url": "https://api.github.com/users/msg555/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/msg555",
                "id": 771072,
                "login": "msg555",
                "node_id": "MDQ6VXNlcjc3MTA3Mg==",
                "organizations_url": "https://api.github.com/users/msg555/orgs",
                "received_events_url": "https://api.github.com/users/msg555/received_events",
                "repos_url": "https://api.github.com/users/msg555/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/msg555/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/msg555/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/msg555"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r409263420"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/409263420"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Added a comment now that I've put the function back. It does look like it won't crash even if were called on a non-sequence type but there is indeed no other caller at the moment so not sure how much it matters in either case.",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-16T03:44:03Z",
            "diff_hunk": "@@ -285,11 +285,6 @@ static CYTHON_INLINE PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* k\n static PyObject *__Pyx_PyObject_GetIndex(PyObject *obj, PyObject* index) {\n     PyObject *runerr;\n     Py_ssize_t key_value;\n-    PySequenceMethods *m = Py_TYPE(obj)->tp_as_sequence;\n-    if (unlikely(!(m && m->sq_item))) {\n-        PyErr_Format(PyExc_TypeError, \"'%.200s' object is not subscriptable\", Py_TYPE(obj)->tp_name);\n-        return NULL;\n-    }",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r409263420",
            "id": 409263420,
            "in_reply_to_id": 408629211,
            "line": 292,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTI2MzQyMA==",
            "original_commit_id": "3a61c02cb770e33272d19bbcc2963a5d905314c3",
            "original_line": 292,
            "original_position": 8,
            "original_start_line": null,
            "path": "Cython/Utility/ObjectHandling.c",
            "position": 25,
            "pull_request_review_id": 394273053,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "LEFT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/409263420",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/771072?v=4",
                "events_url": "https://api.github.com/users/msg555/events{/privacy}",
                "followers_url": "https://api.github.com/users/msg555/followers",
                "following_url": "https://api.github.com/users/msg555/following{/other_user}",
                "gists_url": "https://api.github.com/users/msg555/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/msg555",
                "id": 771072,
                "login": "msg555",
                "node_id": "MDQ6VXNlcjc3MTA3Mg==",
                "organizations_url": "https://api.github.com/users/msg555/orgs",
                "received_events_url": "https://api.github.com/users/msg555/received_events",
                "repos_url": "https://api.github.com/users/msg555/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/msg555/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/msg555/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/msg555"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r409263542"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/409263542"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Removed MRO tests, probably should add a note about this",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-16T03:44:37Z",
            "diff_hunk": "@@ -0,0 +1,128 @@\n+# mode: run\n+# tag: pure3.7\n+\n+# COPIED FROM CPython 3.7",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r409263542",
            "id": 409263542,
            "line": 5,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTI2MzU0Mg==",
            "original_commit_id": "2db6125d162b46bcea1639fd037b949d34e275e2",
            "original_line": 4,
            "original_position": 4,
            "original_start_line": null,
            "path": "tests/run/test_genericclass.py",
            "position": 5,
            "pull_request_review_id": 394273053,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/409263542",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/771072?v=4",
                "events_url": "https://api.github.com/users/msg555/events{/privacy}",
                "followers_url": "https://api.github.com/users/msg555/followers",
                "following_url": "https://api.github.com/users/msg555/following{/other_user}",
                "gists_url": "https://api.github.com/users/msg555/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/msg555",
                "id": 771072,
                "login": "msg555",
                "node_id": "MDQ6VXNlcjc3MTA3Mg==",
                "organizations_url": "https://api.github.com/users/msg555/orgs",
                "received_events_url": "https://api.github.com/users/msg555/received_events",
                "repos_url": "https://api.github.com/users/msg555/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/msg555/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/msg555/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/msg555"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r409323993"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/409323993"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "This is definitely the wrong way to check the version of Python - the version used to run Cython isn't necessarily the same as the version of Python the code will run in.\r\n\r\nI still don't think this needs version checks - there's no harm in supporting this even on Python 2.7. Nobody should be using these attributes for anything else since I'm fairly sure Python reserves all unused special method names for its own use.",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-16T06:58:28Z",
            "diff_hunk": "@@ -39,6 +39,13 @@\n     _py_int_types = (int, long)\n \n \n+IMPLICIT_CLASSMETHODS = set()\n+if sys.version_info[0:2] >= (3, 6):\n+    IMPLICIT_CLASSMETHODS.add(\"__init_subclass__\")\n+if sys.version_info[0:2] >= (3, 7):\n+    IMPLICIT_CLASSMETHODS.add(\"__class_getitem__\")",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r409323993",
            "id": 409323993,
            "in_reply_to_id": 409257976,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTMyMzk5Mw==",
            "original_commit_id": "9b2870ed8e5a1bc4df513bbacfb1e7d73b3b9373",
            "original_line": 46,
            "original_position": 8,
            "original_start_line": null,
            "path": "Cython/Compiler/Nodes.py",
            "position": null,
            "pull_request_review_id": 394346685,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/409323993",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r409325363"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/409325363"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "I'd still be slightly worried that removing `if (m && m->sq_item)` means that the whole of `__Pyx_GetItemInt_Fast` gets inlined and not just smaller one path from it. I'm not certain though so definitely don't change anything because I say so. @scoder this might be worth a closer look?",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-16T07:01:28Z",
            "diff_hunk": "@@ -285,11 +285,6 @@ static CYTHON_INLINE PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* k\n static PyObject *__Pyx_PyObject_GetIndex(PyObject *obj, PyObject* index) {\n     PyObject *runerr;\n     Py_ssize_t key_value;\n-    PySequenceMethods *m = Py_TYPE(obj)->tp_as_sequence;\n-    if (unlikely(!(m && m->sq_item))) {\n-        PyErr_Format(PyExc_TypeError, \"'%.200s' object is not subscriptable\", Py_TYPE(obj)->tp_name);\n-        return NULL;\n-    }",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r409325363",
            "id": 409325363,
            "in_reply_to_id": 408629211,
            "line": 292,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTMyNTM2Mw==",
            "original_commit_id": "3a61c02cb770e33272d19bbcc2963a5d905314c3",
            "original_line": 292,
            "original_position": 8,
            "original_start_line": null,
            "path": "Cython/Utility/ObjectHandling.c",
            "position": 25,
            "pull_request_review_id": 394348416,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "LEFT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/409325363",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r409369919"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/409369919"
                }
            },
            "author_association": "MEMBER",
            "body": "Accidental change.",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-16T08:20:15Z",
            "diff_hunk": "@@ -280,36 +280,49 @@ static CYTHON_INLINE PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* k\n \n /////////////// ObjectGetItem ///////////////\n // //@requires: GetItemInt - added in IndexNode as it uses templating.\n+//@requires: ObjectHandling.c::PyObjectGetAttrStr\n+//@requires: PyObjectCallOneArg\n \n #if CYTHON_USE_TYPE_SLOTS\n static PyObject *__Pyx_PyObject_GetIndex(PyObject *obj, PyObject* index) {\n+    // Get element from sequence object `obj` at index `index`.\n     PyObject *runerr;\n     Py_ssize_t key_value;\n-    PySequenceMethods *m = Py_TYPE(obj)->tp_as_sequence;\n-    if (unlikely(!(m && m->sq_item))) {\n-        PyErr_Format(PyExc_TypeError, \"'%.200s' object is not subscriptable\", Py_TYPE(obj)->tp_name);\n-        return NULL;\n-    }\n-\n     key_value = __Pyx_PyIndex_AsSsize_t(index);\n     if (likely(key_value != -1 || !(runerr = PyErr_Occurred()))) {\n         return __Pyx_GetItemInt_Fast(obj, key_value, 0, 1, 1);\n     }\n-\n-    // Error handling code -- only manage OverflowError differently.\n     if (PyErr_GivenExceptionMatches(runerr, PyExc_OverflowError)) {\n         PyErr_Clear();\n         PyErr_Format(PyExc_IndexError, \"cannot fit '%.200s' into an index-sized integer\", Py_TYPE(index)->tp_name);\n     }\n-    return NULL;\n+    return NULL; ",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r409369919",
            "id": 409369919,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTM2OTkxOQ==",
            "original_commit_id": "2db6125d162b46bcea1639fd037b949d34e275e2",
            "original_line": 299,
            "original_position": 29,
            "original_start_line": 304,
            "path": "Cython/Utility/ObjectHandling.c",
            "position": null,
            "pull_request_review_id": 394402097,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": "LEFT",
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/409369919",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r409377421"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/409377421"
                }
            },
            "author_association": "MEMBER",
            "body": "I just noticed that this may raise `AttributeError`, which the `_PyObject_LookupAttr()` in the original code does not. There's a `__Pyx_PyObject_GetAttrStrNoError()` for that purpose.  And we should make sure this is covered by tests.",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-16T08:31:42Z",
            "diff_hunk": "@@ -280,36 +280,49 @@ static CYTHON_INLINE PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* k\n \n /////////////// ObjectGetItem ///////////////\n // //@requires: GetItemInt - added in IndexNode as it uses templating.\n+//@requires: ObjectHandling.c::PyObjectGetAttrStr\n+//@requires: PyObjectCallOneArg\n \n #if CYTHON_USE_TYPE_SLOTS\n static PyObject *__Pyx_PyObject_GetIndex(PyObject *obj, PyObject* index) {\n+    // Get element from sequence object `obj` at index `index`.\n     PyObject *runerr;\n     Py_ssize_t key_value;\n-    PySequenceMethods *m = Py_TYPE(obj)->tp_as_sequence;\n-    if (unlikely(!(m && m->sq_item))) {\n-        PyErr_Format(PyExc_TypeError, \"'%.200s' object is not subscriptable\", Py_TYPE(obj)->tp_name);\n-        return NULL;\n-    }\n-\n     key_value = __Pyx_PyIndex_AsSsize_t(index);\n     if (likely(key_value != -1 || !(runerr = PyErr_Occurred()))) {\n         return __Pyx_GetItemInt_Fast(obj, key_value, 0, 1, 1);\n     }\n-\n-    // Error handling code -- only manage OverflowError differently.\n     if (PyErr_GivenExceptionMatches(runerr, PyExc_OverflowError)) {\n         PyErr_Clear();\n         PyErr_Format(PyExc_IndexError, \"cannot fit '%.200s' into an index-sized integer\", Py_TYPE(index)->tp_name);\n     }\n-    return NULL;\n+    return NULL; \n }\n-\n static PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* key) {\n-    PyMappingMethods *m = Py_TYPE(obj)->tp_as_mapping;\n-    if (likely(m && m->mp_subscript)) {\n-        return m->mp_subscript(obj, key);\n+    PyTypeObject* tp = Py_TYPE(obj);\n+    PyMappingMethods *mm = tp->tp_as_mapping;\n+    if (likely(mm && mm->mp_subscript)) {\n+        return mm->mp_subscript(obj, key);\n+    }\n+\n+    PySequenceMethods *sm = tp->tp_as_sequence;\n+    if (likely(sm && sm->sq_item)) {\n+        return __Pyx_PyObject_GetIndex(obj, key);\n+    }\n+    \n+#if PY_VERSION_HEX >= 0x03070000\n+    if (likely(PyType_Check(obj))) {\n+        PyObject *meth = __Pyx_PyObject_GetAttrStr(obj, PYIDENT(\"__class_getitem__\"));",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r409377421",
            "id": 409377421,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTM3NzQyMQ==",
            "original_commit_id": "2db6125d162b46bcea1639fd037b949d34e275e2",
            "original_line": 315,
            "original_position": 49,
            "original_start_line": null,
            "path": "Cython/Utility/ObjectHandling.c",
            "position": null,
            "pull_request_review_id": 394402097,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/409377421",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r409380927"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/409380927"
                }
            },
            "author_association": "MEMBER",
            "body": "I think it's ok to add the first two slot tests to the fast path function, but this third case really is 100% not performance critical. I would extract this together with the exception case below into a separate function, and then just call that here.\r\n\r\nBasically, the fast-path is:\r\n- go through the `mp_subscript` slot directly, if available, since we already have it in our hands.\r\n- jump to a fast utility function if `sq_item` is available\r\n- fall back to some generic function that handles the remaining cases.\r\n\r\nA C compiler would turn all of this into a fairly short sequence of CPU instructions, and the `likely()` branch hints will allow it to move the final slow path far out of the way, if it considers that helpful.",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-16T08:37:16Z",
            "diff_hunk": "@@ -280,36 +280,49 @@ static CYTHON_INLINE PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* k\n \n /////////////// ObjectGetItem ///////////////\n // //@requires: GetItemInt - added in IndexNode as it uses templating.\n+//@requires: ObjectHandling.c::PyObjectGetAttrStr\n+//@requires: PyObjectCallOneArg\n \n #if CYTHON_USE_TYPE_SLOTS\n static PyObject *__Pyx_PyObject_GetIndex(PyObject *obj, PyObject* index) {\n+    // Get element from sequence object `obj` at index `index`.\n     PyObject *runerr;\n     Py_ssize_t key_value;\n-    PySequenceMethods *m = Py_TYPE(obj)->tp_as_sequence;\n-    if (unlikely(!(m && m->sq_item))) {\n-        PyErr_Format(PyExc_TypeError, \"'%.200s' object is not subscriptable\", Py_TYPE(obj)->tp_name);\n-        return NULL;\n-    }\n-\n     key_value = __Pyx_PyIndex_AsSsize_t(index);\n     if (likely(key_value != -1 || !(runerr = PyErr_Occurred()))) {\n         return __Pyx_GetItemInt_Fast(obj, key_value, 0, 1, 1);\n     }\n-\n-    // Error handling code -- only manage OverflowError differently.\n     if (PyErr_GivenExceptionMatches(runerr, PyExc_OverflowError)) {\n         PyErr_Clear();\n         PyErr_Format(PyExc_IndexError, \"cannot fit '%.200s' into an index-sized integer\", Py_TYPE(index)->tp_name);\n     }\n-    return NULL;\n+    return NULL; \n }\n-\n static PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* key) {\n-    PyMappingMethods *m = Py_TYPE(obj)->tp_as_mapping;\n-    if (likely(m && m->mp_subscript)) {\n-        return m->mp_subscript(obj, key);\n+    PyTypeObject* tp = Py_TYPE(obj);\n+    PyMappingMethods *mm = tp->tp_as_mapping;\n+    if (likely(mm && mm->mp_subscript)) {\n+        return mm->mp_subscript(obj, key);\n+    }\n+\n+    PySequenceMethods *sm = tp->tp_as_sequence;\n+    if (likely(sm && sm->sq_item)) {\n+        return __Pyx_PyObject_GetIndex(obj, key);\n+    }\n+    \n+#if PY_VERSION_HEX >= 0x03070000\n+    if (likely(PyType_Check(obj))) {",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r409380927",
            "id": 409380927,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTM4MDkyNw==",
            "original_commit_id": "2db6125d162b46bcea1639fd037b949d34e275e2",
            "original_line": 306,
            "original_position": 48,
            "original_start_line": 313,
            "path": "Cython/Utility/ObjectHandling.c",
            "position": null,
            "pull_request_review_id": 394402097,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/409380927",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r409750667"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/409750667"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "True, I'll add a test to test behavior when `__class_getitem__` does not exist however even with the current implementation it still later raises a TypeError which I guess overwrites the AttributeError. I'll update to use the suggested method, though.",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-16T18:05:58Z",
            "diff_hunk": "@@ -280,36 +280,49 @@ static CYTHON_INLINE PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* k\n \n /////////////// ObjectGetItem ///////////////\n // //@requires: GetItemInt - added in IndexNode as it uses templating.\n+//@requires: ObjectHandling.c::PyObjectGetAttrStr\n+//@requires: PyObjectCallOneArg\n \n #if CYTHON_USE_TYPE_SLOTS\n static PyObject *__Pyx_PyObject_GetIndex(PyObject *obj, PyObject* index) {\n+    // Get element from sequence object `obj` at index `index`.\n     PyObject *runerr;\n     Py_ssize_t key_value;\n-    PySequenceMethods *m = Py_TYPE(obj)->tp_as_sequence;\n-    if (unlikely(!(m && m->sq_item))) {\n-        PyErr_Format(PyExc_TypeError, \"'%.200s' object is not subscriptable\", Py_TYPE(obj)->tp_name);\n-        return NULL;\n-    }\n-\n     key_value = __Pyx_PyIndex_AsSsize_t(index);\n     if (likely(key_value != -1 || !(runerr = PyErr_Occurred()))) {\n         return __Pyx_GetItemInt_Fast(obj, key_value, 0, 1, 1);\n     }\n-\n-    // Error handling code -- only manage OverflowError differently.\n     if (PyErr_GivenExceptionMatches(runerr, PyExc_OverflowError)) {\n         PyErr_Clear();\n         PyErr_Format(PyExc_IndexError, \"cannot fit '%.200s' into an index-sized integer\", Py_TYPE(index)->tp_name);\n     }\n-    return NULL;\n+    return NULL; \n }\n-\n static PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* key) {\n-    PyMappingMethods *m = Py_TYPE(obj)->tp_as_mapping;\n-    if (likely(m && m->mp_subscript)) {\n-        return m->mp_subscript(obj, key);\n+    PyTypeObject* tp = Py_TYPE(obj);\n+    PyMappingMethods *mm = tp->tp_as_mapping;\n+    if (likely(mm && mm->mp_subscript)) {\n+        return mm->mp_subscript(obj, key);\n+    }\n+\n+    PySequenceMethods *sm = tp->tp_as_sequence;\n+    if (likely(sm && sm->sq_item)) {\n+        return __Pyx_PyObject_GetIndex(obj, key);\n+    }\n+    \n+#if PY_VERSION_HEX >= 0x03070000\n+    if (likely(PyType_Check(obj))) {\n+        PyObject *meth = __Pyx_PyObject_GetAttrStr(obj, PYIDENT(\"__class_getitem__\"));",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r409750667",
            "id": 409750667,
            "in_reply_to_id": 409377421,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTc1MDY2Nw==",
            "original_commit_id": "2db6125d162b46bcea1639fd037b949d34e275e2",
            "original_line": 315,
            "original_position": 49,
            "original_start_line": null,
            "path": "Cython/Utility/ObjectHandling.c",
            "position": null,
            "pull_request_review_id": 394877981,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/409750667",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/771072?v=4",
                "events_url": "https://api.github.com/users/msg555/events{/privacy}",
                "followers_url": "https://api.github.com/users/msg555/followers",
                "following_url": "https://api.github.com/users/msg555/following{/other_user}",
                "gists_url": "https://api.github.com/users/msg555/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/msg555",
                "id": 771072,
                "login": "msg555",
                "node_id": "MDQ6VXNlcjc3MTA3Mg==",
                "organizations_url": "https://api.github.com/users/msg555/orgs",
                "received_events_url": "https://api.github.com/users/msg555/received_events",
                "repos_url": "https://api.github.com/users/msg555/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/msg555/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/msg555/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/msg555"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r409763311"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/409763311"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "probably cleaner to use the context manager form",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-16T18:27:32Z",
            "diff_hunk": "@@ -0,0 +1,135 @@\n+# mode: run\n+# tag: pure3.7\n+\n+# COPIED FROM CPython 3.7\n+\n+import unittest\n+\n+\n+class TestClassGetitem(unittest.TestCase):\n+    # BEGIN - Additional tests from cython\n+    def test_no_class_getitem(self):\n+        class C: ...\n+        self.assertRaises(TypeError, lambda: C[int])",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r409763311",
            "id": 409763311,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTc2MzMxMQ==",
            "original_commit_id": "223f8ca84df66931a6652e8a8d70167765087c63",
            "original_line": 13,
            "original_position": 13,
            "original_start_line": null,
            "path": "tests/run/test_genericclass.py",
            "position": null,
            "pull_request_review_id": 394893526,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/409763311",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/771072?v=4",
                "events_url": "https://api.github.com/users/msg555/events{/privacy}",
                "followers_url": "https://api.github.com/users/msg555/followers",
                "following_url": "https://api.github.com/users/msg555/following{/other_user}",
                "gists_url": "https://api.github.com/users/msg555/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/msg555",
                "id": 771072,
                "login": "msg555",
                "node_id": "MDQ6VXNlcjc3MTA3Mg==",
                "organizations_url": "https://api.github.com/users/msg555/orgs",
                "received_events_url": "https://api.github.com/users/msg555/received_events",
                "repos_url": "https://api.github.com/users/msg555/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/msg555/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/msg555/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/msg555"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r410516535"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/410516535"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Looks like I'm failing CI from this test on python versions <3.7. Any idea what might be wrong here @da-woods?",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-17T23:42:31Z",
            "diff_hunk": "@@ -0,0 +1,135 @@\n+# mode: run\n+# tag: pure3.7",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r410516535",
            "id": 410516535,
            "line": 2,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDUxNjUzNQ==",
            "original_commit_id": "223f8ca84df66931a6652e8a8d70167765087c63",
            "original_line": 2,
            "original_position": 2,
            "original_start_line": null,
            "path": "tests/run/test_genericclass.py",
            "position": 2,
            "pull_request_review_id": 395827445,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/410516535",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/771072?v=4",
                "events_url": "https://api.github.com/users/msg555/events{/privacy}",
                "followers_url": "https://api.github.com/users/msg555/followers",
                "following_url": "https://api.github.com/users/msg555/following{/other_user}",
                "gists_url": "https://api.github.com/users/msg555/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/msg555",
                "id": 771072,
                "login": "msg555",
                "node_id": "MDQ6VXNlcjc3MTA3Mg==",
                "organizations_url": "https://api.github.com/users/msg555/orgs",
                "received_events_url": "https://api.github.com/users/msg555/received_events",
                "repos_url": "https://api.github.com/users/msg555/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/msg555/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/msg555/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/msg555"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r410659940"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/410659940"
                }
            },
            "author_association": "MEMBER",
            "body": "In Py2, the classes are old-style classes, not types. Let them inherit from `(object)`.\r\n\r\nAnd the `_patched` test depends on the `__init_subclass__` protocol, which is Py3.6+, it seems. You can disable it in Py<3.5 with a `@skipIf()` decorator.",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-18T07:03:15Z",
            "diff_hunk": "@@ -0,0 +1,135 @@\n+# mode: run\n+# tag: pure3.7",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r410659940",
            "id": 410659940,
            "in_reply_to_id": 410516535,
            "line": 2,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDY1OTk0MA==",
            "original_commit_id": "223f8ca84df66931a6652e8a8d70167765087c63",
            "original_line": 2,
            "original_position": 2,
            "original_start_line": null,
            "path": "tests/run/test_genericclass.py",
            "position": 2,
            "pull_request_review_id": 395888862,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/410659940",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r410660216"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/410660216"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n\r\nstatic PyObject *__Pyx_PyObject_GetItem_Slow(PyObject *obj, PyObject* key) {\r\n```",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-18T07:05:44Z",
            "diff_hunk": "@@ -280,36 +280,51 @@ static CYTHON_INLINE PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* k\n \n /////////////// ObjectGetItem ///////////////\n // //@requires: GetItemInt - added in IndexNode as it uses templating.\n+//@requires: PyObjectGetAttrStrNoError\n+//@requires: PyObjectCallOneArg\n \n #if CYTHON_USE_TYPE_SLOTS\n static PyObject *__Pyx_PyObject_GetIndex(PyObject *obj, PyObject* index) {\n+    // Get element from sequence object `obj` at index `index`.\n     PyObject *runerr;\n     Py_ssize_t key_value;\n-    PySequenceMethods *m = Py_TYPE(obj)->tp_as_sequence;\n-    if (unlikely(!(m && m->sq_item))) {\n-        PyErr_Format(PyExc_TypeError, \"'%.200s' object is not subscriptable\", Py_TYPE(obj)->tp_name);\n-        return NULL;\n-    }\n-\n     key_value = __Pyx_PyIndex_AsSsize_t(index);\n     if (likely(key_value != -1 || !(runerr = PyErr_Occurred()))) {\n         return __Pyx_GetItemInt_Fast(obj, key_value, 0, 1, 1);\n     }\n-\n-    // Error handling code -- only manage OverflowError differently.\n     if (PyErr_GivenExceptionMatches(runerr, PyExc_OverflowError)) {\n         PyErr_Clear();\n         PyErr_Format(PyExc_IndexError, \"cannot fit '%.200s' into an index-sized integer\", Py_TYPE(index)->tp_name);\n     }\n     return NULL;\n }\n+static PyObject *__Pyx_PyObject_GetItem_Slow(PyObject *obj, PyObject* key) {",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r410660216",
            "id": 410660216,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDY2MDIxNg==",
            "original_commit_id": "708fb1193236db894bf5baf59a0e84b7df06fc0f",
            "original_line": 301,
            "original_position": 30,
            "original_start_line": null,
            "path": "Cython/Utility/ObjectHandling.c",
            "position": null,
            "pull_request_review_id": 395889015,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/410660216",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r410660238"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/410660238"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n\r\nstatic PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* key) {\r\n```",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-18T07:05:56Z",
            "diff_hunk": "@@ -280,36 +280,51 @@ static CYTHON_INLINE PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* k\n \n /////////////// ObjectGetItem ///////////////\n // //@requires: GetItemInt - added in IndexNode as it uses templating.\n+//@requires: PyObjectGetAttrStrNoError\n+//@requires: PyObjectCallOneArg\n \n #if CYTHON_USE_TYPE_SLOTS\n static PyObject *__Pyx_PyObject_GetIndex(PyObject *obj, PyObject* index) {\n+    // Get element from sequence object `obj` at index `index`.\n     PyObject *runerr;\n     Py_ssize_t key_value;\n-    PySequenceMethods *m = Py_TYPE(obj)->tp_as_sequence;\n-    if (unlikely(!(m && m->sq_item))) {\n-        PyErr_Format(PyExc_TypeError, \"'%.200s' object is not subscriptable\", Py_TYPE(obj)->tp_name);\n-        return NULL;\n-    }\n-\n     key_value = __Pyx_PyIndex_AsSsize_t(index);\n     if (likely(key_value != -1 || !(runerr = PyErr_Occurred()))) {\n         return __Pyx_GetItemInt_Fast(obj, key_value, 0, 1, 1);\n     }\n-\n-    // Error handling code -- only manage OverflowError differently.\n     if (PyErr_GivenExceptionMatches(runerr, PyExc_OverflowError)) {\n         PyErr_Clear();\n         PyErr_Format(PyExc_IndexError, \"cannot fit '%.200s' into an index-sized integer\", Py_TYPE(index)->tp_name);\n     }\n     return NULL;\n }\n+static PyObject *__Pyx_PyObject_GetItem_Slow(PyObject *obj, PyObject* key) {\n+    // Handles less common slow-path checks for GetItem\n+    if (likely(PyType_Check(obj))) {\n+        PyObject *meth = __Pyx_PyObject_GetAttrStrNoError(obj, PYIDENT(\"__class_getitem__\"));\n+        if (meth) {\n+            PyObject *result = __Pyx_PyObject_CallOneArg(meth, key);\n+            Py_DECREF(meth);\n+            return result;\n+        }\n+    }\n \n+    PyErr_Format(PyExc_TypeError, \"'%.200s' object is not subscriptable\", Py_TYPE(obj)->tp_name);\n+    return NULL;\n+}\n static PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* key) {",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r410660238",
            "id": 410660238,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDY2MDIzOA==",
            "original_commit_id": "708fb1193236db894bf5baf59a0e84b7df06fc0f",
            "original_line": 315,
            "original_position": 44,
            "original_start_line": null,
            "path": "Cython/Utility/ObjectHandling.c",
            "position": null,
            "pull_request_review_id": 395889015,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/410660238",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r410660314"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/410660314"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n            C[int]\r\n```",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-18T07:06:51Z",
            "diff_hunk": "@@ -0,0 +1,136 @@\n+# mode: run\n+# tag: pure3.7\n+\n+# COPIED FROM CPython 3.7\n+\n+import unittest\n+\n+\n+class TestClassGetitem(unittest.TestCase):\n+    # BEGIN - Additional tests from cython\n+    def test_no_class_getitem(self):\n+        class C: ...\n+        with self.assertRaises(TypeError):\n+          C[int]",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r410660314",
            "id": 410660314,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDY2MDMxNA==",
            "original_commit_id": "708fb1193236db894bf5baf59a0e84b7df06fc0f",
            "original_line": 14,
            "original_position": 14,
            "original_start_line": null,
            "path": "tests/run/test_genericclass.py",
            "position": null,
            "pull_request_review_id": 395889015,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/410660314",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r410663514"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/410663514"
                }
            },
            "author_association": "MEMBER",
            "body": "The code in `__Pyx_GetItemInt_Fast` tries `mp_subscript` first, so I don't think it makes much of a difference. (Just guessing, but I don't feel like digging deeper here.)",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-18T07:40:42Z",
            "diff_hunk": "@@ -285,11 +285,6 @@ static CYTHON_INLINE PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* k\n static PyObject *__Pyx_PyObject_GetIndex(PyObject *obj, PyObject* index) {\n     PyObject *runerr;\n     Py_ssize_t key_value;\n-    PySequenceMethods *m = Py_TYPE(obj)->tp_as_sequence;\n-    if (unlikely(!(m && m->sq_item))) {\n-        PyErr_Format(PyExc_TypeError, \"'%.200s' object is not subscriptable\", Py_TYPE(obj)->tp_name);\n-        return NULL;\n-    }",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r410663514",
            "id": 410663514,
            "in_reply_to_id": 408629211,
            "line": 292,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDY2MzUxNA==",
            "original_commit_id": "3a61c02cb770e33272d19bbcc2963a5d905314c3",
            "original_line": 292,
            "original_position": 8,
            "original_start_line": null,
            "path": "Cython/Utility/ObjectHandling.c",
            "position": 25,
            "pull_request_review_id": 395889015,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "LEFT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/410663514",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r410733322"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/410733322"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "I was actually under the impression that the \"tag\" comment would instruct the test runner to ignore this test for python < 3.7 which is what I really wanted to do.",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-18T18:30:19Z",
            "diff_hunk": "@@ -0,0 +1,135 @@\n+# mode: run\n+# tag: pure3.7",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r410733322",
            "id": 410733322,
            "in_reply_to_id": 410516535,
            "line": 2,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDczMzMyMg==",
            "original_commit_id": "223f8ca84df66931a6652e8a8d70167765087c63",
            "original_line": 2,
            "original_position": 2,
            "original_start_line": null,
            "path": "tests/run/test_genericclass.py",
            "position": 2,
            "pull_request_review_id": 395939159,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/410733322",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/771072?v=4",
                "events_url": "https://api.github.com/users/msg555/events{/privacy}",
                "followers_url": "https://api.github.com/users/msg555/followers",
                "following_url": "https://api.github.com/users/msg555/following{/other_user}",
                "gists_url": "https://api.github.com/users/msg555/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/msg555",
                "id": 771072,
                "login": "msg555",
                "node_id": "MDQ6VXNlcjc3MTA3Mg==",
                "organizations_url": "https://api.github.com/users/msg555/orgs",
                "received_events_url": "https://api.github.com/users/msg555/received_events",
                "repos_url": "https://api.github.com/users/msg555/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/msg555/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/msg555/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/msg555"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r410734315"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/410734315"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "reintroduce comment, didn't mean to delete this",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-18T18:38:59Z",
            "diff_hunk": "@@ -280,36 +280,53 @@ static CYTHON_INLINE PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* k\n \n /////////////// ObjectGetItem ///////////////\n // //@requires: GetItemInt - added in IndexNode as it uses templating.\n+//@requires: PyObjectGetAttrStrNoError\n+//@requires: PyObjectCallOneArg\n \n #if CYTHON_USE_TYPE_SLOTS\n static PyObject *__Pyx_PyObject_GetIndex(PyObject *obj, PyObject* index) {\n+    // Get element from sequence object `obj` at index `index`.\n     PyObject *runerr;\n     Py_ssize_t key_value;\n-    PySequenceMethods *m = Py_TYPE(obj)->tp_as_sequence;\n-    if (unlikely(!(m && m->sq_item))) {\n-        PyErr_Format(PyExc_TypeError, \"'%.200s' object is not subscriptable\", Py_TYPE(obj)->tp_name);\n-        return NULL;\n-    }\n-\n     key_value = __Pyx_PyIndex_AsSsize_t(index);\n     if (likely(key_value != -1 || !(runerr = PyErr_Occurred()))) {\n         return __Pyx_GetItemInt_Fast(obj, key_value, 0, 1, 1);\n     }\n-\n-    // Error handling code -- only manage OverflowError differently.",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r410734315",
            "id": 410734315,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDczNDMxNQ==",
            "original_commit_id": "63af147c47fb38e91b363832bfc68025128a7895",
            "original_line": 299,
            "original_position": 23,
            "original_start_line": null,
            "path": "Cython/Utility/ObjectHandling.c",
            "position": null,
            "pull_request_review_id": 395939837,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "LEFT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/410734315",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/771072?v=4",
                "events_url": "https://api.github.com/users/msg555/events{/privacy}",
                "followers_url": "https://api.github.com/users/msg555/followers",
                "following_url": "https://api.github.com/users/msg555/following{/other_user}",
                "gists_url": "https://api.github.com/users/msg555/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/msg555",
                "id": 771072,
                "login": "msg555",
                "node_id": "MDQ6VXNlcjc3MTA3Mg==",
                "organizations_url": "https://api.github.com/users/msg555/orgs",
                "received_events_url": "https://api.github.com/users/msg555/received_events",
                "repos_url": "https://api.github.com/users/msg555/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/msg555/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/msg555/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/msg555"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r410734408"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/410734408"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Reminder to update pointer style to `A *x` from `A* x`",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-18T18:39:31Z",
            "diff_hunk": "@@ -280,36 +280,53 @@ static CYTHON_INLINE PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* k\n \n /////////////// ObjectGetItem ///////////////\n // //@requires: GetItemInt - added in IndexNode as it uses templating.\n+//@requires: PyObjectGetAttrStrNoError\n+//@requires: PyObjectCallOneArg\n \n #if CYTHON_USE_TYPE_SLOTS\n static PyObject *__Pyx_PyObject_GetIndex(PyObject *obj, PyObject* index) {",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r410734408",
            "id": 410734408,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDczNDQwOA==",
            "original_commit_id": "63af147c47fb38e91b363832bfc68025128a7895",
            "original_line": 287,
            "original_position": 8,
            "original_start_line": null,
            "path": "Cython/Utility/ObjectHandling.c",
            "position": null,
            "pull_request_review_id": 395939837,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/410734408",
            "user": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/771072?v=4",
                "events_url": "https://api.github.com/users/msg555/events{/privacy}",
                "followers_url": "https://api.github.com/users/msg555/followers",
                "following_url": "https://api.github.com/users/msg555/following{/other_user}",
                "gists_url": "https://api.github.com/users/msg555/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/msg555",
                "id": 771072,
                "login": "msg555",
                "node_id": "MDQ6VXNlcjc3MTA3Mg==",
                "organizations_url": "https://api.github.com/users/msg555/orgs",
                "received_events_url": "https://api.github.com/users/msg555/received_events",
                "repos_url": "https://api.github.com/users/msg555/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/msg555/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/msg555/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/msg555"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r410735742"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/410735742"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "\"pure3.7\" runs the (Cython compiled) tests in all versions of Python, and also runs the tests in uncompiled-Python for Python>=3.7. I think this is correct because it should be possible for Cython to support `__class_getitem__` all the time. Essentially it's just providing confirmation that Cython matches Python behaviour (for the versions of Python where this is supported)\r\n\r\nThe `__init_subclass__` is probably something that has to be in the Python interpreter and Cython can't do on its own, so it makes sense to disable conditionally for some versions of Python.",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-18T18:49:31Z",
            "diff_hunk": "@@ -0,0 +1,135 @@\n+# mode: run\n+# tag: pure3.7",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r410735742",
            "id": 410735742,
            "in_reply_to_id": 410516535,
            "line": 2,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDczNTc0Mg==",
            "original_commit_id": "223f8ca84df66931a6652e8a8d70167765087c63",
            "original_line": 2,
            "original_position": 2,
            "original_start_line": null,
            "path": "tests/run/test_genericclass.py",
            "position": 2,
            "pull_request_review_id": 395940790,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/410735742",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/10536947?v=4",
                "events_url": "https://api.github.com/users/da-woods/events{/privacy}",
                "followers_url": "https://api.github.com/users/da-woods/followers",
                "following_url": "https://api.github.com/users/da-woods/following{/other_user}",
                "gists_url": "https://api.github.com/users/da-woods/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/da-woods",
                "id": 10536947,
                "login": "da-woods",
                "node_id": "MDQ6VXNlcjEwNTM2OTQ3",
                "organizations_url": "https://api.github.com/users/da-woods/orgs",
                "received_events_url": "https://api.github.com/users/da-woods/received_events",
                "repos_url": "https://api.github.com/users/da-woods/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/da-woods/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/da-woods/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/da-woods"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r410861652"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/410861652"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\nstatic PyObject *__Pyx_PyObject_GetIndex(PyObject *obj, PyObject *index) {\r\n```",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-19T09:29:15Z",
            "diff_hunk": "@@ -280,36 +280,53 @@ static CYTHON_INLINE PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* k\n \n /////////////// ObjectGetItem ///////////////\n // //@requires: GetItemInt - added in IndexNode as it uses templating.\n+//@requires: PyObjectGetAttrStrNoError\n+//@requires: PyObjectCallOneArg\n \n #if CYTHON_USE_TYPE_SLOTS\n static PyObject *__Pyx_PyObject_GetIndex(PyObject *obj, PyObject* index) {",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r410861652",
            "id": 410861652,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDg2MTY1Mg==",
            "original_commit_id": "63af147c47fb38e91b363832bfc68025128a7895",
            "original_line": 287,
            "original_position": 8,
            "original_start_line": null,
            "path": "Cython/Utility/ObjectHandling.c",
            "position": null,
            "pull_request_review_id": 395995988,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/410861652",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r410861805"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/410861805"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n\r\n    // Error handling code -- only manage OverflowError differently.\r\n    if (PyErr_GivenExceptionMatches(runerr, PyExc_OverflowError)) {\r\n```",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-19T09:30:06Z",
            "diff_hunk": "@@ -280,36 +280,53 @@ static CYTHON_INLINE PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* k\n \n /////////////// ObjectGetItem ///////////////\n // //@requires: GetItemInt - added in IndexNode as it uses templating.\n+//@requires: PyObjectGetAttrStrNoError\n+//@requires: PyObjectCallOneArg\n \n #if CYTHON_USE_TYPE_SLOTS\n static PyObject *__Pyx_PyObject_GetIndex(PyObject *obj, PyObject* index) {\n+    // Get element from sequence object `obj` at index `index`.\n     PyObject *runerr;\n     Py_ssize_t key_value;\n-    PySequenceMethods *m = Py_TYPE(obj)->tp_as_sequence;\n-    if (unlikely(!(m && m->sq_item))) {\n-        PyErr_Format(PyExc_TypeError, \"'%.200s' object is not subscriptable\", Py_TYPE(obj)->tp_name);\n-        return NULL;\n-    }\n-\n     key_value = __Pyx_PyIndex_AsSsize_t(index);\n     if (likely(key_value != -1 || !(runerr = PyErr_Occurred()))) {\n         return __Pyx_GetItemInt_Fast(obj, key_value, 0, 1, 1);\n     }\n-\n-    // Error handling code -- only manage OverflowError differently.\n     if (PyErr_GivenExceptionMatches(runerr, PyExc_OverflowError)) {",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r410861805",
            "id": 410861805,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDg2MTgwNQ==",
            "original_commit_id": "63af147c47fb38e91b363832bfc68025128a7895",
            "original_line": 297,
            "original_position": 24,
            "original_start_line": null,
            "path": "Cython/Utility/ObjectHandling.c",
            "position": null,
            "pull_request_review_id": 395995988,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/410861805",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r410861901"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/410861901"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\nstatic PyObject *__Pyx_PyObject_GetItem_Slow(PyObject *obj, PyObject *key) {\r\n```",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-19T09:30:29Z",
            "diff_hunk": "@@ -280,36 +280,53 @@ static CYTHON_INLINE PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* k\n \n /////////////// ObjectGetItem ///////////////\n // //@requires: GetItemInt - added in IndexNode as it uses templating.\n+//@requires: PyObjectGetAttrStrNoError\n+//@requires: PyObjectCallOneArg\n \n #if CYTHON_USE_TYPE_SLOTS\n static PyObject *__Pyx_PyObject_GetIndex(PyObject *obj, PyObject* index) {\n+    // Get element from sequence object `obj` at index `index`.\n     PyObject *runerr;\n     Py_ssize_t key_value;\n-    PySequenceMethods *m = Py_TYPE(obj)->tp_as_sequence;\n-    if (unlikely(!(m && m->sq_item))) {\n-        PyErr_Format(PyExc_TypeError, \"'%.200s' object is not subscriptable\", Py_TYPE(obj)->tp_name);\n-        return NULL;\n-    }\n-\n     key_value = __Pyx_PyIndex_AsSsize_t(index);\n     if (likely(key_value != -1 || !(runerr = PyErr_Occurred()))) {\n         return __Pyx_GetItemInt_Fast(obj, key_value, 0, 1, 1);\n     }\n-\n-    // Error handling code -- only manage OverflowError differently.\n     if (PyErr_GivenExceptionMatches(runerr, PyExc_OverflowError)) {\n         PyErr_Clear();\n         PyErr_Format(PyExc_IndexError, \"cannot fit '%.200s' into an index-sized integer\", Py_TYPE(index)->tp_name);\n     }\n     return NULL;\n }\n \n+static PyObject *__Pyx_PyObject_GetItem_Slow(PyObject *obj, PyObject* key) {",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r410861901",
            "id": 410861901,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDg2MTkwMQ==",
            "original_commit_id": "63af147c47fb38e91b363832bfc68025128a7895",
            "original_line": 302,
            "original_position": 31,
            "original_start_line": null,
            "path": "Cython/Utility/ObjectHandling.c",
            "position": null,
            "pull_request_review_id": 395995988,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/410861901",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r410863360"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/410863360"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n# tag: pure3.7\r\n# cython: language_level=3\r\n```",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-19T09:38:07Z",
            "diff_hunk": "@@ -0,0 +1,136 @@\n+# mode: run\n+# tag: pure3.7",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r410863360",
            "id": 410863360,
            "line": 2,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDg2MzM2MA==",
            "original_commit_id": "63af147c47fb38e91b363832bfc68025128a7895",
            "original_line": 2,
            "original_position": 2,
            "original_start_line": null,
            "path": "tests/run/test_genericclass.py",
            "position": 2,
            "pull_request_review_id": 395995988,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/410863360",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r410863709"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/410863709"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\nimport unittest\r\nimport sys\r\n```",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-19T09:39:31Z",
            "diff_hunk": "@@ -0,0 +1,136 @@\n+# mode: run\n+# tag: pure3.7\n+\n+# COPIED FROM CPython 3.7\n+\n+import unittest",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r410863709",
            "id": 410863709,
            "line": 7,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDg2MzcwOQ==",
            "original_commit_id": "63af147c47fb38e91b363832bfc68025128a7895",
            "original_line": 6,
            "original_position": 6,
            "original_start_line": null,
            "path": "tests/run/test_genericclass.py",
            "position": 7,
            "pull_request_review_id": 395995988,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/410863709",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r410864128"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/410864128"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n    @unittest.skipIf(sys.version_info < (3, 6), \"__init_subclass__() requires Py3.6+ (PEP 487)\")\r\n    def test_class_getitem_patched(self):\r\n```",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-19T09:41:35Z",
            "diff_hunk": "@@ -0,0 +1,136 @@\n+# mode: run\n+# tag: pure3.7\n+\n+# COPIED FROM CPython 3.7\n+\n+import unittest\n+\n+\n+class TestClassGetitem(unittest.TestCase):\n+    # BEGIN - Additional tests from cython\n+    def test_no_class_getitem(self):\n+        class C: ...\n+        with self.assertRaises(TypeError):\n+            C[int]\n+\n+    # END - Additional tests from cython\n+\n+    def test_class_getitem(self):\n+        getitem_args = []\n+        class C:\n+            def __class_getitem__(*args, **kwargs):\n+                getitem_args.extend([args, kwargs])\n+                return None\n+        C[int, str]\n+        self.assertEqual(getitem_args[0], (C, (int, str)))\n+        self.assertEqual(getitem_args[1], {})\n+\n+    def test_class_getitem_format(self):\n+        class C:\n+            def __class_getitem__(cls, item):\n+                return f'C[{item.__name__}]'\n+        self.assertEqual(C[int], 'C[int]')\n+        self.assertEqual(C[C], 'C[C]')\n+\n+    def test_class_getitem_inheritance(self):\n+        class C:\n+            def __class_getitem__(cls, item):\n+                return f'{cls.__name__}[{item.__name__}]'\n+        class D(C): ...\n+        self.assertEqual(D[int], 'D[int]')\n+        self.assertEqual(D[D], 'D[D]')\n+\n+    def test_class_getitem_inheritance_2(self):\n+        class C:\n+            def __class_getitem__(cls, item):\n+                return 'Should not see this'\n+        class D(C):\n+            def __class_getitem__(cls, item):\n+                return f'{cls.__name__}[{item.__name__}]'\n+        self.assertEqual(D[int], 'D[int]')\n+        self.assertEqual(D[D], 'D[D]')\n+\n+    def test_class_getitem_classmethod(self):\n+        class C:\n+            @classmethod\n+            def __class_getitem__(cls, item):\n+                return f'{cls.__name__}[{item.__name__}]'\n+        class D(C): ...\n+        self.assertEqual(D[int], 'D[int]')\n+        self.assertEqual(D[D], 'D[D]')\n+\n+    def test_class_getitem_patched(self):",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r410864128",
            "id": 410864128,
            "line": 65,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDg2NDEyOA==",
            "original_commit_id": "63af147c47fb38e91b363832bfc68025128a7895",
            "original_line": 64,
            "original_position": 62,
            "original_start_line": null,
            "path": "tests/run/test_genericclass.py",
            "position": 65,
            "pull_request_review_id": 395995988,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/410864128",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r410872990"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/410872990"
                }
            },
            "author_association": "MEMBER",
            "body": "The old style classes are actually a bug in current master. With `language_level=3`, there shouldn't be any old style classes in Py2 any more. I pushed a fix as #3530, let's see if that breaks anything in the test suite.",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-19T10:30:16Z",
            "diff_hunk": "@@ -0,0 +1,135 @@\n+# mode: run\n+# tag: pure3.7",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r410872990",
            "id": 410872990,
            "in_reply_to_id": 410516535,
            "line": 2,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDg3Mjk5MA==",
            "original_commit_id": "223f8ca84df66931a6652e8a8d70167765087c63",
            "original_line": 2,
            "original_position": 2,
            "original_start_line": null,
            "path": "tests/run/test_genericclass.py",
            "position": 2,
            "pull_request_review_id": 396001316,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/410872990",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r410977369"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/410977369"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n```",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-19T19:48:09Z",
            "diff_hunk": "@@ -0,0 +1,139 @@\n+# mode: run\n+# tag: pure3.7\n+# cython: language_level=3",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r410977369",
            "id": 410977369,
            "line": 3,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDk3NzM2OQ==",
            "original_commit_id": "ad9ed80a07b92df7806c85c8ae500f44790ed33c",
            "original_line": 3,
            "original_position": 3,
            "original_start_line": null,
            "path": "tests/run/test_genericclass.py",
            "position": 3,
            "pull_request_review_id": 396055233,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/410977369",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r410979434"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/410979434"
                }
            },
            "author_association": "MEMBER",
            "body": "> The `__init_subclass__` is probably something that has to be in the Python interpreter and Cython can't do on its own\r\n\r\nThere's actually #2781 about this. PEP-487 Just needs to get implemented.",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-19T19:58:52Z",
            "diff_hunk": "@@ -0,0 +1,135 @@\n+# mode: run\n+# tag: pure3.7",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r410979434",
            "id": 410979434,
            "in_reply_to_id": 410516535,
            "line": 2,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDk3OTQzNA==",
            "original_commit_id": "223f8ca84df66931a6652e8a8d70167765087c63",
            "original_line": 2,
            "original_position": 2,
            "original_start_line": null,
            "path": "tests/run/test_genericclass.py",
            "position": 2,
            "pull_request_review_id": 396056180,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/410979434",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/cython/cython/pull/3518#discussion_r411125434"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/3518"
                },
                "self": {
                    "href": "https://api.github.com/repos/cython/cython/pulls/comments/411125434"
                }
            },
            "author_association": "MEMBER",
            "body": "Looks like we still need to set the language level explicitly for Py2.\r\n```suggestion\r\n# tag: pure3.7\r\n# cython: language_level=3\r\n```",
            "commit_id": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "created_at": "2020-04-20T06:30:36Z",
            "diff_hunk": "@@ -0,0 +1,138 @@\n+# mode: run\n+# tag: pure3.7",
            "html_url": "https://github.com/cython/cython/pull/3518#discussion_r411125434",
            "id": 411125434,
            "line": 2,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTEyNTQzNA==",
            "original_commit_id": "bc3240fafb275af0de7141ac43ffc820dcc3cf75",
            "original_line": 2,
            "original_position": 2,
            "original_start_line": null,
            "path": "tests/run/test_genericclass.py",
            "position": 2,
            "pull_request_review_id": 396171372,
            "pull_request_url": "https://api.github.com/repos/cython/cython/pulls/3518",
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "updated_at": "2020-04-20T06:31:11Z",
            "url": "https://api.github.com/repos/cython/cython/pulls/comments/411125434",
            "user": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/cython/cython/issues/3518/comments",
    "commit_data": [
        {
            "author": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/771072?v=4",
                "events_url": "https://api.github.com/users/msg555/events{/privacy}",
                "followers_url": "https://api.github.com/users/msg555/followers",
                "following_url": "https://api.github.com/users/msg555/following{/other_user}",
                "gists_url": "https://api.github.com/users/msg555/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/msg555",
                "id": 771072,
                "login": "msg555",
                "node_id": "MDQ6VXNlcjc3MTA3Mg==",
                "organizations_url": "https://api.github.com/users/msg555/orgs",
                "received_events_url": "https://api.github.com/users/msg555/received_events",
                "repos_url": "https://api.github.com/users/msg555/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/msg555/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/msg555/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/msg555"
            },
            "comments_url": "https://api.github.com/repos/cython/cython/commits/bc3240fafb275af0de7141ac43ffc820dcc3cf75/comments",
            "commit": {
                "author": {
                    "date": "2020-04-15T05:04:50Z",
                    "email": "msg555@gmail.com",
                    "name": "msg555"
                },
                "comment_count": 0,
                "committer": {
                    "date": "2020-04-19T22:55:41Z",
                    "email": "msg555@gmail.com",
                    "name": "msg555"
                },
                "message": "Update GetItem to support __class_getitem__ for type objects",
                "tree": {
                    "sha": "14984a2d593e94213c6678723ec09cc38b9737fa",
                    "url": "https://api.github.com/repos/cython/cython/git/trees/14984a2d593e94213c6678723ec09cc38b9737fa"
                },
                "url": "https://api.github.com/repos/cython/cython/git/commits/bc3240fafb275af0de7141ac43ffc820dcc3cf75",
                "verification": {
                    "payload": null,
                    "reason": "unsigned",
                    "signature": null,
                    "verified": false
                }
            },
            "committer": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/771072?v=4",
                "events_url": "https://api.github.com/users/msg555/events{/privacy}",
                "followers_url": "https://api.github.com/users/msg555/followers",
                "following_url": "https://api.github.com/users/msg555/following{/other_user}",
                "gists_url": "https://api.github.com/users/msg555/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/msg555",
                "id": 771072,
                "login": "msg555",
                "node_id": "MDQ6VXNlcjc3MTA3Mg==",
                "organizations_url": "https://api.github.com/users/msg555/orgs",
                "received_events_url": "https://api.github.com/users/msg555/received_events",
                "repos_url": "https://api.github.com/users/msg555/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/msg555/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/msg555/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/msg555"
            },
            "html_url": "https://github.com/cython/cython/commit/bc3240fafb275af0de7141ac43ffc820dcc3cf75",
            "node_id": "MDY6Q29tbWl0MjU1ODEwMjA1OmJjMzI0MGZhZmIyNzVhZjBkZTcxNDFhYzQzZmZjODIwZGNjM2NmNzU=",
            "parents": [
                {
                    "html_url": "https://github.com/cython/cython/commit/b692adc13c560551e3ea87e0c0d01bc983248893",
                    "sha": "b692adc13c560551e3ea87e0c0d01bc983248893",
                    "url": "https://api.github.com/repos/cython/cython/commits/b692adc13c560551e3ea87e0c0d01bc983248893"
                }
            ],
            "sha": "bc3240fafb275af0de7141ac43ffc820dcc3cf75",
            "url": "https://api.github.com/repos/cython/cython/commits/bc3240fafb275af0de7141ac43ffc820dcc3cf75"
        },
        {
            "author": {
                "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
                "events_url": "https://api.github.com/users/scoder/events{/privacy}",
                "followers_url": "https://api.github.com/users/scoder/followers",
                "following_url": "https://api.github.com/users/scoder/following{/other_user}",
                "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/scoder",
                "id": 491659,
                "login": "scoder",
                "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
                "organizations_url": "https://api.github.com/users/scoder/orgs",
                "received_events_url": "https://api.github.com/users/scoder/received_events",
                "repos_url": "https://api.github.com/users/scoder/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/scoder"
            },
            "comments_url": "https://api.github.com/repos/cython/cython/commits/1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f/comments",
            "commit": {
                "author": {
                    "date": "2020-04-20T06:31:08Z",
                    "email": "stefan_ml@behnel.de",
                    "name": "Stefan Behnel"
                },
                "comment_count": 0,
                "committer": {
                    "date": "2020-04-20T06:31:08Z",
                    "email": "noreply@github.com",
                    "name": "GitHub"
                },
                "message": "Use Py3 semantics in test to avoid old-style classes in Py2.",
                "tree": {
                    "sha": "8bef73c797d92ffa606f64a06d02d6bf88710cb9",
                    "url": "https://api.github.com/repos/cython/cython/git/trees/8bef73c797d92ffa606f64a06d02d6bf88710cb9"
                },
                "url": "https://api.github.com/repos/cython/cython/git/commits/1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
                "verification": {
                    "payload": "tree 8bef73c797d92ffa606f64a06d02d6bf88710cb9\nparent bc3240fafb275af0de7141ac43ffc820dcc3cf75\nauthor Stefan Behnel <stefan_ml@behnel.de> 1587364268 +0200\ncommitter GitHub <noreply@github.com> 1587364268 +0200\n\nUse Py3 semantics in test to avoid old-style classes in Py2.",
                    "reason": "valid",
                    "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJenUGsCRBK7hj4Ov3rIwAAdHIIAEoUyo/0RntTljwJCVC40Ei7\nwRGPLsxetsLg85PfMWGaBYI/x1W9KInKoNDoNpgfx18argjwPiMC3d7TGv2WYYgr\nbqOGTnhwXioTHCPlhazoguqh2LDdO4+ljVBm68VsCVZWJ8UQAaqo0zAARc4L/7L8\nTcypDvtDNszvl/Shw8HbHJllFK2gnltdLWSNjUUuZPFSw31XAjEYky8v9YNi/Qu/\ndTPWeo4KGGgYzN81hZAoueDjPfUVo001S9705VFSGW7mCtYIoQW9TS9i62tkQdyT\n9sqmZc/SbuxCrb1Y6P2W2rjzHqlL5csPICQxFd7ONtZ/67ZQtRPOT6l9zMM2ywc=\n=sVVU\n-----END PGP SIGNATURE-----\n",
                    "verified": true
                }
            },
            "committer": {
                "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4",
                "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
                "followers_url": "https://api.github.com/users/web-flow/followers",
                "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
                "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/web-flow",
                "id": 19864447,
                "login": "web-flow",
                "node_id": "MDQ6VXNlcjE5ODY0NDQ3",
                "organizations_url": "https://api.github.com/users/web-flow/orgs",
                "received_events_url": "https://api.github.com/users/web-flow/received_events",
                "repos_url": "https://api.github.com/users/web-flow/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/web-flow"
            },
            "html_url": "https://github.com/cython/cython/commit/1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "node_id": "MDY6Q29tbWl0MjU1ODEwMjA1OjFjMWRmZjNlY2QwM2E5Njc2NjVhYjI5ZGQ3MWRmZTYzOTRkMmJkMmY=",
            "parents": [
                {
                    "html_url": "https://github.com/cython/cython/commit/bc3240fafb275af0de7141ac43ffc820dcc3cf75",
                    "sha": "bc3240fafb275af0de7141ac43ffc820dcc3cf75",
                    "url": "https://api.github.com/repos/cython/cython/commits/bc3240fafb275af0de7141ac43ffc820dcc3cf75"
                }
            ],
            "sha": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
            "url": "https://api.github.com/repos/cython/cython/commits/1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f"
        }
    ],
    "commits_url": "https://api.github.com/repos/cython/cython/pulls/3518/commits",
    "created_at": "2020-04-15T05:07:52Z",
    "diff_url": "https://github.com/cython/cython/pull/3518.diff",
    "draft": false,
    "head": {
        "label": "msg555:master",
        "ref": "master",
        "repo": {
            "archive_url": "https://api.github.com/repos/msg555/cython/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/msg555/cython/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/msg555/cython/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/msg555/cython/branches{/branch}",
            "clone_url": "https://github.com/msg555/cython.git",
            "collaborators_url": "https://api.github.com/repos/msg555/cython/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/msg555/cython/comments{/number}",
            "commits_url": "https://api.github.com/repos/msg555/cython/commits{/sha}",
            "compare_url": "https://api.github.com/repos/msg555/cython/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/msg555/cython/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/msg555/cython/contributors",
            "created_at": "2020-04-15T05:04:05Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/msg555/cython/deployments",
            "description": "The most widely used Python to C compiler",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/msg555/cython/downloads",
            "events_url": "https://api.github.com/repos/msg555/cython/events",
            "fork": true,
            "forks": 0,
            "forks_count": 0,
            "forks_url": "https://api.github.com/repos/msg555/cython/forks",
            "full_name": "msg555/cython",
            "git_commits_url": "https://api.github.com/repos/msg555/cython/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/msg555/cython/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/msg555/cython/git/tags{/sha}",
            "git_url": "git://github.com/msg555/cython.git",
            "has_downloads": true,
            "has_issues": false,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://cython.org",
            "hooks_url": "https://api.github.com/repos/msg555/cython/hooks",
            "html_url": "https://github.com/msg555/cython",
            "id": 255810205,
            "issue_comment_url": "https://api.github.com/repos/msg555/cython/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/msg555/cython/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/msg555/cython/issues{/number}",
            "keys_url": "https://api.github.com/repos/msg555/cython/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/msg555/cython/labels{/name}",
            "language": "Python",
            "languages_url": "https://api.github.com/repos/msg555/cython/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/msg555/cython/merges",
            "milestones_url": "https://api.github.com/repos/msg555/cython/milestones{/number}",
            "mirror_url": null,
            "name": "cython",
            "node_id": "MDEwOlJlcG9zaXRvcnkyNTU4MTAyMDU=",
            "notifications_url": "https://api.github.com/repos/msg555/cython/notifications{?since,all,participating}",
            "open_issues": 0,
            "open_issues_count": 0,
            "owner": {
                "avatar_url": "https://avatars1.githubusercontent.com/u/771072?v=4",
                "events_url": "https://api.github.com/users/msg555/events{/privacy}",
                "followers_url": "https://api.github.com/users/msg555/followers",
                "following_url": "https://api.github.com/users/msg555/following{/other_user}",
                "gists_url": "https://api.github.com/users/msg555/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/msg555",
                "id": 771072,
                "login": "msg555",
                "node_id": "MDQ6VXNlcjc3MTA3Mg==",
                "organizations_url": "https://api.github.com/users/msg555/orgs",
                "received_events_url": "https://api.github.com/users/msg555/received_events",
                "repos_url": "https://api.github.com/users/msg555/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/msg555/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/msg555/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/msg555"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/msg555/cython/pulls{/number}",
            "pushed_at": "2020-04-20T06:31:09Z",
            "releases_url": "https://api.github.com/repos/msg555/cython/releases{/id}",
            "size": 57267,
            "ssh_url": "git@github.com:msg555/cython.git",
            "stargazers_count": 0,
            "stargazers_url": "https://api.github.com/repos/msg555/cython/stargazers",
            "statuses_url": "https://api.github.com/repos/msg555/cython/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/msg555/cython/subscribers",
            "subscription_url": "https://api.github.com/repos/msg555/cython/subscription",
            "svn_url": "https://github.com/msg555/cython",
            "tags_url": "https://api.github.com/repos/msg555/cython/tags",
            "teams_url": "https://api.github.com/repos/msg555/cython/teams",
            "trees_url": "https://api.github.com/repos/msg555/cython/git/trees{/sha}",
            "updated_at": "2020-04-20T06:31:12Z",
            "url": "https://api.github.com/repos/msg555/cython",
            "watchers": 0,
            "watchers_count": 0
        },
        "sha": "1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
        "user": {
            "avatar_url": "https://avatars1.githubusercontent.com/u/771072?v=4",
            "events_url": "https://api.github.com/users/msg555/events{/privacy}",
            "followers_url": "https://api.github.com/users/msg555/followers",
            "following_url": "https://api.github.com/users/msg555/following{/other_user}",
            "gists_url": "https://api.github.com/users/msg555/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/msg555",
            "id": 771072,
            "login": "msg555",
            "node_id": "MDQ6VXNlcjc3MTA3Mg==",
            "organizations_url": "https://api.github.com/users/msg555/orgs",
            "received_events_url": "https://api.github.com/users/msg555/received_events",
            "repos_url": "https://api.github.com/users/msg555/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/msg555/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/msg555/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/msg555"
        }
    },
    "html_url": "https://github.com/cython/cython/pull/3518",
    "id": 403544037,
    "issue_url": "https://api.github.com/repos/cython/cython/issues/3518",
    "labels": [
        {
            "color": "444444",
            "default": false,
            "description": null,
            "id": 425556315,
            "name": "Python Semantics",
            "node_id": "MDU6TGFiZWw0MjU1NTYzMTU=",
            "url": "https://api.github.com/repos/cython/cython/labels/Python%20Semantics"
        }
    ],
    "locked": false,
    "merge_commit_sha": "c0ceabe1ee0904477ed0b0b9371ae43915d7bd2f",
    "merged_at": "2020-04-20T07:06:10Z",
    "milestone": {
        "closed_at": null,
        "closed_issues": 195,
        "created_at": "2018-08-18T06:33:08Z",
        "creator": {
            "avatar_url": "https://avatars0.githubusercontent.com/u/491659?v=4",
            "events_url": "https://api.github.com/users/scoder/events{/privacy}",
            "followers_url": "https://api.github.com/users/scoder/followers",
            "following_url": "https://api.github.com/users/scoder/following{/other_user}",
            "gists_url": "https://api.github.com/users/scoder/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/scoder",
            "id": 491659,
            "login": "scoder",
            "node_id": "MDQ6VXNlcjQ5MTY1OQ==",
            "organizations_url": "https://api.github.com/users/scoder/orgs",
            "received_events_url": "https://api.github.com/users/scoder/received_events",
            "repos_url": "https://api.github.com/users/scoder/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/scoder/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/scoder/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/scoder"
        },
        "description": "Goals:\r\n– New version scheme: 3.x instead of 0.x.\r\n– Change default `language_level` from `2` to `3`.\r\n– Change default for `binding` directive from `False` to `True`.\r\n– Fix some Python compatibility issues (if possible, allowing for breaking changes).\r\n",
        "due_on": null,
        "html_url": "https://github.com/cython/cython/milestone/58",
        "id": 3580387,
        "labels_url": "https://api.github.com/repos/cython/cython/milestones/58/labels",
        "node_id": "MDk6TWlsZXN0b25lMzU4MDM4Nw==",
        "number": 58,
        "open_issues": 23,
        "state": "open",
        "title": "3.0",
        "updated_at": "2020-04-20T07:10:16Z",
        "url": "https://api.github.com/repos/cython/cython/milestones/58"
    },
    "node_id": "MDExOlB1bGxSZXF1ZXN0NDAzNTQ0MDM3",
    "number": 3518,
    "patch_url": "https://github.com/cython/cython/pull/3518.patch",
    "requested_reviewers": [],
    "requested_teams": [],
    "review_comment_url": "https://api.github.com/repos/cython/cython/pulls/comments{/number}",
    "review_comments_url": "https://api.github.com/repos/cython/cython/pulls/3518/comments",
    "state": "closed",
    "statuses_url": "https://api.github.com/repos/cython/cython/statuses/1c1dff3ecd03a967665ab29dd71dfe6394d2bd2f",
    "title": "Update GetItem to support __class_getitem__ for type objects",
    "updated_at": "2020-04-20T07:06:30Z",
    "url": "https://api.github.com/repos/cython/cython/pulls/3518",
    "user": {
        "avatar_url": "https://avatars1.githubusercontent.com/u/771072?v=4",
        "events_url": "https://api.github.com/users/msg555/events{/privacy}",
        "followers_url": "https://api.github.com/users/msg555/followers",
        "following_url": "https://api.github.com/users/msg555/following{/other_user}",
        "gists_url": "https://api.github.com/users/msg555/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/msg555",
        "id": 771072,
        "login": "msg555",
        "node_id": "MDQ6VXNlcjc3MTA3Mg==",
        "organizations_url": "https://api.github.com/users/msg555/orgs",
        "received_events_url": "https://api.github.com/users/msg555/received_events",
        "repos_url": "https://api.github.com/users/msg555/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/msg555/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/msg555/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/msg555"
    }
}